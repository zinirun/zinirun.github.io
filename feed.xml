<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>zinirun</title>
  
  <subtitle>tech blog by Zini</subtitle>
  <link href="https://zinirun.github.io/feed.xml" rel="self"/>
  
  <link href="https://zinirun.github.io/"/>
  <updated>2020-08-20T13:37:05.043Z</updated>
  <id>https://zinirun.github.io/</id>
  
  <author>
    <name>zini</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Javascript 30 - Day 7 Array Cardio Day 2</title>
    <link href="https://zinirun.github.io/2020/08/20/js-course30-7/"/>
    <id>https://zinirun.github.io/2020/08/20/js-course30-7/</id>
    <published>2020-08-20T13:16:26.000Z</published>
    <updated>2020-08-20T13:37:05.043Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Day-7-Array-Cardio-Day-2"><a href="#Day-7-Array-Cardio-Day-2" class="headerlink" title="Day 7 - Array Cardio Day 2"></a>Day 7 - Array Cardio Day 2</h2><div class="video-container"><iframe src="https://www.youtube.com/embed/QNmRfyNg1lw" frameborder="0" loading="lazy" allowfullscreen></iframe></div><h2 id="Full-Script"><a href="#Full-Script" class="headerlink" title="Full Script"></a>Full Script</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Data</span></span><br><span class="line"><span class="keyword">const</span> people = [</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&#x27;Wes&#x27;</span>, <span class="attr">year</span>: <span class="number">1988</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&#x27;Kait&#x27;</span>, <span class="attr">year</span>: <span class="number">1986</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&#x27;Irv&#x27;</span>, <span class="attr">year</span>: <span class="number">1970</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&#x27;Lux&#x27;</span>, <span class="attr">year</span>: <span class="number">2015</span> &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> comments = [</span><br><span class="line">  &#123; <span class="attr">text</span>: <span class="string">&#x27;Love this!&#x27;</span>, <span class="attr">id</span>: <span class="number">523423</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">text</span>: <span class="string">&#x27;Super good&#x27;</span>, <span class="attr">id</span>: <span class="number">823423</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">text</span>: <span class="string">&#x27;You are the best&#x27;</span>, <span class="attr">id</span>: <span class="number">2039842</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">text</span>: <span class="string">&#x27;Ramen is my fav food ever&#x27;</span>, <span class="attr">id</span>: <span class="number">123523</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">text</span>: <span class="string">&#x27;Nice Nice Nice!&#x27;</span>, <span class="attr">id</span>: <span class="number">542328</span> &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// Some and Every Checks</span></span><br><span class="line"><span class="comment">// Array.prototype.some() // is at least one person 19 or older?</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> isAdult = people.some(<span class="function">(<span class="params">person</span>) =&gt;</span> <span class="keyword">new</span> <span class="built_in">Date</span>().getFullYear() - person.year &gt;= <span class="number">19</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(&#123; isAdult &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Array.prototype.every() // is everyone 19 or older?</span></span><br><span class="line"><span class="keyword">const</span> allAdults = people.every(<span class="function">(<span class="params">person</span>) =&gt;</span> <span class="keyword">new</span> <span class="built_in">Date</span>().getFullYear() - person.year &gt;= <span class="number">19</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(&#123; allAdults &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Array.prototype.find()</span></span><br><span class="line"><span class="comment">// Find is like filter, but instead returns just the one you are looking for</span></span><br><span class="line"><span class="comment">// find the comment with the ID of 823423</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> comment = comments.find(<span class="function">(<span class="params">comment</span>) =&gt;</span> comment.id === <span class="number">823423</span>);</span><br><span class="line"><span class="built_in">console</span>.log(comment);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Array.prototype.findIndex()</span></span><br><span class="line"><span class="comment">// Find the comment with this ID</span></span><br><span class="line"><span class="comment">// delete the comment with the ID of 823423</span></span><br><span class="line"><span class="keyword">const</span> index = comments.findIndex(<span class="function">(<span class="params">comment</span>) =&gt;</span> comment.id === <span class="number">823423</span>);</span><br><span class="line"><span class="built_in">console</span>.log(index);</span><br><span class="line"></span><br><span class="line"><span class="comment">//comments.splice(index, 1);</span></span><br><span class="line"><span class="keyword">const</span> newComments = [...comments.slice(<span class="number">0</span>, index), ...comments.slice(index + <span class="number">1</span>)];</span><br><span class="line"><span class="built_in">console</span>.table(newComments);</span><br></pre></td></tr></table></figure><h3 id="some-every"><a href="#some-every" class="headerlink" title="some, every"></a>some, every</h3><p><code>some</code>은 하나라도 조건을 만족하면 <code>true</code>를 반환하고, <code>every</code>는 모두 조건을 만족해야 <code>true</code>을 반환한다. 사용법은 매우 간단하다. <code>some</code>과 <code>every</code>는 format이 동일하므로 <code>some</code>만 살펴보자.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isAdult = people.some(<span class="function">(<span class="params">person</span>) =&gt;</span> <span class="keyword">new</span> <span class="built_in">Date</span>().getFullYear() - person.year &gt;= <span class="number">19</span>);</span><br></pre></td></tr></table></figure><p>Arrow Function으로 작성되었는데 풀어보면</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isAdult = people.some(<span class="function"><span class="keyword">function</span> (<span class="params">person</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> currentYear = <span class="keyword">new</span> <span class="built_in">Date</span>().getFullYear();</span><br><span class="line">  <span class="keyword">if</span> (currentYear - person.year &gt;= <span class="number">19</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>이것과 똑같다. 특정 조건이 참인지 여부를 검사하고 boolean 값을 반환한다.</p><h3 id="find-findIndex"><a href="#find-findIndex" class="headerlink" title="find, findIndex"></a>find, findIndex</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> comment = comments.find(<span class="function">(<span class="params">comment</span>) =&gt;</span> comment.id === <span class="number">823423</span>);</span><br></pre></td></tr></table></figure><p><code>find</code>는 말 그대로 특정 조건에 부합하는 데이터를 찾고, 그 첫 번째 데이터를 반환한다. 단 하나의 객체만 반환할 수 있다.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> index = comments.findIndex(<span class="function">(<span class="params">comment</span>) =&gt;</span> comment.id === <span class="number">823423</span>);</span><br></pre></td></tr></table></figure><p><code>findIndex</code>는 <code>find</code>와 거의 동일하지만 객체 배열에서 특정 조건을 찾았을 때 객체를 반환하는 것이 아닌, 인덱스를 반환한다.</p><h3 id="splice"><a href="#splice" class="headerlink" title="splice"></a>splice</h3><p><code>splice</code>의 기본 문법은 다음과 같다.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array.splice(start[, deleteCount[, item1[, item2[, ...]]]])</span><br></pre></td></tr></table></figure><p>이번 예제에서 <code>splice</code>를 사용한 방법은</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">comments.splice(index, <span class="number">1</span>);</span><br></pre></td></tr></table></figure><p>위의 문법에 대입해서 생각하면 이전에 찾은 <code>index</code>값을 시작으로 1개의 값을 삭제한다.</p><h3 id="spread-전개구문"><a href="#spread-전개구문" class="headerlink" title="spread (전개구문)"></a>spread (전개구문)</h3><p>위의 <code>splice</code>를 사용하는 방법도 있지만, spread 구문을 사용하는 방법도 있다. 전개구문은 <code>...</code>을 배열에 붙여서 사용하는데, <code>unpack</code>의 개념과 비슷하다.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="built_in">console</span>.log(...arr) <span class="comment">// 1,2,3</span></span><br></pre></td></tr></table></figure><p>이렇게 배열의 껍데기를 벗기고 내용물을 보여준다.</p><p>예제의 <code>splice</code>, 즉 <code>index</code>의 내용을 제외한 나머지 <code>comments</code>를 보여주기 위해서는,</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> newComments = [</span><br><span class="line">    ...comments.slice(<span class="number">0</span>, index),</span><br><span class="line">    ...comments.slice(index + <span class="number">1</span>)</span><br><span class="line">];</span><br></pre></td></tr></table></figure><p><code>index</code>를 기준으로 앞에서 자르고 뒤에서 잘라서 붙여주면 된다. <code>...</code>를 사용하지 않으면 <code>object</code> 객체끼리 합쳐지기 때문에 내용물을 붙이기 위해 전개 구문을 사용한다.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Day-7-Array-Cardio-Day-2&quot;&gt;&lt;a href=&quot;#Day-7-Array-Cardio-Day-2&quot; class=&quot;headerlink&quot; title=&quot;Day 7 - Array Cardio Day 2&quot;&gt;&lt;/a&gt;Day 7 - Arra</summary>
      
    
    
    
    <category term="javascript" scheme="https://zinirun.github.io/categories/javascript/"/>
    
    
    <category term="javascript" scheme="https://zinirun.github.io/tags/javascript/"/>
    
    <category term="javascript30" scheme="https://zinirun.github.io/tags/javascript30/"/>
    
    <category term="VanillaJS" scheme="https://zinirun.github.io/tags/VanillaJS/"/>
    
  </entry>
  
  <entry>
    <title>Algoritm - DFS/BFS (깊이우선탐색, 너비우선탐색)</title>
    <link href="https://zinirun.github.io/2020/08/20/ps-dfs-bfs-1/"/>
    <id>https://zinirun.github.io/2020/08/20/ps-dfs-bfs-1/</id>
    <published>2020-08-20T05:42:14.000Z</published>
    <updated>2020-08-20T06:30:54.417Z</updated>
    
    <content type="html"><![CDATA[<h2 id="들어가기-전에"><a href="#들어가기-전에" class="headerlink" title="들어가기 전에"></a>들어가기 전에</h2><p>대학교 알고리즘 수업 때 DFS, BFS를 배우면서 뭔 말인지는 대충 알겠는데 뭔가 별로 쓰일 것 같지도 않고, 정확하게 공부하자니 어려워서 딱 “필요한 만큼”만 공부했다. 그 때 확실히 끝냈더라면 DFS, BFS와 관련된 PS 문제를 수월하게 풀었을텐데, 후회했다. 이제 책을 보며 다시 정리하고 예제를 풀어보려 한다. 탐색 알고리즘은 정말 중요하고, 활용도가 높다. <em>(이번 부스트캠프 2020 2차 마지막 문제를 못 푼 것이 정말 아쉽다, 제대로 공부 해놓을걸.)</em></p><h2 id="DFS-깊이-우선-탐색"><a href="#DFS-깊이-우선-탐색" class="headerlink" title="DFS, 깊이 우선 탐색"></a>DFS, 깊이 우선 탐색</h2><p>DFS는 그래프에서 깊은 부분을 우선적으로 탐색하는 알고리즘이다. 그래프의 기본 구조에서 두 노드가 간선으로 연결되어 있다면 ‘두 노드는 <strong>인접</strong> <em>adjacent</em>하다고 말한다.</p><p>사실 이런 설명을 보고 한번에 이해하면 진작에 탐색 알고리즘은 마스터했을 것이다. 나는 구글에서 DFS, BFS 글들을 아무리 검색해도 완벽하게 이해되지 않았는데, 책에 나온 코드를 보며 한 줄씩 따라가니 이해하기 쉬웠다. 코드를 먼저 보자.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dfs</span>(<span class="params">graph, v, visited</span>):</span></span><br><span class="line">    visited[v]=<span class="literal">True</span></span><br><span class="line">    print(v, end=<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> graph[v]:</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> visited[i]:</span><br><span class="line">            dfs(graph, i, visited)</span><br><span class="line">            </span><br><span class="line">graph = [</span><br><span class="line">    [],</span><br><span class="line">    [<span class="number">2</span>,<span class="number">3</span>,<span class="number">8</span>],</span><br><span class="line">    [<span class="number">1</span>,<span class="number">7</span>],</span><br><span class="line">    [<span class="number">1</span>,<span class="number">4</span>,<span class="number">5</span>],</span><br><span class="line">    [<span class="number">3</span>,<span class="number">5</span>],</span><br><span class="line">    [<span class="number">3</span>,<span class="number">4</span>],</span><br><span class="line">    [<span class="number">7</span>],</span><br><span class="line">    [<span class="number">2</span>,<span class="number">6</span>,<span class="number">8</span>],</span><br><span class="line">    [<span class="number">1</span>,<span class="number">7</span>]</span><br><span class="line">]</span><br><span class="line">visited = [<span class="literal">False</span>]*len(graph)</span><br><span class="line">dfs(graph, <span class="number">1</span>, visited)</span><br></pre></td></tr></table></figure><p>실행 결과</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1 2 7 6 8 3 4 5 </span><br></pre></td></tr></table></figure><p>생각보다 기본적인 <code>dfs</code> 함수 틀 자체는 복잡하지 않게 생겼다. <strong>재귀</strong>를 사용하는데 dfs는 스택, bfs는 큐이고 재귀 함수 자체가 기본적으로 스택이기 때문에 편하게 재귀를 사용한다. (안 쓰는 방법도 있고, 구현하는 방법은 정말 많다)</p><p><code>graph</code>를 보면 왠 숫자들의 배열이 배열로 감싸져 있는데, 그 전에 그래프를 표현하는 방식은 크게 2가지가 있다.</p><ul><li>인접 행렬(Adjacency Matrix) 방식<ul><li>2차원 배열에 각 노드가 연결된 형태를 기록하는 방식</li></ul></li><li>인접 리스트(Adjacency List) 방식<ul><li>모든 노드에 연결된 노드에 대한 정보를 차례대로 연결하여 저장하는 방식</li></ul></li></ul><p>따라서 코드의 <code>graph</code>는 <code>인접 리스트</code> 방식으로 저장되어 있다. 1번 노드부터 8번 노드까지 차례대로 연결된 노드를 나타낸 것이다. 0번 노드는 없기 때문에 빈 배열로 자리만 차지하게 둔다.</p><p>이제 방문하는 노드마다 <code>visited</code>를 <code>True</code>로 표시하며 탐색을 시작한다. <code>graph</code>에 노드마다 연결된 노드들이 있으므로 <code>for</code>문으로 순회하며 방문하지 않은 노드들을 차례로 <code>dfs</code>를 재귀 호출하며 방문한다.</p><ul><li>방문 처리는 스택에 한번 삽입되어 처리된 노드가 다시 삽입되지 않게 체크하는 것을 의미한다. 방문 처리를 함으로써 각 노드를 한 번씩만 처리할 수 있다.</li></ul><blockquote><p>결론적으로 DFS는 차례대로 정렬된 노드를 방문하며 그 인접 노드들을 재귀적으로 방문하는 것이다.</p></blockquote><h2 id="BFS-너비-우선-탐색"><a href="#BFS-너비-우선-탐색" class="headerlink" title="BFS, 너비 우선 탐색"></a>BFS, 너비 우선 탐색</h2><p>BFS는 가까운 노드부터 탐색하는 알고리즘이다. DFS는 최대한 멀리 있는 노드, BFS는 제일 가까운 노드부터이다. 큐 자료구조를 이용하는 것이 정석인데, 인접한 노드를 반복적으로 큐에 넣도록 알고리즘을 작성하면 자연스럽게 먼저 들어온 것이 먼저 나가게 되기 때문이다.</p><p>알고리즘의 작동 방식은,</p><ul><li>탐색 시작 노드를 큐에 삽입 -&gt; 방문 처리</li><li>큐에서 노드를 꺼내고 그 노드의 인접노드 중 방문하지 않은 노드를 <strong>모두 큐에 삽입</strong> -&gt; 방문 처리</li><li>전 과정을 수행할 수 없을 때까지 반복</li></ul><p>코드를 보자.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> deque</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bfs</span>(<span class="params">graph, start, visited</span>):</span></span><br><span class="line">    q=deque([start])</span><br><span class="line">    visited[start]=<span class="literal">True</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> q:</span><br><span class="line">        v=q.popleft()</span><br><span class="line">        print(v, end=<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> graph[v]:</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> visited[i]:</span><br><span class="line">                q.append(i)</span><br><span class="line">                visited[i]=<span class="literal">True</span></span><br><span class="line">    </span><br><span class="line">graph = [</span><br><span class="line">    [],</span><br><span class="line">    [<span class="number">2</span>,<span class="number">3</span>,<span class="number">8</span>],</span><br><span class="line">    [<span class="number">1</span>,<span class="number">7</span>],</span><br><span class="line">    [<span class="number">1</span>,<span class="number">4</span>,<span class="number">5</span>],</span><br><span class="line">    [<span class="number">3</span>,<span class="number">5</span>],</span><br><span class="line">    [<span class="number">3</span>,<span class="number">4</span>],</span><br><span class="line">    [<span class="number">7</span>],</span><br><span class="line">    [<span class="number">2</span>,<span class="number">6</span>,<span class="number">8</span>],</span><br><span class="line">    [<span class="number">1</span>,<span class="number">7</span>]</span><br><span class="line">]</span><br><span class="line">visited = [<span class="literal">False</span>]*len(graph)</span><br><span class="line">bfs(graph, <span class="number">1</span>, visited)</span><br></pre></td></tr></table></figure><p>큐 자료구조를 이용하므로 효율을 위해 파이썬에서는 <code>deque</code>를 사용한다. 첫 방문 노드를 queue에 삽입하고 방문처리 후, 인접 노드를 모두 큐에 넣고 하나씩 빼면서(<code>popleft()</code>) 방문처리하는 과정을 큐가 빌 때까지 반복한다.</p><p>DFS, BFS에 관련된 예제를 하나씩 풀어보자.</p><h2 id="DFS-음료수-얼려-먹기"><a href="#DFS-음료수-얼려-먹기" class="headerlink" title="DFS - 음료수 얼려 먹기"></a>DFS - 음료수 얼려 먹기</h2><p>0과 1로 이루어진 N*M의 배열에서 0 묶음의 개수(연결된 0의 묶음 개수)를 구하는 문제이다.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">dx=[<span class="number">1</span>,<span class="number">0</span>,<span class="number">-1</span>,<span class="number">0</span>]</span><br><span class="line">dy=[<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">-1</span>]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dfs</span>(<span class="params">x,y</span>):</span></span><br><span class="line">    <span class="keyword">if</span> x&lt;=<span class="number">-1</span> <span class="keyword">or</span> x&gt;=n <span class="keyword">or</span> y&lt;=<span class="number">-1</span> <span class="keyword">or</span> y&gt;=m: <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">if</span> graph[x][y]==<span class="number">0</span>:</span><br><span class="line">        graph[x][y]=<span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">4</span>):</span><br><span class="line">            dfs(x+dx[i],y+dy[i])</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">                </span><br><span class="line">n,m=map(int, input().split())</span><br><span class="line">graph = [list(map(int,input())) <span class="keyword">for</span> i <span class="keyword">in</span> range(n)]</span><br><span class="line"></span><br><span class="line">result=<span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(m):</span><br><span class="line">        <span class="keyword">if</span> dfs(i,j) == <span class="literal">True</span>:</span><br><span class="line">            result+=<span class="number">1</span></span><br><span class="line"></span><br><span class="line">print(result)</span><br></pre></td></tr></table></figure><p>상, 하, 좌, 우로 탐색하므로 <code>dx</code>, <code>dy</code>로 이동 방향을 미리 정해주면 나중에 사용하기 편하다. 특정 지점의 상, 하, 좌, 우를 탐색한 후 인접 노드 중 값이 0이면서 아직 방문하지 않은 노드를 방문하고, 방문한 노드에서 다시 상, 하, 좌, 우를 탐색하며 방문을 진행하면 모든 노드를 방문할 수 있다.</p><h2 id="BFS-미로-탈출"><a href="#BFS-미로-탈출" class="headerlink" title="BFS - 미로 탈출"></a>BFS - 미로 탈출</h2><p>0과 1로 이루어진 배열에서 1로만 갈 수 있는 길의 방문 순서를 <code>1, 2, 3..</code> 으로 기록하여 최종적인 방문 순서를 구하는 문제이다.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> deque</span><br><span class="line"></span><br><span class="line">dx=[<span class="number">-1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>]</span><br><span class="line">dy=[<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">-1</span>]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bfs</span>(<span class="params">x,y</span>):</span></span><br><span class="line">    q=deque()</span><br><span class="line">    q.append((x,y))</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> q:</span><br><span class="line">        x,y=q.popleft()</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">4</span>):</span><br><span class="line">            nx, ny=x+dx[i], y+dy[i]</span><br><span class="line">            <span class="keyword">if</span> nx&lt;<span class="number">0</span> <span class="keyword">or</span> ny&lt;<span class="number">0</span> <span class="keyword">or</span> nx&gt;=n <span class="keyword">or</span> ny&gt;=m <span class="keyword">or</span> graph[nx][ny]==<span class="number">0</span>: <span class="keyword">continue</span></span><br><span class="line">            <span class="keyword">if</span> graph[nx][ny]==<span class="number">1</span>:</span><br><span class="line">                graph[nx][ny]=graph[x][y]+<span class="number">1</span></span><br><span class="line">                q.append((nx,ny))</span><br><span class="line">    <span class="keyword">return</span> graph[n<span class="number">-1</span>][m<span class="number">-1</span>]</span><br><span class="line"></span><br><span class="line">n,m=map(int, input().split())</span><br><span class="line">graph = [list(map(int,input())) <span class="keyword">for</span> i <span class="keyword">in</span> range(n)]</span><br><span class="line"></span><br><span class="line">print(bfs(<span class="number">0</span>,<span class="number">0</span>))</span><br></pre></td></tr></table></figure><p>맨 처음에 (1,1)의 위치에서 시작하며, (1,1)의 값은 항상 1이라고 문제에 언급되어 있다. 시작 좌표에서 상, 하, 좌, 우로 탐색하고, 1인 값의 노드가 있다면 2로 바꾼다. 위 과정을 반복하면 최단 경로의 값들이 1씩 증가하는 형태가 된다.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;들어가기-전에&quot;&gt;&lt;a href=&quot;#들어가기-전에&quot; class=&quot;headerlink&quot; title=&quot;들어가기 전에&quot;&gt;&lt;/a&gt;들어가기 전에&lt;/h2&gt;&lt;p&gt;대학교 알고리즘 수업 때 DFS, BFS를 배우면서 뭔 말인지는 대충 알겠는데 뭔가 별로 </summary>
      
    
    
    
    <category term="algorithm" scheme="https://zinirun.github.io/categories/algorithm/"/>
    
    
    <category term="algorithm" scheme="https://zinirun.github.io/tags/algorithm/"/>
    
    <category term="ps" scheme="https://zinirun.github.io/tags/ps/"/>
    
  </entry>
  
  <entry>
    <title>ReactJS - state (컴포넌트 상태 관리)</title>
    <link href="https://zinirun.github.io/2020/08/19/react-state/"/>
    <id>https://zinirun.github.io/2020/08/19/react-state/</id>
    <published>2020-08-19T14:55:53.000Z</published>
    <updated>2020-08-19T15:15:45.421Z</updated>
    
    <content type="html"><![CDATA[<h2 id="state"><a href="#state" class="headerlink" title="state"></a>state</h2><p>프로퍼티는 컴포넌트 내부에서 값을 바꿀 수 없다. 그러면 상품의 수량을 입력하거나, 댓글을 남기는 등 값을 바꿔야 하는 경우엔 어떻게 할까? <code>state</code>를 사용한다.</p><h3 id="StateExample-jsx"><a href="#StateExample-jsx" class="headerlink" title="StateExample.jsx"></a>StateExample.jsx</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StateExample</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="built_in">super</span>(props); <span class="comment">//state 정의</span></span><br><span class="line">    <span class="comment">//forceUpdate 사용시 this.loading=true; 와 같이 직접선언</span></span><br><span class="line">    <span class="built_in">this</span>.state = &#123;</span><br><span class="line">      loading: <span class="literal">true</span>,</span><br><span class="line">      formData: <span class="string">&#x27;no data&#x27;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">this</span>.handleData = <span class="built_in">this</span>.handleData.bind(<span class="built_in">this</span>); <span class="comment">//함수로 넘어갈 this는 반드시 생성자에서 bind로 묶어야함</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="built_in">this</span>.handleData, <span class="number">3000</span>); <span class="comment">//3초 후 저장된 값을 변경</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleData() &#123;</span><br><span class="line">    <span class="keyword">const</span> data = <span class="string">&#x27;new data&#x27;</span>;</span><br><span class="line">    <span class="keyword">const</span> &#123; formData &#125; = <span class="built_in">this</span>.state; <span class="comment">//특수변수 this.state를 사용하여 state값에 접근</span></span><br><span class="line">    <span class="comment">//setState가 호출되면 자동으로 render함수가 호출됨</span></span><br><span class="line">    <span class="comment">//직접 변경하고 검증없이 강제로 render함수를 실행하고 싶다면</span></span><br><span class="line">    <span class="comment">//this로 접근해서 직접 바꾸고 this.forceUpdate() 사용</span></span><br><span class="line">    <span class="comment">//but render에서의 접근은 this.state.data가 아닌 this.data로 접근</span></span><br><span class="line">    <span class="comment">// this.loading = false;</span></span><br><span class="line">    <span class="comment">// this.formData = data + this.formData;</span></span><br><span class="line">    <span class="comment">// this.forceUpdate();</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">      loading: <span class="literal">false</span>,</span><br><span class="line">      formData: data + formData,</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;loading값&#x27;</span>, <span class="built_in">this</span>.state.loading);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//setState 함수의 인자로 함수를 전달하면 이전 state값을 쉽게 읽을 수 있음</span></span><br><span class="line">  handleData2(data) &#123;</span><br><span class="line">    <span class="built_in">this</span>.setState(<span class="function">(<span class="params">prevState</span>) =&gt;</span> (&#123;</span><br><span class="line">      loading: <span class="literal">false</span>,</span><br><span class="line">      formData: data + prevState.formData,</span><br><span class="line">    &#125;));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;span&gt;로딩중: &#123;<span class="built_in">String</span>(<span class="built_in">this</span>.state.loading)&#125;&lt;/span&gt;</span><br><span class="line">        &lt;span&gt;결과: &#123;<span class="built_in">this</span>.state.formData&#125;&lt;/span&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> StateExample;</span><br></pre></td></tr></table></figure><p>기본적으로 state는</p><ul><li><code>constructor</code>에 선언</li><li><code>setState()</code>로 변경</li></ul><p>이렇게 사용한다.</p><p><code>setState()</code>가 실행되면 검증 단계 후 자동으로 <code>render()</code>를 실행시키므로 별도의 새로고침 없이도 동적인 페이지에서 값이 바뀐다. 검증 단계를 거치기 싫고 강제로 값을 바꿔 새로고침을 만들고 싶다면 <code>forceUpdate()</code>를 사용하면 되는데, 자세한 설명은 위 코드 내에 주석으로 해놓았다.</p><p>그리고 중요한 것은, 함수로 넘어갈 <code>this</code>는 반드시 생성자 <code>constructor</code>에서 <code>bind()</code> 함수로 묶어주어야 한다.</p><h3 id="이전-상태와-함께-사용하기"><a href="#이전-상태와-함께-사용하기" class="headerlink" title="이전 상태와 함께 사용하기"></a>이전 상태와 함께 사용하기</h3><p>상태를 바꿀 때 이전 상태가 필요한 경우가 있다. <code>count</code>를 1씩 증가시키는 예제로 살펴보자.</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;</span><br><span class="line">      count: <span class="number">0</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">//state 정의</span></span><br><span class="line">    <span class="built_in">this</span>.increaseCount = <span class="built_in">this</span>.increaseCount.bind(<span class="built_in">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  increaseCount() &#123;</span><br><span class="line">    <span class="built_in">this</span>.setState(<span class="function">(<span class="params">prev</span>) =&gt;</span> (&#123; <span class="attr">count</span>: prev.count + <span class="number">1</span> &#125;));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;span&gt;카운트: &#123;<span class="built_in">this</span>.state.count&#125;&lt;/span&gt;</span><br><span class="line">        &lt;button onClick=&#123;<span class="built_in">this</span>.increaseCount&#125;&gt;카운트 증가&lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Counter;</span><br></pre></td></tr></table></figure><p><code>count</code>를 <code>이전 값 + 1</code> 해줘야 하므로 이전 <code>state</code>에 대한 접근이 필요한데, 이 때 <code>setState</code>의 첫 번째 인자로 이전 상태에 접근할 수 있다.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;state&quot;&gt;&lt;a href=&quot;#state&quot; class=&quot;headerlink&quot; title=&quot;state&quot;&gt;&lt;/a&gt;state&lt;/h2&gt;&lt;p&gt;프로퍼티는 컴포넌트 내부에서 값을 바꿀 수 없다. 그러면 상품의 수량을 입력하거나, 댓글을 남기는 등 값</summary>
      
    
    
    
    <category term="ReactJS" scheme="https://zinirun.github.io/categories/ReactJS/"/>
    
    
    <category term="javascript" scheme="https://zinirun.github.io/tags/javascript/"/>
    
    <category term="react" scheme="https://zinirun.github.io/tags/react/"/>
    
  </entry>
  
  <entry>
    <title>Flask 앱 도커로 서비스하기 (nginX, uwsgi)</title>
    <link href="https://zinirun.github.io/2020/08/19/deploy-flask-to-docker/"/>
    <id>https://zinirun.github.io/2020/08/19/deploy-flask-to-docker/</id>
    <published>2020-08-19T13:04:45.000Z</published>
    <updated>2020-08-19T13:16:23.695Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Flask-배포하기"><a href="#Flask-배포하기" class="headerlink" title="Flask 배포하기"></a>Flask 배포하기</h2><p><strong>Flask</strong>에서 만든 웹 어플리케이션을 서버에서 서비스한다면 서버(Host OS)상에 만든 파일을 업로드하고 <code>nginX</code> 프레임워크와 <code>Flask</code> 앱을 연결시키기 위해 <code>uwsgi</code>을 사용할 수 있다.</p><p>우분투 서버에서 Flask 기반의 서비스를 구동하기 위해 <code>Python</code>, <code>Anaconda</code>, <code>nginX</code>, <code>uwsgi</code>를 세팅하고 파이썬에 Flask와 필요한 라이브러리를 <code>pip</code>로 설치할 수 있다.</p><p>그러나 Docker를 사용하면 패키지 버전 충돌에 스트레스 받지 않고 간편하게 웹 서비스를 컨테이너화할 수 있다.</p><p>이 글은 Flask 구동에 관련된 파이썬 파일과 웹 파일(py, html 등)이 작성되었다는 가정하에 시작한다.</p><h2 id="Flask-서비스-준비"><a href="#Flask-서비스-준비" class="headerlink" title="Flask 서비스 준비"></a>Flask 서비스 준비</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># 서버 실행</span></span><br><span class="line">    app.run(host=<span class="string">&#x27;0.0.0.0&#x27;</span>, debug=<span class="literal">True</span>, port=<span class="number">80</span>)</span><br></pre></td></tr></table></figure><p>메인이 되는 파이썬 파일을 수정한다. port를 <code>80</code>으로 설정한 이유는 nginX의 기본 포트가 <code>80</code>이기 때문에 이를 설정하지 않으면 컨테이너화해도 nginX와 포트를 공유하지 못해 웹 페이지가 정상적으로 열지 못한다.</p><p><img src="https://1.bp.blogspot.com/-tDeiZUXzEIM/Xlen0OBfjYI/AAAAAAAAAUE/jbTLZ6LVxf0f85dcJ7c3YVGAKoODoz6YgCLcBGAsYHQ/s1600/%25ED%258C%258C%25EC%259D%25B4%25EC%25B0%25B8%25ED%258F%25B4%25EB%258D%2594.JPG" alt="1"></p><p>그리고 파일 위치를 정리한다. 프로젝트 폴더 내에 <code>app</code> 폴더를 만들어 <code>main.py</code>를 포함한 파일과 폴더를 위치시킨다. 완료된 모습은 위와 같다. 프로젝트 폴더로 들어가면 <code>app</code> 폴더와 곧 만들 <code>Dockerfile</code>만 존재한다.</p><h2 id="Dockerfile-requirements-작성하기"><a href="#Dockerfile-requirements-작성하기" class="headerlink" title="Dockerfile, requirements 작성하기"></a>Dockerfile, requirements 작성하기</h2><p>도커의 장점을 활용할 때가 왔다. Dockerhub를 검색하니 <code>uwsgi+nginx+flask</code> 환경이 모두 세팅된 이미지가 있었다. 이를 사용해서 간단하게 플라스크 앱을 싱글 컨테이너로 배포할 수 있다.</p><p><code>Dockerfile</code></p><figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> tiangolo/uwsgi-nginx-flask:python3.<span class="number">7</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> ./app /app</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> pip install -r requirements.txt</span></span><br></pre></td></tr></table></figure><ul><li><code>FROM</code> : tiangolo/uwsgi-nginx-flask 이미지를 통해 도커이미지를 만든다.</li><li><code>COPY</code> : app 폴더 내의 내용을 컨테이너 내부의 app 폴더에 복사한다.</li><li><code>RUN</code> : app 폴더 내에 만들어둔 requirements.txt 내용을 파이썬 패키지 설치한다.</li><li>참고로 <code>Dockerfile</code>은 확장자가 없는, 그냥 파일명이 <code>Dockerfile</code>이다.</li></ul><p><code>app</code> 폴더 내의 <code>requirements.txt</code> 파일에는 파이썬에 필요한 라이브러리의 목록이 들어있다.</p><p><code>requirements.txt</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">opencv-python</span><br><span class="line">scikit-learn</span><br></pre></td></tr></table></figure><p>이는 예시이다. 필자는 이미지 분석에 필요한 라이브러리를 추가했다. 필요한 라이브러리들을 엔터로 구분하여 작성하면 된다. Flask는 이미지에 들어있기 때문에 작성할 필요가 없다.</p><h2 id="Docker-이미지-빌드하고-실행하기"><a href="#Docker-이미지-빌드하고-실행하기" class="headerlink" title="Docker 이미지 빌드하고 실행하기"></a>Docker 이미지 빌드하고 실행하기</h2><p>이제 도커 이미지를 만들기 위한 모든 파일 작성이 끝났다. 프로젝트 폴더를 <code>ftp</code>를 이용해 서버에 업로드하고(Github을 이용해도 상관없다), 터미널에서 <code>프로젝트 폴더</code>로 이동하자.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t myimage .</span><br></pre></td></tr></table></figure><p>도커 이미지를 빌드한다. <code>myimage</code> 대신 원하는 이름을 사용해도 된다. 마지막의 온점 <code>.</code> 을 까먹지 말자. 해당 폴더에서 자동으로 <code>Dockerfile</code>을 찾아 이미지를 빌드할 것이다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name mycontainer -p 80:80 myimage</span><br></pre></td></tr></table></figure><p>빌드된 <code>myimage</code> 이미지를 컨테이너로 실행한다. <code>-d</code>는 백그라운드 실행이다.</p><p>호스트의 <code>80</code>포트와 도커의 <code>80</code>포트를 공유함으로써 <code>호스트 IP/도메인</code>을 통해 브라우저로 접속할 수 있다. 주소에 포트를 입력하지 않으면 자동으로 80포트로 접속하기 때문에 굳이 <code>:80</code>을 입력할 필요가 없다.</p><p>이제 브라우저를 통해서 접속한다.</p><p>접속 거부 메시지가 뜬다면 <code>py</code> 파일에서 <code>app.run</code>의 포트를 <code>80</code>으로 설정했는지 확인해보자. 다른 오류 메시지가 뜬다면 <em>역시 구글링이 답이다.</em></p><h2 id="마치며"><a href="#마치며" class="headerlink" title="마치며"></a>마치며</h2><p>Docker를 통해 Flask 기반의 웹 애플리케이션을 서비스해보았다. 도커의 편리함을 또 체감한다. 환경 구축뿐만 아니라 컨테이너화해서 구동하는 이점을 생각하면 Host에서 직접 구동하는 것보다는 훨씬 뛰어난 것을 느낀다.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Flask-배포하기&quot;&gt;&lt;a href=&quot;#Flask-배포하기&quot; class=&quot;headerlink&quot; title=&quot;Flask 배포하기&quot;&gt;&lt;/a&gt;Flask 배포하기&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;Flask&lt;/strong&gt;에서 만든 웹 어플리케이션을 </summary>
      
    
    
    
    <category term="flask" scheme="https://zinirun.github.io/categories/flask/"/>
    
    <category term="docker" scheme="https://zinirun.github.io/categories/flask/docker/"/>
    
    
    <category term="flask" scheme="https://zinirun.github.io/tags/flask/"/>
    
    <category term="docker" scheme="https://zinirun.github.io/tags/docker/"/>
    
    <category term="nginx" scheme="https://zinirun.github.io/tags/nginx/"/>
    
    <category term="uwsgi" scheme="https://zinirun.github.io/tags/uwsgi/"/>
    
  </entry>
  
  <entry>
    <title>Javascript 30 - Day 6 Type Ahead</title>
    <link href="https://zinirun.github.io/2020/08/19/js-course30-6/"/>
    <id>https://zinirun.github.io/2020/08/19/js-course30-6/</id>
    <published>2020-08-19T12:43:00.000Z</published>
    <updated>2020-08-20T00:57:31.774Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Day-6-Type-Ahead"><a href="#Day-6-Type-Ahead" class="headerlink" title="Day 6 - Type Ahead"></a>Day 6 - Type Ahead</h2><div class="video-container"><iframe src="https://www.youtube.com/embed/y4gZMJKAeWs" frameborder="0" loading="lazy" allowfullscreen></iframe></div><h3 id="Full-Script"><a href="#Full-Script" class="headerlink" title="Full Script"></a>Full Script</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">const</span> endpoint =</span><br><span class="line">    <span class="string">&#x27;https://gist.githubusercontent.com/Miserlou/c5cd8364bf9b2420bb29/raw/2bf258763cdddd704f8ffd3ea9a3e81d25e2c6f6/cities.json&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> cities = [];</span><br><span class="line"></span><br><span class="line">  fetch(endpoint)</span><br><span class="line">    .then(<span class="function">(<span class="params">blob</span>) =&gt;</span> blob.json())</span><br><span class="line">    .then(<span class="function">(<span class="params">data</span>) =&gt;</span> cities.push(...data)); <span class="comment">//spread</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">findMatches</span>(<span class="params">wordToMatch, cities</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> cities.filter(<span class="function">(<span class="params">place</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> regex = <span class="keyword">new</span> <span class="built_in">RegExp</span>(wordToMatch, <span class="string">&#x27;ig&#x27;</span>); <span class="comment">// i:insensitive, g:global</span></span><br><span class="line">      <span class="keyword">return</span> place.city.match(regex) || place.state.match(regex);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">displayMatches</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> matchArray = findMatches(<span class="built_in">this</span>.value, cities);</span><br><span class="line">    <span class="keyword">const</span> html = matchArray</span><br><span class="line">      .map(<span class="function">(<span class="params">place</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> regex = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="built_in">this</span>.value, <span class="string">&#x27;gi&#x27;</span>);</span><br><span class="line">        <span class="keyword">const</span> cityName = place.city.replace(regex, <span class="string">`&lt;span class=&quot;hl&quot;&gt;<span class="subst">$&#123;<span class="built_in">this</span>.value&#125;</span>&lt;/span&gt;`</span>);</span><br><span class="line">        <span class="keyword">const</span> stateName = place.state.replace(regex, <span class="string">`&lt;span class=&quot;hl&quot;&gt;<span class="subst">$&#123;<span class="built_in">this</span>.value&#125;</span>&lt;/span&gt;`</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">  &lt;li&gt;</span></span><br><span class="line"><span class="string">    &lt;span class=&quot;name&quot;&gt;<span class="subst">$&#123;cityName&#125;</span>, <span class="subst">$&#123;stateName&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">    &lt;span class=&quot;population&quot;&gt;<span class="subst">$&#123;numberWithCommas(place.population)&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">  &lt;/li&gt;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line">      &#125;)</span><br><span class="line">      .join(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    suggestions.innerHTML = html;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">numberWithCommas</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x.toString().replace(<span class="regexp">/\B(?=(\d&#123;3&#125;)+(?!\d))/g</span>, <span class="string">&#x27;,&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> searchInput = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.search&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> suggestions = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.suggestions&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  searchInput.addEventListener(<span class="string">&#x27;change&#x27;</span>, displayMatches);</span><br><span class="line">  searchInput.addEventListener(<span class="string">&#x27;keyup&#x27;</span>, displayMatches);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">window</span>.addEventListener(<span class="string">&#x27;load&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    searchInput.focus();</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><h3 id="json-데이터-가져오기-fetch"><a href="#json-데이터-가져오기-fetch" class="headerlink" title="json 데이터 가져오기 (fetch)"></a>json 데이터 가져오기 (fetch)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fetch(endpoint)</span><br><span class="line">  .then(<span class="function">(<span class="params">blob</span>) =&gt;</span> blob.json())</span><br><span class="line">  .then(<span class="function">(<span class="params">data</span>) =&gt;</span> cities.push(...data)); <span class="comment">//spread</span></span><br></pre></td></tr></table></figure><p><code>fetch()</code>를 호출하면 브라우저는 네트워크 요청을 보내고 <code>Promise</code>가 반환된다. 데이터를 <code>json</code> 형태로 만들고, 그 데이터를 <code>cities</code>에 <code>push</code>한다. (<code>cities</code>는 <code>const</code>로 선언되었기 때문에 대입시킬 수 없다)</p><h3 id="정규식-사용하기-RegExp"><a href="#정규식-사용하기-RegExp" class="headerlink" title="정규식 사용하기 (RegExp)"></a>정규식 사용하기 (RegExp)</h3><h4 id="데이터-찾기"><a href="#데이터-찾기" class="headerlink" title="데이터 찾기"></a>데이터 찾기</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">findMatches</span>(<span class="params">wordToMatch, cities</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> cities.filter(<span class="function">(<span class="params">place</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> regex = <span class="keyword">new</span> <span class="built_in">RegExp</span>(wordToMatch, <span class="string">&#x27;ig&#x27;</span>); <span class="comment">// i:insensitive, g:global</span></span><br><span class="line">    <span class="keyword">return</span> place.city.match(regex) || place.state.match(regex);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>정규식을 사용하기 위해 <code>RegExp</code>를 선언한다. 자바스크립트에서 정규표현식 사용은 <a href="https://poiemaweb.com/js-regexp">PoiemaWeb</a>에 잘 설명되어 있다. 찾을 단어 <code>wordToMatch</code>를 <code>cities</code>의 각 요소 <code>place</code>에서 찾는데, <code>city</code>와 <code>state</code>에서 한 개라도 맞으면 반환한다.</p><h4 id="데이터-변환-교체-하고-HTML에서-나타내기"><a href="#데이터-변환-교체-하고-HTML에서-나타내기" class="headerlink" title="데이터 변환(교체)하고 HTML에서 나타내기"></a>데이터 변환(교체)하고 HTML에서 나타내기</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">displayMatches</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> matchArray = findMatches(<span class="built_in">this</span>.value, cities);</span><br><span class="line">  <span class="keyword">const</span> html = matchArray</span><br><span class="line">    .map(<span class="function">(<span class="params">place</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> regex = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="built_in">this</span>.value, <span class="string">&#x27;gi&#x27;</span>);</span><br><span class="line">      <span class="keyword">const</span> cityName = place.city.replace(regex, <span class="string">`&lt;span class=&quot;hl&quot;&gt;<span class="subst">$&#123;<span class="built_in">this</span>.value&#125;</span>&lt;/span&gt;`</span>);</span><br><span class="line">      <span class="keyword">const</span> stateName = place.state.replace(regex, <span class="string">`&lt;span class=&quot;hl&quot;&gt;<span class="subst">$&#123;<span class="built_in">this</span>.value&#125;</span>&lt;/span&gt;`</span>);</span><br><span class="line">      <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;li&gt;</span></span><br><span class="line"><span class="string">          &lt;span class=&quot;name&quot;&gt;<span class="subst">$&#123;cityName&#125;</span>, <span class="subst">$&#123;stateName&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">          &lt;span class=&quot;population&quot;&gt;<span class="subst">$&#123;numberWithCommas(place.population)&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">        &lt;/li&gt;`</span>;</span><br><span class="line">    &#125;)</span><br><span class="line">    .join(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">  suggestions.innerHTML = html;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>입력하는 값과 일치하는 부분을 highlight 표시하기 위해 <code>regex</code>를 이용하여 바꿔준다. 그리고 <code>matchArray</code>의 값을 적절히 가공하여 <code>innerHTML</code>에 넣어준다.</p><h4 id="Event-추가하기"><a href="#Event-추가하기" class="headerlink" title="Event 추가하기"></a>Event 추가하기</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> searchInput = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.search&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> suggestions = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.suggestions&#x27;</span>);</span><br><span class="line"></span><br><span class="line">searchInput.addEventListener(<span class="string">&#x27;change&#x27;</span>, displayMatches);</span><br><span class="line">searchInput.addEventListener(<span class="string">&#x27;keyup&#x27;</span>, displayMatches);</span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&#x27;load&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  searchInput.focus();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>필요한 함수들을 모두 만들었으니 이벤트만 걸어주면 된다. <code>change</code>에만 이벤트를 걸면 사용자가 입력이 완전히 끝났을 때만 함수가 실행되므로 예제의 목적에 맞게 <code>keyup</code>에도 이벤트를 걸어야 실시간으로 변하는 것처럼 보인다.</p><p>예제 솔루션에는 포함되어 있지 않지만 <code>focus</code> 메소드를 사용하여 <code>input</code> 객체에 포커스를 주었다.</p><h2 id="응용하기"><a href="#응용하기" class="headerlink" title="응용하기"></a>응용하기</h2><h3 id="regex-대신-includes-사용하기"><a href="#regex-대신-includes-사용하기" class="headerlink" title="regex 대신 includes 사용하기"></a>regex 대신 <code>includes</code> 사용하기</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">findMatches</span>(<span class="params">wordToMatch, cities</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> cities.filter(<span class="function">(<span class="params">place</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (</span><br><span class="line">      place.city.toLowerCase().includes(wordToMatch.toLowerCase()) ||</span><br><span class="line">      place.city.toLowerCase().includes(wordToMatch.toLowerCase())</span><br><span class="line">    ) &#123;</span><br><span class="line">      <span class="keyword">return</span> place.city || place.state;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>findMatches()</code> 함수를 정규식을 사용하지 않고 <code>includes</code>를 사용할 수도 있다. 이게 더 가독성이 좋을 지도 모르겠다.</p><h3 id="Debounce-처리하기"><a href="#Debounce-처리하기" class="headerlink" title="Debounce 처리하기"></a>Debounce 처리하기</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> timer;</span><br><span class="line"><span class="keyword">const</span> delay = <span class="number">200</span>;</span><br><span class="line">searchInput.addEventListener(<span class="string">&#x27;input&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (timer) &#123;</span><br><span class="line">    <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">  &#125;</span><br><span class="line">  timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    displayMatches(e.target);</span><br><span class="line">  &#125;, delay);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>모든 input event에서 함수를 처리하면 성능상으로도, 비용상으로도 비효율적이다. 이 때 <strong>디바운싱</strong>을 사용할 수 있다. 검색 event에서 디바운싱의 사용은 획기적으로 API 요청을 줄여주기에, 안 쓸 이유가 없다. 다른 글에 <a href="https://zinirun.github.io/2020/08/16/js-throttling-debouncing/">디바운싱과 쓰로틀링</a>을 정리해두었으니 참고하자.</p><p>이제 6번째 날인데, 자바스크립트의 활용 범위는 끝이 없는 것 같다. 남은 24일이 기대된다.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Day-6-Type-Ahead&quot;&gt;&lt;a href=&quot;#Day-6-Type-Ahead&quot; class=&quot;headerlink&quot; title=&quot;Day 6 - Type Ahead&quot;&gt;&lt;/a&gt;Day 6 - Type Ahead&lt;/h2&gt;&lt;div class=&quot;v</summary>
      
    
    
    
    <category term="javascript" scheme="https://zinirun.github.io/categories/javascript/"/>
    
    
    <category term="javascript" scheme="https://zinirun.github.io/tags/javascript/"/>
    
    <category term="javascript30" scheme="https://zinirun.github.io/tags/javascript30/"/>
    
    <category term="VanillaJS" scheme="https://zinirun.github.io/tags/VanillaJS/"/>
    
  </entry>
  
  <entry>
    <title>Algorithm - 구현 (Implementation)</title>
    <link href="https://zinirun.github.io/2020/08/19/ps-implementation-1/"/>
    <id>https://zinirun.github.io/2020/08/19/ps-implementation-1/</id>
    <published>2020-08-19T06:16:07.000Z</published>
    <updated>2020-08-19T07:25:50.101Z</updated>
    
    <content type="html"><![CDATA[<h2 id="구현-피지컬-싸움"><a href="#구현-피지컬-싸움" class="headerlink" title="구현, 피지컬 싸움"></a>구현, 피지컬 싸움</h2><p>PS에서 <code>구현</code>이란 <code>머리속에 있는 알고리즘을 소스코드로 바꾸는 과정</code>이다. 어떤 문제를 풀건 소스 코드를 작성하는 과정은 필수이므로 결국 <code>구현</code> 문제유형은 모든 PS 유형을 포함하는 개념이다.</p><p>우리는 알고리즘 문제를 보고, 문제 풀이 방법을 고민한다. 고민 후 문제에 대한 풀이 방법이 떠오른다고 정답을 받을 수 있는 것은 아니다. 생각한 문제 풀이 방법을 프로그래밍 언어로 정확히 구현해야 한다.</p><p>결국 <code>구현</code> 유형의 문제는 ‘풀이를 떠올리는 것은 쉽지만 소스 코드로 옮기기기 어려운 문제’를 의미한다. 그런 의미에서 구현 유형의 문제는 코딩 피지컬을 요구하는 문제라고도 할 수 있다.</p><h2 id="상하좌우"><a href="#상하좌우" class="headerlink" title="상하좌우"></a>상하좌우</h2><p><code>N*N</code>의 좌표공간에서 <code>RRRUDD</code>와 같은 방향을 나타내는 문자열이 들어왔을 때 최종 도착 지점의 좌표를 출력하는 문제이다.</p><ul><li>L: 왼쪽, R: 오른쪽, U: 위, D: 아래</li><li><code>N*N</code> 크기의 공간을 벗어나는 움직임은 무시</li></ul><h3 id="풀이"><a href="#풀이" class="headerlink" title="풀이"></a>풀이</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">w=int(input())</span><br><span class="line">x,y=<span class="number">1</span>,<span class="number">1</span></span><br><span class="line">move=input().split()</span><br><span class="line">d=&#123;<span class="string">&#x27;L&#x27;</span>:<span class="number">-1</span>,<span class="string">&#x27;R&#x27;</span>:<span class="number">1</span>,<span class="string">&#x27;U&#x27;</span>:<span class="number">-1</span>,<span class="string">&#x27;D&#x27;</span>:<span class="number">1</span>&#125;</span><br><span class="line"><span class="keyword">for</span> mov <span class="keyword">in</span> move:</span><br><span class="line">    <span class="keyword">if</span> mov <span class="keyword">in</span> [<span class="string">&#x27;U&#x27;</span>, <span class="string">&#x27;D&#x27;</span>]:</span><br><span class="line">        t_x=x+d[mov]</span><br><span class="line">        <span class="keyword">if</span> <span class="number">0</span>&lt;t_x&lt;=w: x=t_x</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        t_y=y+d[mov]</span><br><span class="line">        <span class="keyword">if</span> <span class="number">0</span>&lt;t_y&lt;=w: y=t_y</span><br><span class="line">print(x,y)</span><br></pre></td></tr></table></figure><p>구현 유형 문제의 특징은 문제의 요구사항대로 구현하면 된다는 것이다. 이 때 <code>N*N</code> 크기의 공간을 벗어나는 움직임의 예외 처리를 정확히 해주어야 한다.</p><h2 id="시각"><a href="#시각" class="headerlink" title="시각"></a>시각</h2><p>정수 N이 입력되었을 때 00시 00분 00초부터 N시 59분 59초까지의 모든 시각 중 3이 하나라도 포함되는 모든 경우의 수를 구하는 문제이다.</p><h3 id="풀이-1"><a href="#풀이-1" class="headerlink" title="풀이"></a>풀이</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">count=<span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> h <span class="keyword">in</span> range(int(input())+<span class="number">1</span>):</span><br><span class="line">    <span class="keyword">for</span> m <span class="keyword">in</span> range(<span class="number">60</span>):</span><br><span class="line">        <span class="keyword">for</span> s <span class="keyword">in</span> range(<span class="number">60</span>):</span><br><span class="line">            <span class="keyword">if</span> <span class="string">&#x27;3&#x27;</span> <span class="keyword">in</span> str(h)+str(m)+str(s): count+=<span class="number">1</span></span><br><span class="line">print(count)</span><br></pre></td></tr></table></figure><p>이 문제의 경우 모든 시각의 경우를 하나씩 모두 세서 풀어도 문제가 되지 않는다. <code>N</code>이 <code>23</code>으로 (최대로) 입력되었다고 해도 84300가지밖에 존재하지 않기에 시각을 1씩 증가시키면서 3이 포함되어 있는지 검사해도 무방하다.</p><h2 id="왕실의-나이트"><a href="#왕실의-나이트" class="headerlink" title="왕실의 나이트"></a>왕실의 나이트</h2><p><code>8*8</code> 좌표 평면에서 특정 방향으로만 이동할 수 있는데, 이 때 이동할 수 있는 좌표의 경우의 수를 구하는 문제이다.</p><blockquote><p>이동 방법은 다음과 같다.</p></blockquote><ul><li>수평으로 두 칸 이동 -&gt; 수직으로 한 칸 이동</li><li>수직으로 두 칸 이동 -&gt; 수평으로 한 칸 이동</li></ul><h3 id="풀이-2"><a href="#풀이-2" class="headerlink" title="풀이"></a>풀이</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">cur=input()</span><br><span class="line">mov=[[<span class="number">1</span>,<span class="number">-2</span>],[<span class="number">2</span>,<span class="number">-1</span>],[<span class="number">2</span>,<span class="number">1</span>],[<span class="number">1</span>,<span class="number">2</span>],[<span class="number">-1</span>,<span class="number">2</span>],[<span class="number">-2</span>,<span class="number">1</span>],[<span class="number">-2</span>,<span class="number">1</span>],[<span class="number">-1</span>,<span class="number">-2</span>]]</span><br><span class="line">x_=[<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;e&#x27;</span>,<span class="string">&#x27;f&#x27;</span>,<span class="string">&#x27;g&#x27;</span>,<span class="string">&#x27;h&#x27;</span>]</span><br><span class="line">x=x_.index(cur[<span class="number">0</span>])+<span class="number">1</span></span><br><span class="line">y=int(cur[<span class="number">1</span>])</span><br><span class="line">count=<span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> mov:</span><br><span class="line">    <span class="keyword">if</span> <span class="number">0</span>&lt;x+i[<span class="number">0</span>]&lt;=<span class="number">8</span> <span class="keyword">and</span> <span class="number">0</span>&lt;y+i[<span class="number">1</span>]&lt;=<span class="number">8</span>: count+=<span class="number">1</span></span><br><span class="line">print(count)</span><br></pre></td></tr></table></figure><p>앞서 풀었던 상하좌우 문제와 거의 똑같은 유형의 문제이다. 이동할 수 있는 경우의 수는 8가지임으로 <code>mov</code>에 모든 경우의 수를 집어넣고 좌표 공간에서 벗어나는지만 확인하면 된다.</p><h2 id="게임개발"><a href="#게임개발" class="headerlink" title="게임개발"></a>게임개발</h2><p>특정 조건 하에서 좌표 공간을 이동할 때 방문한 좌표의 수를 구하는 문제이다.</p><blockquote><p>이동 조건은 다음과 같다.</p></blockquote><ul><li>현재 위치에서 현재 방향을 기준으로 왼쪽 방향(반시계 90도 회전)</li><li>왼쪽 방향에 방문하지 않은 칸이 존재하면 -&gt; 왼쪽 방향으로 회전 후 왼쪽으로 한 칸 전진</li><li>왼쪽 방향에 방문하지 않은 칸이 없다면 -&gt; 왼쪽 방향으로 회전 후 처음 단계로 돌아가기</li><li>네 방향 모두 방문했거나 바다로 되어 있다면 바라보는 방향에서 한 칸 뒤로 가고 처음으로 돌아가기 (단, 뒤쪽 방향이 바다라서 뒤로 못가면 멈추기)</li></ul><h3 id="풀이-3"><a href="#풀이-3" class="headerlink" title="풀이"></a>풀이</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">w,h=map(int,input().split())</span><br><span class="line">x,y,d=map(int,input().split())</span><br><span class="line">m=[list(map(int,input().split())) <span class="keyword">for</span> _ <span class="keyword">in</span> range(w)]</span><br><span class="line"></span><br><span class="line">v=[[<span class="number">0</span>]*h <span class="keyword">for</span> _ <span class="keyword">in</span> range(w)]</span><br><span class="line">v[x][y]=<span class="number">1</span></span><br><span class="line"></span><br><span class="line">dx,dy=[<span class="number">-1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>],[<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">-1</span>]</span><br><span class="line"></span><br><span class="line">count=<span class="number">1</span></span><br><span class="line">turn=<span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">turnLeft</span>():</span></span><br><span class="line">    <span class="keyword">global</span> d</span><br><span class="line">    d -= <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> d == <span class="number">-1</span>: d=<span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">    turnLeft()</span><br><span class="line">    nx,ny=x+dx[d],y+dy[d]</span><br><span class="line">    <span class="keyword">if</span> v[nx][ny]==<span class="number">0</span> <span class="keyword">and</span> m[nx][ny]==<span class="number">0</span>:</span><br><span class="line">        v[nx][ny]=<span class="number">1</span></span><br><span class="line">        x,y=nx,ny</span><br><span class="line">        count+=<span class="number">1</span></span><br><span class="line">        turn=<span class="number">0</span></span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    <span class="keyword">else</span>: turn+=<span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> turn==<span class="number">4</span>:</span><br><span class="line">        nx,ny=x-dx[d],y-dy[d]</span><br><span class="line">        <span class="keyword">if</span> m[nx][ny]==<span class="number">0</span>:x,y=nx,ny</span><br><span class="line">        <span class="keyword">else</span>: <span class="keyword">break</span></span><br><span class="line">        turn=<span class="number">0</span></span><br><span class="line"></span><br><span class="line">print(count)</span><br></pre></td></tr></table></figure><p>문제가 길지만 사실상 문제에 나온 요구사항을 그대로 코드에 옮기기만 하면 되는 문제이다. 방문 체크를 위한 배열 <code>v</code>, <code>d</code>를 바탕으로 움직이는 방향을 <code>dx</code>, <code>dy</code>로 변수화하고, 움직인 횟수 <code>count</code>, 방향을 돌리고 모든 방향을 돌았을 때 예외처리 하기위해 <code>turn</code>을 선언한다.</p><h3 id="방향-관련-구현-유형의-문제"><a href="#방향-관련-구현-유형의-문제" class="headerlink" title="방향 관련 구현 유형의 문제"></a>방향 관련 구현 유형의 문제</h3><p>위와 같이 상하좌우로 움직이는 좌표 공간에서 “방향”을 설정해서 이동하는 문제는 <code>dx</code>, <code>dy</code>라는 별도의 리스트를 만들어 방향을 정하는 것이 효과적이다. 위 예제에서 캐릭터를 움직일 때 동, 서, 남, 북 방향을 <code>dx</code>, <code>dy</code>로 별도로 리스트화해서 생각하면 <code>if d==1: ~</code> 등의 불필요한 구현을 없앨 수 있다.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;구현-피지컬-싸움&quot;&gt;&lt;a href=&quot;#구현-피지컬-싸움&quot; class=&quot;headerlink&quot; title=&quot;구현, 피지컬 싸움&quot;&gt;&lt;/a&gt;구현, 피지컬 싸움&lt;/h2&gt;&lt;p&gt;PS에서 &lt;code&gt;구현&lt;/code&gt;이란 &lt;code&gt;머리속에 있는 알고리</summary>
      
    
    
    
    <category term="algorithm" scheme="https://zinirun.github.io/categories/algorithm/"/>
    
    
    <category term="algorithm" scheme="https://zinirun.github.io/tags/algorithm/"/>
    
    <category term="ps" scheme="https://zinirun.github.io/tags/ps/"/>
    
  </entry>
  
  <entry>
    <title>ReactJS - 자식 프로퍼티(Child Property)</title>
    <link href="https://zinirun.github.io/2020/08/19/react-child-property/"/>
    <id>https://zinirun.github.io/2020/08/19/react-child-property/</id>
    <published>2020-08-18T15:52:35.000Z</published>
    <updated>2020-08-19T15:15:32.051Z</updated>
    
    <content type="html"><![CDATA[<h2 id="자식-프로퍼티"><a href="#자식-프로퍼티" class="headerlink" title="자식 프로퍼티"></a>자식 프로퍼티</h2><p><code>JSX</code>도 마크업 표현식을 사용할 수 있다. <code>JSX</code>에서는 컴포넌트 하위에 배치한 노드 <em>(또는 컴포넌트)</em> 를 하위 컴포넌트에서 프로퍼티로 접근할 수 있게 한다.</p><h3 id="App-jsx"><a href="#App-jsx" class="headerlink" title="App.jsx"></a>App.jsx</h3><p>우선 App 컴포넌트 <code>App.jsx</code>에 포함시킨 <code>ChildProperty</code> 컴포넌트 하위에 자식 노드를 배치한 경우이다.</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> ChildProperty <span class="keyword">from</span> <span class="string">&#x27;./03/ChildProperty&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div className=<span class="string">&quot;body&quot;</span>&gt;</span><br><span class="line">          &lt;ChildProperty&gt;</span><br><span class="line">            &lt;div&gt;<span class="xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>자식 노드<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span>&lt;/div&gt;</span><br><span class="line">          &lt;/ChildProperty&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure><h3 id="ChildProperty-jsx"><a href="#ChildProperty-jsx" class="headerlink" title="ChildProperty.jsx"></a>ChildProperty.jsx</h3><p>이제 <code>ChildProperty</code> 컴포넌트에서는 <code>&#123;this.props.children&#125;</code>과 같은 방법으로 <code>&lt;div&gt;&lt;span&gt;자식 노드&lt;/span&gt;&lt;/div&gt;</code>를 쉽게 받을 수 있다.</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">&#x27;prop-types&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ChildProperty</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;this.props.children&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ChildProperty.propTypes = &#123;</span><br><span class="line">  children: PropTypes.node,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> ChildProperty;</span><br></pre></td></tr></table></figure><p>결과를 확인하면 <code>&#123;this.props.children&#125;</code> 위치에 <code>&lt;div&gt;&lt;span&gt;자식 노드&lt;/span&gt;&lt;/div&gt;</code>가 출력될 것이다.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;ChildProperty children&#x3D;&#123;&lt;div&gt;&lt;span&gt;자식노드&lt;&#x2F;span&gt;&lt;&#x2F;div&gt;&#125; &#x2F;&gt;</span><br></pre></td></tr></table></figure><p>이는 위와 같이 별도의 프로퍼티로 자식 노드를 전달하는 것과 같다.</p><p>하지만 자식 프로퍼티를 사용하는 방법이 간편하기에, 노드 전달 시에는 자식 프로퍼티를 사용하자.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;자식-프로퍼티&quot;&gt;&lt;a href=&quot;#자식-프로퍼티&quot; class=&quot;headerlink&quot; title=&quot;자식 프로퍼티&quot;&gt;&lt;/a&gt;자식 프로퍼티&lt;/h2&gt;&lt;p&gt;&lt;code&gt;JSX&lt;/code&gt;도 마크업 표현식을 사용할 수 있다. &lt;code&gt;JSX&lt;/co</summary>
      
    
    
    
    <category term="ReactJS" scheme="https://zinirun.github.io/categories/ReactJS/"/>
    
    
    <category term="javascript" scheme="https://zinirun.github.io/tags/javascript/"/>
    
    <category term="react" scheme="https://zinirun.github.io/tags/react/"/>
    
  </entry>
  
  <entry>
    <title>Javascript 30 - Day 5 Flex Panel Gallery</title>
    <link href="https://zinirun.github.io/2020/08/18/js-course30-5/"/>
    <id>https://zinirun.github.io/2020/08/18/js-course30-5/</id>
    <published>2020-08-18T13:14:09.000Z</published>
    <updated>2020-08-18T13:43:41.825Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Day-5-Flex-Panel-Gallery"><a href="#Day-5-Flex-Panel-Gallery" class="headerlink" title="Day 5 - Flex Panel Gallery"></a>Day 5 - Flex Panel Gallery</h2><div class="video-container"><iframe src="https://www.youtube.com/embed/9eif30i26jg" frameborder="0" loading="lazy" allowfullscreen></iframe></div><h3 id="CSS-Part"><a href="#CSS-Part" class="headerlink" title="CSS Part"></a>CSS Part</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.panels</span> &#123;</span><br><span class="line">        <span class="attribute">min-height</span>: <span class="number">100vh</span>;</span><br><span class="line">        <span class="attribute">overflow</span>: hidden;</span><br><span class="line">        <span class="attribute">display</span>: flex;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.panel</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#6b0f9c</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: inset <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.1</span>);</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="comment">/* Safari transitionend event.propertyName === flex */</span></span><br><span class="line">    <span class="comment">/* Chrome + FF transitionend event.propertyName === flex-grow */</span></span><br><span class="line">    <span class="attribute">transition</span>: font-size <span class="number">0.7s</span> <span class="built_in">cubic-bezier</span>(<span class="number">0.61</span>, -<span class="number">0.19</span>, <span class="number">0.7</span>, -<span class="number">0.11</span>),</span><br><span class="line">      flex <span class="number">0.7s</span> <span class="built_in">cubic-bezier</span>(<span class="number">0.61</span>, -<span class="number">0.19</span>, <span class="number">0.7</span>, -<span class="number">0.11</span>), background <span class="number">0.2s</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">background-size</span>: cover;</span><br><span class="line">    <span class="attribute">background-position</span>: center;</span><br><span class="line">    <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Flex Children */</span></span><br><span class="line"><span class="selector-class">.panel</span> &gt; * &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">transition</span>: transform <span class="number">0.5s</span>;</span><br><span class="line">    <span class="attribute">flex</span>: <span class="number">1</span> <span class="number">0</span> auto;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>Flex Display</code>에 대한 이해가 필요한 예제였다. <code>Flex</code>나 <code>Grid</code>에 완전히 익숙하지가 않아 차근차근 이해하려 노력했다.</p><h3 id="Flex"><a href="#Flex" class="headerlink" title="Flex"></a>Flex</h3><p><code>Flex</code>와 관련된 CSS 속성들이 정말 많다. 간단하게 이번 에제에서 사용된 것만 정리해보면,</p><p><code>flex: 1</code> : flex 적용을 받는 요소들의 너비를 1로 통일 (1이든 100이든 상관없음)<br><code>justify-content: center</code>, <code>align-items: center</code> : 요소 중앙 정렬<br><code>flex-direction: column</code> : flex 적용을 받는 요소 안에 내용물의 방향(기본: <code>row</code>)</p><p><strong>Flex Layout은 <a href="https://studiomeal.com/archives/197">이 곳</a>에 정리가 잘 되어 있다</strong></p><h3 id="cubic-bezier"><a href="#cubic-bezier" class="headerlink" title="cubic-bezier"></a>cubic-bezier</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">transition</span>: <span class="selector-tag">font-size</span> 0<span class="selector-class">.7s</span> <span class="selector-tag">cubic-bezier</span>(0<span class="selector-class">.61</span>, <span class="selector-tag">-0</span><span class="selector-class">.19</span>, 0<span class="selector-class">.7</span>, <span class="selector-tag">-0</span><span class="selector-class">.11</span>),</span><br><span class="line">          <span class="selector-tag">flex</span> 0<span class="selector-class">.7s</span> <span class="selector-tag">cubic-bezier</span>(0<span class="selector-class">.61</span>, <span class="selector-tag">-0</span><span class="selector-class">.19</span>, 0<span class="selector-class">.7</span>, <span class="selector-tag">-0</span><span class="selector-class">.11</span>), <span class="selector-tag">background</span> 0<span class="selector-class">.2s</span>;</span><br></pre></td></tr></table></figure><p><code>.panel</code>에 선언된 css 속성이다. <code>cubic-bezier()</code> function은 <code>transition</code> 속성 또는 <code>transition-timing-function</code> 속성에서 전환 시작과 끝까지의 효과를 제어한다.</p><p><img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=http://cfile9.uf.tistory.com/image/99DBDB4F5B0CD3E418BCA9" alt="베지어곡선"></p><p>이 <code>베지어 곡선</code>을 정의하는 것이라고 이해하면 된다.</p><p>위의 예에서 <code>transition</code>이 일어날 때 <code>font-size</code>, <code>flex</code>에 대해 <code>cubic-bezier</code>를 정의했는데, <code>()</code>에 들어가는 4개의 숫자가 곡선의 <code>curve</code>를 나타낸다.</p><h3 id="event-처리를-위한-css-class-설정"><a href="#event-처리를-위한-css-class-설정" class="headerlink" title="event 처리를 위한 css class 설정"></a>event 처리를 위한 css class 설정</h3><p>이제 <code>Javascript</code>에서 각 <code>panel</code>에 이벤트를 걸어 <code>css</code> 속성을 바꿔주는데, 이 때 <code>classList.toggle</code>을 통해 css를 제어할 것이다.</p><p>우선 <code>.panel</code>의 첫 번째와 마지막 글자를 위한 <code>transform</code> 속성을 정의한다.</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.panel</span> &gt; *<span class="selector-pseudo">:first-child</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">100%</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.panel</span><span class="selector-class">.open-active</span> &gt; *<span class="selector-pseudo">:first-child</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.panel</span> &gt; *<span class="selector-pseudo">:last-child</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">100%</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.panel</span><span class="selector-class">.open-active</span> &gt; *<span class="selector-pseudo">:last-child</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>이제 <code>.panel</code>의 flex layout을 변경하기 위해 <code>flex</code> 속성을 정의한다.</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.panel</span><span class="selector-class">.open</span> &#123;</span><br><span class="line">    <span class="attribute">flex</span>: <span class="number">5</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>모든 요소가 <code>flex: 1</code>인 상태에서 <code>.open</code> class를 부여받은 <code>panel</code>만 5배의 비율로 늘어난다.</p><h2 id="Javascript-Part"><a href="#Javascript-Part" class="headerlink" title="Javascript Part"></a>Javascript Part</h2><p>이제 <code>.panel</code>에 event를 걸어준다.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> panels = <span class="built_in">document</span>.querySelectorAll(<span class="string">&quot;.panel&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toggleOpen</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">  <span class="built_in">this</span>.classList.toggle(<span class="string">&quot;open&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toggleActive</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (e.propertyName.includes(<span class="string">&quot;flex&quot;</span>)) &#123;</span><br><span class="line">    <span class="built_in">this</span>.classList.toggle(<span class="string">&quot;open-active&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">panels.forEach(<span class="function">(<span class="params">panel</span>) =&gt;</span> panel.addEventListener(<span class="string">&quot;click&quot;</span>, toggleOpen));</span><br><span class="line">panels.forEach(<span class="function">(<span class="params">panel</span>) =&gt;</span></span><br><span class="line">  panel.addEventListener(<span class="string">&quot;transitionend&quot;</span>, toggleActive)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p><code>toggle</code> 속성이 꽤 자주 사용된다. <code>class</code>를 부여하는데, 있으면 놔두고 없으면 추가한다.</p><h2 id="응용"><a href="#응용" class="headerlink" title="응용"></a>응용</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> panels = <span class="built_in">document</span>.querySelectorAll(<span class="string">&quot;.panel&quot;</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toggleOpen</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  panels.forEach(<span class="function">(<span class="params">panel</span>) =&gt;</span> panel.classList.remove(<span class="string">&quot;open&quot;</span>));</span><br><span class="line">  <span class="built_in">this</span>.classList.toggle(<span class="string">&quot;open&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toggleActive</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (e.propertyName.includes(<span class="string">&quot;flex&quot;</span>)) &#123;</span><br><span class="line">    <span class="built_in">this</span>.classList.toggle(<span class="string">&quot;open-active&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">panels.forEach(<span class="function">(<span class="params">panel</span>) =&gt;</span> panel.addEventListener(<span class="string">&quot;click&quot;</span>, toggleOpen));</span><br><span class="line">panels.forEach(<span class="function">(<span class="params">panel</span>) =&gt;</span></span><br><span class="line">  panel.addEventListener(<span class="string">&quot;transitionend&quot;</span>, toggleActive)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>한 이미지를 선택할 때 나머지 이미지의 layout을 원래대로 돌려놓게 응용했다.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">panels.forEach(<span class="function">(<span class="params">panel</span>) =&gt;</span> panel.classList.remove(<span class="string">&quot;open&quot;</span>));</span><br></pre></td></tr></table></figure><p><code>toggleOpen()</code> 함수가 실행될 때 모든 <code>panel</code>의 <code>open</code> class를 삭제한 후 이벤트가 발생한 <code>panel</code>에만 <code>open</code> class를 부여했다.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Day-5-Flex-Panel-Gallery&quot;&gt;&lt;a href=&quot;#Day-5-Flex-Panel-Gallery&quot; class=&quot;headerlink&quot; title=&quot;Day 5 - Flex Panel Gallery&quot;&gt;&lt;/a&gt;Day 5 - Flex</summary>
      
    
    
    
    <category term="javascript" scheme="https://zinirun.github.io/categories/javascript/"/>
    
    
    <category term="javascript" scheme="https://zinirun.github.io/tags/javascript/"/>
    
    <category term="javascript30" scheme="https://zinirun.github.io/tags/javascript30/"/>
    
    <category term="VanillaJS" scheme="https://zinirun.github.io/tags/VanillaJS/"/>
    
  </entry>
  
  <entry>
    <title>Algorithm - Greedy (그리디, 탐욕법)</title>
    <link href="https://zinirun.github.io/2020/08/18/ps-greedy-1/"/>
    <id>https://zinirun.github.io/2020/08/18/ps-greedy-1/</id>
    <published>2020-08-18T08:13:47.000Z</published>
    <updated>2020-08-18T11:15:36.706Z</updated>
    
    <content type="html"><![CDATA[<h2 id="그리디-당장-좋은-것"><a href="#그리디-당장-좋은-것" class="headerlink" title="그리디, 당장 좋은 것"></a>그리디, 당장 좋은 것</h2><p><strong>그리디(Greedy)</strong> 알고리즘은 단순하지만 강력한 PS 알고리즘이다. <code>탐욕법</code>이라고도 부르는 이 알고리즘은 이름에서 알 수 있듯이 어떠한 문제를 단순 무식하게, 탐욕적으로 해결한다. 매 순간 가장 좋아보이는 것을 선택하며, <strong>현재의 선택이 나중에 미칠 영향에 대해서는 고려하지 않는다.</strong></p><p>기준에 따라 좋은 것을 선택하는 알고리즘이므로 문제에서 <code>가장 큰(작은) 순서대로</code>와 같은 힌트를 알게 모르게 제시해준다. 보통 이 기준은 <code>정렬 알고리즘</code>과 자주 사용된다.</p><h2 id="거스름돈"><a href="#거스름돈" class="headerlink" title="거스름돈"></a>거스름돈</h2><p>500원, 100원, 50원, 10원짜리 동전이 있을 때 손님에게 거슬러 줘야할 동전의 <strong>최소 개수</strong>를 구하는 문제이다. (단, 거슬러 줘야할 돈 N은 항상 10의 배수이다.)</p><h3 id="풀이"><a href="#풀이" class="headerlink" title="풀이"></a>풀이</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">money = int(input())</span><br><span class="line">cash=[<span class="number">500</span>, <span class="number">100</span>, <span class="number">50</span>, <span class="number">10</span>]</span><br><span class="line">count=<span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> coin <span class="keyword">in</span> cash:</span><br><span class="line">    count += money // coin</span><br><span class="line">    money %= coin</span><br><span class="line">print(count)</span><br></pre></td></tr></table></figure><p>앞서 설명했듯이 문제에 동전의 “최소 개수”를 구하라고 명시되어 있다. 또한 그리디로 해결할 수 있는 이유는 큰 단위가 항상 작은 단위의 배수임으로 작은 단위의 동전들을 종합해 다른 해가 나올 수 없기 때문이다. 시간복잡도는 화폐의 종류가 K개라고 할 때 <code>O(K)</code>가 된다.</p><h2 id="큰-수의-법칙"><a href="#큰-수의-법칙" class="headerlink" title="큰 수의 법칙"></a>큰 수의 법칙</h2><p>다양한 수로 이뤄진 배열이 있을 때 주어진 수들을 M번 더하여 가장 큰 수를 만든다. 단, 배열의 특정한 인덱스(번호)에 해당하는 수가 연속해서 K번을 초과하여 더해질 수 없다.</p><p>예) <code>[2,4,5,4,6]</code>, <code>M=8</code>, <code>K=3</code>일 때 <code>6+6+6+5+6+6+6+5=46</code></p><h3 id="첫번째-풀이"><a href="#첫번째-풀이" class="headerlink" title="첫번째 풀이"></a>첫번째 풀이</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">n,m,k=map(int,input().split())</span><br><span class="line">numbers=list(map(int,input().split()))</span><br><span class="line">numbers.sort()</span><br><span class="line"></span><br><span class="line">result=<span class="number">0</span></span><br><span class="line"></span><br><span class="line">n_1=numbers[<span class="number">-1</span>]</span><br><span class="line">n_2=numbers[<span class="number">-2</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(k):</span><br><span class="line">        <span class="keyword">if</span> m==<span class="number">0</span>: <span class="keyword">break</span></span><br><span class="line">        result+=n_1</span><br><span class="line">        m-=<span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> m==<span class="number">0</span>: <span class="keyword">break</span></span><br><span class="line">    result+=n_2</span><br><span class="line">    m-=<span class="number">1</span></span><br><span class="line"></span><br><span class="line">print(result)</span><br></pre></td></tr></table></figure><p>결국 필요한 수는 가장 큰 수와 두번째로 큰 수이다. 가장 큰 수를 반복하다가, 같은 수가 K번이 넘을 때 두번째로 큰 수를 끼워주면 되기 때문이다.</p><p>하지만 위와 같은 방식은 수가 커질수록 비효율적이게 된다.</p><p><strong>반복되는 수열</strong>에 대해서 파악해야 한다.</p><h3 id="두번째-풀이"><a href="#두번째-풀이" class="headerlink" title="두번째 풀이"></a>두번째 풀이</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">n,m,k=map(int,input().split())</span><br><span class="line">numbers=list(map(int,input().split()))</span><br><span class="line">numbers.sort()</span><br><span class="line"></span><br><span class="line">n_1=numbers[<span class="number">-1</span>]</span><br><span class="line">n_2=numbers[<span class="number">-2</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">#나누어 떨어지는 경우, 나누어 떨어지지 않는 경우 (나누어 떨어지지 않는 경우는 무조건 가장 큰 수를 더하는 경우임)</span></span><br><span class="line">count=int(m/(k+<span class="number">1</span>))*k + m%(k+<span class="number">1</span>)</span><br><span class="line">result=count*n_1 + (m-count)*n_2</span><br><span class="line">print(result)</span><br></pre></td></tr></table></figure><p>전체적으로 가장 큰 수가 필요한 경우, 두번째로 큰 수가 필요한 경우(결국 전체 개수 M에서 가장 큰 수를 쓴 횟수를 뺀 값이 된다)를 구하면 끝나는 문제이다.</p><h2 id="숫자-카드-게임"><a href="#숫자-카드-게임" class="headerlink" title="숫자 카드 게임"></a>숫자 카드 게임</h2><p>여러 개(N*M)의 숫자 카드 중에서 가장 높은 숫자가 쓰인 카드 한장을 뽑는다. 단, 선택된 행의 가장 낮은 숫자 카드를 뽑는다.</p><h3 id="풀이-1"><a href="#풀이-1" class="headerlink" title="풀이"></a>풀이</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">N,M=map(int,input().split())</span><br><span class="line">num=[]</span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> range(N):</span><br><span class="line">    num.append(min(map(int,input().split())))</span><br><span class="line">print(max(num))</span><br></pre></td></tr></table></figure><p>간단하다. 입력받음과 동시에 가장 작은 수를 <code>num</code>배열에 넣고 마지막에 최대값을 출력해주면 된다.</p><h2 id="1이-될-때까지"><a href="#1이-될-때까지" class="headerlink" title="1이 될 때까지"></a>1이 될 때까지</h2><p>어떤 수 N이 1이 될 때까지 나누거나 뺀다. 방법은 두가지이다.</p><ul><li>N에서 1을 뺀다</li><li>N을 K로 나눈다 (단, N이 K로 나누어 떨어질때만)</li></ul><h3 id="첫번째-풀이-1"><a href="#첫번째-풀이-1" class="headerlink" title="첫번째 풀이"></a>첫번째 풀이</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">n,k=map(int,input().split())</span><br><span class="line">count=<span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">    <span class="keyword">if</span> n==<span class="number">1</span>: <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">if</span> n%k==<span class="number">0</span>:</span><br><span class="line">        count+=<span class="number">1</span></span><br><span class="line">        n=n//k</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        count+=<span class="number">1</span></span><br><span class="line">        n-=<span class="number">1</span></span><br><span class="line">print(count)</span><br></pre></td></tr></table></figure><p>최대한 많이 나누면 된다. 1을 빼는 것보다 나눌 때 숫자가 훨씬 빨리 작아지기 때문이다. N이 K의 배수가 되도록 한번에 뺀다면 좀 더 효율적으로 짤 수 있다.</p><h3 id="두번째-풀이-1"><a href="#두번째-풀이-1" class="headerlink" title="두번째 풀이"></a>두번째 풀이</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">n,k=map(int,input().split())</span><br><span class="line">count=<span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">    target=(n//k)*k <span class="comment"># N이 K의 배수가 되도록 만들기</span></span><br><span class="line">    count+=(n-target) <span class="comment"># n-target: 1을 몇번 뺐는지</span></span><br><span class="line">    n=target <span class="comment"># 결국 n은 k의 배수</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> n&lt;k: <span class="keyword">break</span> <span class="comment"># 더 이상 나눌 수 없을 때</span></span><br><span class="line">    <span class="comment"># n을 k로 나누기</span></span><br><span class="line">    count+=<span class="number">1</span></span><br><span class="line">    n//=k</span><br><span class="line"></span><br><span class="line">count+=(n<span class="number">-1</span>)</span><br><span class="line">print(count)</span><br></pre></td></tr></table></figure><p>N을 K의 배수가 되도록 만들고 나머지 경우를 빼주면 된다.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;그리디-당장-좋은-것&quot;&gt;&lt;a href=&quot;#그리디-당장-좋은-것&quot; class=&quot;headerlink&quot; title=&quot;그리디, 당장 좋은 것&quot;&gt;&lt;/a&gt;그리디, 당장 좋은 것&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;그리디(Greedy)&lt;/strong&gt; 알고리</summary>
      
    
    
    
    <category term="algorithm" scheme="https://zinirun.github.io/categories/algorithm/"/>
    
    
    <category term="algorithm" scheme="https://zinirun.github.io/tags/algorithm/"/>
    
    <category term="ps" scheme="https://zinirun.github.io/tags/ps/"/>
    
  </entry>
  
  <entry>
    <title>Javascript - 디바운싱, 쓰로틀링</title>
    <link href="https://zinirun.github.io/2020/08/16/js-throttling-debouncing/"/>
    <id>https://zinirun.github.io/2020/08/16/js-throttling-debouncing/</id>
    <published>2020-08-16T12:46:09.000Z</published>
    <updated>2020-08-16T13:12:44.911Z</updated>
    
    <content type="html"><![CDATA[<p>JS ES6 문법은 아니지만, <strong>지연 처리</strong>를 효율적으로 구현할 수 있다. 디바운싱, 쓰로틀링 모두 서버의 데이터를 요청하는 등의 작업에서 생기는 부하를 크게 줄여준다.</p><h2 id="디바운싱-debouncing"><a href="#디바운싱-debouncing" class="headerlink" title="디바운싱(debouncing)"></a>디바운싱(debouncing)</h2><p><strong>디바운싱</strong>의 정의는 연이어 호출되는 함수들 중에서 마지막 함수 or 맨 처음 함수만 호출하도록 하는 것이다. 간단하게 연관 검색어 창을 떠올려보자.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;search&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.querySelector(<span class="string">&#x27;#search&#x27;</span>).addEventListener(<span class="string">&#x27;input&#x27;</span>, <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">&#x27;서버 ajax 검색 요청&#x27;</span>, e.target.value);</span></span><br><span class="line">    &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>만약 이 코드대로 검색 시스템을 만들었다면, 사용자가 <code>자바</code>를 검색하면 <code>ㅈ</code>,<code>자</code>,<code>잡</code>,<code>자바</code> 4개의 ajax 요청이 들어가게 된다. 쿼리 하나하나가 비용이 들기 때문에 100명의 사용자가 평균 20번의 input event가 발생한다고 치면 2000번의 비용이 발생한다는 것이다.</p><p>대부분의 사람들은 타자를 연달아서 친다. 따라서 입력이 다 끝난 후에 요청을 보내면 된다. 이 때 타자를 칠 때마다 타이머를 설정하는데, <code>100ms</code>동안 입력이 없으면 입력이 끝난 것으로 치고, <code>100ms</code>동안 입력이 발생하면 타이머를 새로 설정한다.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> timer;</span><br><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">&#x27;#search&#x27;</span>).addEventListener(<span class="string">&#x27;input&#x27;</span>, <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(timer) <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">    timer = <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;서버 ajax 검색 요청&#x27;</span>, e.target.value);</span><br><span class="line">    &#125;, <span class="number">100</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>이제 맨 처음 들었던 예시처럼 모든 input event 경우에 대해 ajax 요청이 들어가지 않는다. <code>100ms</code>동안 <code>자바</code>를 모두 입력했다면 <code>자바</code>라는 요청 한 번만 들어가게 된다. 이렇게 디바운싱은 서버 부하를 현저히 줄일 수 있다는 장점이 있다.</p><h2 id="쓰로틀링-throttling"><a href="#쓰로틀링-throttling" class="headerlink" title="쓰로틀링(throttling)"></a>쓰로틀링(throttling)</h2><p><strong>쓰로틀링</strong>은 디바운싱 개념과 비슷하지만 <code>입력하는 동안에도 바로 이전에 요청한 작업을 주기적으로 실행하는 점</code>이 다르다. 이해가 어렵다면, 페이스북 스크롤을 생각해보자. 일명 이 무한 스크롤 기능이 디바운싱으로 구현되어 있다면 스크롤리 멈추지 않는 한 다음 타임라인은 로딩되지 않을 것이다.</p><p>위에서 예로 들었던 검색 기능을 쓰로틀링으로 다시 작성해보자.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> timer</span><br><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">&#x27;#search&#x27;</span>).addEventListener(<span class="string">&#x27;input&#x27;</span>, <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(!timer)&#123;</span><br><span class="line">        timer = <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            timer = <span class="literal">null</span>;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;서버 ajax 검색 요청&#x27;</span>, e.target.value);</span><br><span class="line">        &#125;, <span class="number">100</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>디바운싱과 달리 쓰로틀링으로 짠 이 코드는 검색 요청을 <code>100ms</code>마다 보낸다. 타이머가 설정되어 있으면 아무 동작도 하지 않다가, 타이머가 없다면 타이머를 설정한다. 타이머는 일정 시간 후에 스스로를 해제하고, 검색 요청을 보낸다.</p><p>참조 <a href="https://www.zerocho.com/category/JavaScript/post/59a8e9cb15ac0000182794fa">ZeroCho</a>님</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;JS ES6 문법은 아니지만, &lt;strong&gt;지연 처리&lt;/strong&gt;를 효율적으로 구현할 수 있다. 디바운싱, 쓰로틀링 모두 서버의 데이터를 요청하는 등의 작업에서 생기는 부하를 크게 줄여준다.&lt;/p&gt;
&lt;h2 id=&quot;디바운싱-debouncing</summary>
      
    
    
    
    <category term="javascript" scheme="https://zinirun.github.io/categories/javascript/"/>
    
    
    <category term="javascript" scheme="https://zinirun.github.io/tags/javascript/"/>
    
    <category term="VanillaJS" scheme="https://zinirun.github.io/tags/VanillaJS/"/>
    
  </entry>
  
  <entry>
    <title>Javascript 30 - Day 4 Array Cardio Day 1</title>
    <link href="https://zinirun.github.io/2020/08/16/js-course30-4/"/>
    <id>https://zinirun.github.io/2020/08/16/js-course30-4/</id>
    <published>2020-08-16T07:14:25.000Z</published>
    <updated>2020-08-16T07:35:54.884Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Day-4-Array-Cardio-Day-1"><a href="#Day-4-Array-Cardio-Day-1" class="headerlink" title="Day 4 - Array Cardio Day 1"></a>Day 4 - Array Cardio Day 1</h2><div class="video-container"><iframe src="https://www.youtube.com/embed/HB1ZC7czKRs" frameborder="0" loading="lazy" allowfullscreen></iframe></div><h3 id="완성-코드-script-part"><a href="#완성-코드-script-part" class="headerlink" title="완성 코드 - script part"></a>완성 코드 - <code>script</code> part</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Array.prototype.filter()</span></span><br><span class="line"><span class="comment">// 1. Filter the list of inventors for those who were born in the 1500&#x27;s</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fifteen = inventors.filter(</span><br><span class="line">  (inventor) =&gt; inventor.year &gt;= <span class="number">1500</span> &amp;&amp; inventor.year &lt; <span class="number">1600</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.table(fifteen);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Array.prototype.map()</span></span><br><span class="line"><span class="comment">// 2. Give us an array of the inventors first and last names</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fullNames = inventors.map(</span><br><span class="line">  (inventor) =&gt; <span class="string">`<span class="subst">$&#123;inventor.first&#125;</span> <span class="subst">$&#123;inventor.last&#125;</span>`</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(fullNames);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Array.prototype.sort()</span></span><br><span class="line"><span class="comment">// 3. Sort the inventors by birthdate, oldest to youngest</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ordered = inventors.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> (a.year &gt; b.year ? <span class="number">1</span> : <span class="number">-1</span>));</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.table(ordered);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Array.prototype.reduce()</span></span><br><span class="line"><span class="comment">// 4. How many years did all the inventors live all together?</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> totalYears = inventors.reduce(<span class="function">(<span class="params">total, inventor</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> total + (inventor.passed - inventor.year);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(totalYears);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5. Sort the inventors by years lived</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> oldest = inventors.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span></span><br><span class="line">  a.passed - a.year &gt; b.passed - b.year ? <span class="number">-1</span> : <span class="number">1</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.table(oldest);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 6. create a list of Boulevards in Paris that contain &#x27;de&#x27; anywhere in the name</span></span><br><span class="line"><span class="comment">// https://en.wikipedia.org/wiki/Category:Boulevards_in_Paris</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// const category = document.querySelector(&quot;.mw-category&quot;);</span></span><br><span class="line"><span class="comment">// const links = Array.from(category.querySelectorAll(&quot;a&quot;));</span></span><br><span class="line"><span class="comment">// const de = links</span></span><br><span class="line"><span class="comment">//   .map((link) =&gt; link.textContent)</span></span><br><span class="line"><span class="comment">//   .filter((streetName) =&gt; streetName.includes(&quot;de&quot;));</span></span><br><span class="line"><span class="comment">// console.log(de);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 7. sort Exercise</span></span><br><span class="line"><span class="comment">// Sort the people alphabetically by last name</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> alpha = people.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [aLast, aFirst] = a.split(<span class="string">&quot;, &quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> [bLast, bFirst] = b.split(<span class="string">&quot;, &quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> aLast &gt; bLast ? <span class="number">1</span> : <span class="number">-1</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 8. Reduce Exercise</span></span><br><span class="line"><span class="comment">// Sum up the instances of each of these</span></span><br><span class="line"><span class="keyword">const</span> data = [<span class="string">&#x27;car&#x27;</span>, <span class="string">&#x27;car&#x27;</span>, <span class="string">&#x27;truck&#x27;</span>, <span class="string">&#x27;truck&#x27;</span>, <span class="string">&#x27;bike&#x27;</span>, <span class="string">&#x27;walk&#x27;</span>, <span class="string">&#x27;car&#x27;</span>, <span class="string">&#x27;van&#x27;</span>, <span class="string">&#x27;bike&#x27;</span>, <span class="string">&#x27;walk&#x27;</span>, <span class="string">&#x27;car&#x27;</span>, <span class="string">&#x27;van&#x27;</span>, <span class="string">&#x27;car&#x27;</span>, <span class="string">&#x27;truck&#x27;</span>, <span class="string">&#x27;pogostick&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> transportation = data.reduce(<span class="function">(<span class="params">obj, item</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (!obj[item]) obj[item] = <span class="number">0</span>;</span><br><span class="line">  obj[item]++;</span><br><span class="line">  <span class="keyword">return</span> obj;</span><br><span class="line">&#125;, &#123;&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(transportation);</span><br></pre></td></tr></table></figure><h2 id="Map-Reduce-Filter-Sort-in-JS"><a href="#Map-Reduce-Filter-Sort-in-JS" class="headerlink" title="Map, Reduce, Filter, Sort in JS"></a>Map, Reduce, Filter, Sort in JS</h2><p>이번 Day 4의 과제는 명과제였다. 역시 기본이 제일 중요하고, 기본에 가장 충실해야 한다. 의미없는 <code>for loop</code>를 사용해서 가독성을 떨어뜨리지 않고, <code>Map</code>, <code>Reduce</code>, <code>Filter</code>, <code>Sort</code> 사용으로 효율적인 데이터 연산을 할 수 있다.</p><h3 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h3><p>Map Method의 기본 형식이다.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">배열.map(<span class="function">(<span class="params">요소, 인덱스,배열</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> 요소</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>기본 원리는 간단하다. 반복문을 돌며 배열 안의 요소들은 <code>1:1</code>로 짝지어 준다. 그래서 <em>매핑한다</em> 고 표현한다.</p><p>이번 과제에서 Map을 사용한 방법이다.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fullNames = inventors.map(</span><br><span class="line">        (inventor) =&gt; <span class="string">`<span class="subst">$&#123;inventor.first&#125;</span> <span class="subst">$&#123;inventor.last&#125;</span>`</span></span><br><span class="line">      );</span><br></pre></td></tr></table></figure><p><code>inventors</code> 객체에 <code>map</code> 연산으로 요소 <code>inventor</code>의 <code>first</code>, <code>last</code> 데이터를 합쳐서 return한다. <code>Arrow Function</code>의 인자로 <code>inventor</code>가 들어갔는데 <code>i</code>로 해도 되고 아무렇게나 해도 상관없다. (하지만 <em>클린 코드</em> 를 지향하자)</p><h3 id="Reduce"><a href="#Reduce" class="headerlink" title="Reduce"></a>Reduce</h3><p>Reduce Method의 기본적인 형식이다.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">배열.reduce(<span class="function">(<span class="params">누적값, 현재값, 인덱스, 요소</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> 결과</span><br><span class="line">&#125;, 초기값);</span><br></pre></td></tr></table></figure><p>누적값으로 연산하기에 흔히 덧셈으로 예시를 들곤 하지만, 덧셈 함수는 아니다.</p><p>이번 과제에서 Reduce를 사용한 방법이다.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> totalYears = inventors.reduce(<span class="function">(<span class="params">total, inventor</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> total + (inventor.passed - inventor.year);</span><br><span class="line">      &#125;, <span class="number">0</span>);</span><br></pre></td></tr></table></figure><p><code>inventor</code> 요소의 <code>passed</code>, <code>year</code> 값의 차를 <code>total</code>에 누적해서 더한다. <code>total</code>이 어디서 초기화되었냐면, <code>&#125;, 0);</code>에서 0으로 누적값을 선언함과 동시에 초기화할 수 있다.</p><h3 id="Filter"><a href="#Filter" class="headerlink" title="Filter"></a>Filter</h3><p>Filter는 이름 그대로 요소들을 걸러내는 것이 목적이다. filter에서 작성한 함수에서 나오는 리턴 값이 <code>true</code>이냐 <code>false</code>이냐를 기준으로 <code>true</code>의 값만 걸러내어 새로운 배열을 만들어낸다.</p><p>이번 과제에서 Filter를 사용한 방법이다.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fifteen = inventors.filter(</span><br><span class="line">        (inventor) =&gt; inventor.year &gt;= <span class="number">1500</span> &amp;&amp; inventor.year &lt; <span class="number">1600</span></span><br><span class="line">      );</span><br></pre></td></tr></table></figure><p><code>inventors</code>에서 <code>year</code> 값이 1500~1599인 요소만 <code>fifteen</code> 배열에 다시 넣는다. <code>return true</code>, <code>return false</code>의 표현이 저기서 없는 이유는 <code>inventor.year &gt;= 1500 &amp;&amp; inventor.year &lt; 1600</code> 표현 자체가 조건문이라서 <code>boolean</code>형 데이터를 반환하기 때문에 굳이 <code>if ~</code> 표현이 필요없다.</p><h3 id="Sort"><a href="#Sort" class="headerlink" title="Sort"></a>Sort</h3><p>Sort Method는 정렬할 함수를 임의로 작성해도 되고, 그냥 <code>Array.sort()</code>로 사용해도 된다. 기본 정렬 순서는 문자열의 유니코드 코드 포인트를 따른다.</p><p>이번 과제에서는 임의의 정렬 함수를 작성하여 사용하였다.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ordered = inventors.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> (a.year &gt; b.year ? <span class="number">1</span> : <span class="number">-1</span>));</span><br></pre></td></tr></table></figure><p><code>inventors</code>의 <code>year</code>순으로 정렬하기 위해 <code>positive</code>, <code>negative</code>의 값을 기준으로 <code>sort</code>한다.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Day-4-Array-Cardio-Day-1&quot;&gt;&lt;a href=&quot;#Day-4-Array-Cardio-Day-1&quot; class=&quot;headerlink&quot; title=&quot;Day 4 - Array Cardio Day 1&quot;&gt;&lt;/a&gt;Day 4 - Arra</summary>
      
    
    
    
    <category term="javascript" scheme="https://zinirun.github.io/categories/javascript/"/>
    
    
    <category term="javascript" scheme="https://zinirun.github.io/tags/javascript/"/>
    
    <category term="javascript30" scheme="https://zinirun.github.io/tags/javascript30/"/>
    
    <category term="VanillaJS" scheme="https://zinirun.github.io/tags/VanillaJS/"/>
    
  </entry>
  
  <entry>
    <title>Javascript 30 - Day 3 CSS Variables</title>
    <link href="https://zinirun.github.io/2020/08/16/js-course30-3/"/>
    <id>https://zinirun.github.io/2020/08/16/js-course30-3/</id>
    <published>2020-08-16T04:42:49.000Z</published>
    <updated>2020-08-16T07:14:05.395Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Day-3-CSS-Variables"><a href="#Day-3-CSS-Variables" class="headerlink" title="Day 3 - CSS Variables"></a>Day 3 - CSS Variables</h2><div class="video-container"><iframe src="https://www.youtube.com/embed/AHLNzv13c2I" frameborder="0" loading="lazy" allowfullscreen></iframe></div><h3 id="완성-코드"><a href="#완성-코드" class="headerlink" title="완성 코드"></a>완성 코드</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Scoped CSS Variables and JS<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Update CSS Variables with <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;hl&quot;</span>&gt;</span>JS<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;controls&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;spacing&quot;</span>&gt;</span>Spacing:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">        <span class="attr">id</span>=<span class="string">&quot;spacing&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">type</span>=<span class="string">&quot;range&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">&quot;spacing&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">min</span>=<span class="string">&quot;10&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">max</span>=<span class="string">&quot;200&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">value</span>=<span class="string">&quot;10&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">data-sizing</span>=<span class="string">&quot;px&quot;</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;blur&quot;</span>&gt;</span>Blur:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">        <span class="attr">id</span>=<span class="string">&quot;blur&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">type</span>=<span class="string">&quot;range&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">&quot;blur&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">min</span>=<span class="string">&quot;0&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">max</span>=<span class="string">&quot;25&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">value</span>=<span class="string">&quot;10&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">data-sizing</span>=<span class="string">&quot;px&quot;</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;base&quot;</span>&gt;</span>Base Color<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;base&quot;</span> <span class="attr">type</span>=<span class="string">&quot;color&quot;</span> <span class="attr">name</span>=<span class="string">&quot;base&quot;</span> <span class="attr">value</span>=<span class="string">&quot;#ffc600&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://source.unsplash.com/7bwQXzbF6KE/800x500&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">      <span class="selector-pseudo">:root</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">--base</span>: <span class="selector-id">#ffc600</span>;</span></span><br><span class="line">        --spacing: 10px;</span><br><span class="line">        --blur: 10px;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      img &#123;</span><br><span class="line">        padding: var(--spacing);</span><br><span class="line">        background: var(--base);</span><br><span class="line">        filter: blur(var(--blur));</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">      <span class="selector-class">.hl</span> &#123;</span></span><br><span class="line">        color: var(--base);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      /*</span><br><span class="line">        misc styles, nothing to do with CSS variables</span><br><span class="line">      */</span><br><span class="line"></span><br><span class="line">      body &#123;</span><br><span class="line">        text-align: center;</span><br><span class="line"><span class="css">        <span class="selector-tag">background</span>: <span class="selector-id">#193549</span>;</span></span><br><span class="line">        color: white;</span><br><span class="line">        font-family: &#x27;helvetica neue&#x27;, sans-serif;</span><br><span class="line">        font-weight: 100;</span><br><span class="line">        font-size: 50px;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">      <span class="selector-class">.controls</span> &#123;</span></span><br><span class="line">        margin-bottom: 50px;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      input &#123;</span><br><span class="line">        width: 100px;2</span><br><span class="line">      &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> inputs = <span class="built_in">document</span>.querySelectorAll(<span class="string">&quot;.controls input&quot;</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">      <span class="function"><span class="keyword">function</span> <span class="title">handleUpdate</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> suffix = <span class="built_in">this</span>.dataset.sizing || <span class="string">&quot;&quot;</span>;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.documentElement.style.setProperty(</span></span><br><span class="line"><span class="javascript">          <span class="string">`--<span class="subst">$&#123;<span class="built_in">this</span>.name&#125;</span>`</span>,</span></span><br><span class="line"><span class="javascript">          <span class="built_in">this</span>.value + suffix</span></span><br><span class="line">        );</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">      inputs.forEach(<span class="function">(<span class="params">input</span>) =&gt;</span> input.addEventListener(<span class="string">&quot;change&quot;</span>, handleUpdate));</span></span><br><span class="line"><span class="javascript">      inputs.forEach(<span class="function">(<span class="params">input</span>) =&gt;</span></span></span><br><span class="line"><span class="javascript">        input.addEventListener(<span class="string">&quot;mousemove&quot;</span>, handleUpdate)</span></span><br><span class="line">      );</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="사용자-지정-CSS-속성-CSS-Variable"><a href="#사용자-지정-CSS-속성-CSS-Variable" class="headerlink" title="사용자 지정 CSS 속성 (CSS Variable)"></a>사용자 지정 CSS 속성 (CSS Variable)</h2><p><code>CSS Variable</code>을 사용하면 CSS에서 사용자가 임의로 변수를 선언하여 사용할 수 있다. 복잡한 웹사이트는 많은 양의 CSS를 가지고 있는데, 종종 많은 값을 반복적으로 사용한다. 이 때 CSS 속성을 변수로 선언해놓고 반복 사용할 수 있다.</p><p>예를 들어 <code>#ffc600</code> 색상이 CSS 속성에서 반복될 때 <code>--main-color</code>로 정해놓고 사용할 수 있어 헷갈리지도 않고 가독성도 훨씬 좋다.</p><h3 id="기본-사용법"><a href="#기본-사용법" class="headerlink" title="기본 사용법"></a>기본 사용법</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">  <span class="attribute">--main-color</span>: <span class="number">#ffc600</span>;</span><br><span class="line">  <span class="attribute">--sub-color</span>: dodgerblue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>이렇게 사용자 지정 속성을 선언한다. 사용할 때는</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">element</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--main-color);</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--sub-color);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>이렇게 사용할 수 있다.</p><h2 id="documentElement-HTMLElement-dataset"><a href="#documentElement-HTMLElement-dataset" class="headerlink" title="documentElement, HTMLElement.dataset"></a>documentElement, HTMLElement.dataset</h2><p><code>handleUpdate</code> 함수 부분을 다시 보자.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleUpdate</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> suffix = <span class="built_in">this</span>.dataset.sizing || <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="built_in">document</span>.documentElement.style.setProperty(</span><br><span class="line">    <span class="string">`--<span class="subst">$&#123;<span class="built_in">this</span>.name&#125;</span>`</span>,</span><br><span class="line">    <span class="built_in">this</span>.value + suffix</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>input</code> 태그에서 변화가 일어날 때마다 이 <code>handleUpdate</code> 함수가 호출된다.</p><h3 id="HTMLElement-dataset"><a href="#HTMLElement-dataset" class="headerlink" title="HTMLElement.dataset"></a>HTMLElement.dataset</h3><p>여기서 <code>const suffix = this.dataset.sizing || &#39;&#39;;</code>를 보면 <code>setProperty</code>에서 변경할 속성의 size를 나타냄을 알 수 있는데, 여기서 사용되는 것이 <code>dataset</code>이다.</p><p>이벤트가 일어나고 있는 객체 <code>input</code>에서 데이터 속성 <code>data-</code>를(이 예제에서는 <code>data-sizing</code>) 두어 그 데이터를 <code>Javascript</code>나 <code>CSS</code>에서 불러올 수 있다.</p><h3 id="document-documentElement"><a href="#document-documentElement" class="headerlink" title="document.documentElement"></a>document.documentElement</h3><p>이전에 <code>:root</code>에서 <code>CSS Variable</code>을 선언했다. 이 값은 이벤트가 일어나면 바꿔져야 한다. 이 때 <code>root element</code>에 접근하기 위해 <code>document.documentElement</code>를 사용한다.</p><p>모든 비어있지 않은 HTML 문서의 <code>documentElement</code>는 항상 <code>&lt;html&gt;</code>요소를 가리킨다.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Day-3-CSS-Variables&quot;&gt;&lt;a href=&quot;#Day-3-CSS-Variables&quot; class=&quot;headerlink&quot; title=&quot;Day 3 - CSS Variables&quot;&gt;&lt;/a&gt;Day 3 - CSS Variables&lt;/h2&gt;&lt;</summary>
      
    
    
    
    <category term="javascript" scheme="https://zinirun.github.io/categories/javascript/"/>
    
    
    <category term="javascript" scheme="https://zinirun.github.io/tags/javascript/"/>
    
    <category term="javascript30" scheme="https://zinirun.github.io/tags/javascript30/"/>
    
    <category term="VanillaJS" scheme="https://zinirun.github.io/tags/VanillaJS/"/>
    
  </entry>
  
  <entry>
    <title>쿠버네티스 가이드 - 설치부터 클러스터 구성까지</title>
    <link href="https://zinirun.github.io/2020/08/16/start-k8s/"/>
    <id>https://zinirun.github.io/2020/08/16/start-k8s/</id>
    <published>2020-08-15T15:46:23.000Z</published>
    <updated>2020-08-18T11:12:54.304Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Kubernetes"><a href="#Kubernetes" class="headerlink" title="Kubernetes??"></a>Kubernetes??</h1><p><img src="https://1.bp.blogspot.com/-PzKGWt1M5XY/XisRO0mxsRI/AAAAAAAAARA/KR_q8pkvnpsP4J1zxNcHLndPyfLbOFfvgCLcBGAsYHQ/s1600/kubernetes.png" alt="k8s-logo"><br>본 포스트는 쿠버네티스의 기본 개념, 설치, 클러스터 구성 등 꽤 많은 내용을 다루고 있으니 오른쪽의 목차 <code>tocbot</code>을 참고하자.</p><h2 id="들어가기-전에"><a href="#들어가기-전에" class="headerlink" title="들어가기 전에"></a>들어가기 전에</h2><p>서버 스터디를 시작하며 <code>NHN Toast Cloud</code> 플랫폼을 통해 도커를 접해보았다. 컨테이너를 쓰는 이유가 점점 납득이 갈 때쯤 <strong>쿠버네티스가 그렇게 핫하다</strong>는 말을 듣고 구글링해보다가 도커와 같이 공부하면 좋겠다는 생각에 무턱대고 도서관에 가서 책을 빌리고 공부를 시작했다. 매력적인 서비스임은 분명하다. 왜 매력적인 서비스인지 알아보려 한다.</p><h2 id="컨테이너가-멋진-이유"><a href="#컨테이너가-멋진-이유" class="headerlink" title="컨테이너가 멋진 이유"></a>컨테이너가 멋진 이유</h2><p><em>컨테이너, 레이어의 기본 개념은 <a href="https://zinirun.github.io/2020/08/15/how-to-use-docker/#Image-Container-%E2%80%A6">도커 관련 포스트</a>를 참조하자.</em><br><strong>컨테이너</strong>의 인기는 몇년 전부터 불같다. 도커, 컨테이너 관련 내용이 없는 IT 컨퍼런스는 찾기 힘들어지고 있다. 컨테이너 그 자체는 기술이 아니며, 수년 전부터 사용되고 있었다. 도커가 인기있는 이유는 유저에게 제공되는 도구와 사용의 편리함에 있다.</p><p>현대의 개발 관행은 <code>지속적 통합</code>, <code>지속적 배포</code>에 있다. 소프트웨어의 품질을 극대화하기 위함이다. 조직은 코드를 작성, 배포하는 지속적인 과정을 통해 품질 관리, 테스트를 도입해 수행한다. 그 결과 더욱 빨리 업데이트되고 버그가 수정되어 전체적인 품질이 향상되는 것이다. 그러나 테스트와 배포가 일치하는 개발 환경을 만드는 건 어렵다.</p><p>도커를 사용하면 이 과정이 너무 편리해진다. 개발자의 PC에서 배포된 컨테이너는 사내 <code>staging 서버</code>에 쉽게 배포할 수 있다. 그 다음 클라우드에서 실행중인 배포 서버로 쉽게 전송할 수 있다. 이는 도커가 부모 레이어가 명시된 빌드 파일을 사용해서 컨테이너를 생성하기 때문이다. 이 방식은 OS, 패키지, 어플리케이션 버전의 일치를 보장하는 장점이 있다.</p><h2 id="오케스트레이션"><a href="#오케스트레이션" class="headerlink" title="오케스트레이션"></a>오케스트레이션</h2><p>쿠버네티스는 다른 컨테이너 오케스트레이션 도구보다 늦게 등장했다. 컨테이너 오케스트레이션이란 여러 개의 서버에 컨테이너를 배포, 운영하면서 서비스 간 연결을 쉽게 해주는 것이다. 서버마다 각각 이름을 부여해서 한개씩 접속하여 관리하는 것이 아닌, 서버 몇개를 하나로 묶어 적당한 서버를 자동으로 선택해 애플리케이션을 배포하고, 부하가 생기면 컨테이너를 늘리는 등의 기능을 제공한다. 오케스트레이션 툴들은 많았지만, 구글의 노하우와 강력한 확장성이 보장된 쿠버네티스의 등장으로 사실상 <code>de facto</code>가 되었다.</p><h2 id="마스터-노드-Structure"><a href="#마스터-노드-Structure" class="headerlink" title="마스터-노드 Structure"></a>마스터-노드 Structure</h2><p><img src="https://1.bp.blogspot.com/-GSJ1B9_Utuc/XjvQLZd3eQI/AAAAAAAAARw/hrwzxxwo3usCXC927dB7JKZV98BQiuUUwCLcBGAsYHQ/s320/%25ED%2581%25B4%25EB%259F%25AC%25EC%258A%25A4%25ED%2584%25B0.png" alt="k11"><br>쿠버네티스는 전체 클러스터를 관리하는 마스터와 컨테이너가 배포되는 노드로 구성되어 있다. 모든 명령은 마스터의 API 서버를 호출하고, 노드는 마스터와 통신하면서 필요한 작업을 수행한다. 특정 노드에 명령을 내려도 노드에 직접 명령이 전해지는게 아니라 마스터에 명령을 내리고 마스터가 노드에 접속하여 대신 결과를 응답한다.</p><h2 id="쿠버네티스를-구성하는-것들"><a href="#쿠버네티스를-구성하는-것들" class="headerlink" title="쿠버네티스를 구성하는 것들"></a>쿠버네티스를 구성하는 것들</h2><p><code>클러스터</code>는 쿠버네티스에서 관리하는 <code>컨테이너화</code>된 애플리케이션을 실행하는 <code>노드</code>라고 하는 기계의 집합이다. <code>클러스터</code>는 최소 1개의 <code>마스터 노드</code>와 최소 1개의 <code>워커 노드</code>를 가진다.</p><p><code>워커 노드</code>는 애플리케이션의 구성요소인 <code>파드</code>(Pod)를 호스트한다. <code>마스터 노드</code>는 <code>워커 노드</code>와 <code>클러스터</code> 내 파드를 관리한다. 다수의 <code>마스터 노드</code>는 failover(장애극복)과 고가용성의 <code>클러스터</code>에서 사용한다.</p><p><code>클러스터</code>를 구성하기 전에 몇가지 <code>컴포넌트</code>의 개념을 알아보자.</p><h3 id="마스터-컴포넌트"><a href="#마스터-컴포넌트" class="headerlink" title="마스터 컴포넌트"></a>마스터 컴포넌트</h3><h4 id="kube-apiserver"><a href="#kube-apiserver" class="headerlink" title="kube-apiserver"></a>kube-apiserver</h4><p>API 서버는 쿠버네티스의 API를 노출하는 쿠버네티스 컨트롤 플레인 컴포넌트이다. API 서버의 주요 구현은 <code>kube-apiserver</code>이다. 즉, 더 많은 인스턴스를 배포해서 확장할 수 있다. 여러 <code>kube-apiserver</code> 인스턴스를 실행하고, 인스턴스간의 트래픽을 균형있게 조절할 수 있다.</p><h4 id="etcd"><a href="#etcd" class="headerlink" title="etcd"></a>etcd</h4><p>모든 클러스터 데이터를 담는 쿠버네티스 뒷단의 저장소로 사용되는 일관성, 고가용성 키-값(Key-Value) 저장소이다.</p><h4 id="kube-scheduler"><a href="#kube-scheduler" class="headerlink" title="kube-scheduler"></a>kube-scheduler</h4><p>노드가 배정되지 않은 새로 생성된 파드를 감지하고 그 파드가 구동될 노드를 선택하는 마스터 상의 컴포넌트이다. 스케줄링 결정을 위해 고려되는 요소는 리소스에 대한 개별 및 총체적 요구 사항, 하드웨어/소프트웨어/정책적 제약 등의 모든 사항이 포함되어 있다.</p><h4 id="kube-controller-manager"><a href="#kube-controller-manager" class="headerlink" title="kube-controller-manager"></a>kube-controller-manager</h4><p>컨트롤러를 구동하는 마스터 상의 컴포넌트이다. 논리적으로 각 컨트롤러는 개별 프로세스이지만, 복잡성을 갖추기 위해 모두 단일 바이너리로 컴파일되고 단일 프로세스 내에서 실행된다. 컨트롤러에는 노드 컨트롤러, 레플리케이션 컨트롤러, 엔드포인트 컨트롤러, 서비스 어카운트 &amp; 토큰 컨트롤러가 있다.</p><h3 id="노드-컴포넌트"><a href="#노드-컴포넌트" class="headerlink" title="노드 컴포넌트"></a>노드 컴포넌트</h3><h4 id="kubelet"><a href="#kubelet" class="headerlink" title="kubelet"></a>kubelet</h4><p>클러스터의 각 노드에서 실행되는 에이전트이다. <code>Kubelet</code>은 파드에서 컨테이너가 확실하게 동작하도록 관리한다. 다양한 메커니즘을 통해 제공된 <code>파드 스펙</code>(PodSpec)의 집합을 받아서 해당 파드 스펙에 따라 건강하게 동작하는 것을 확실히 한다. <code>Kubelet</code>은 쿠버네티스를 통해 생성되지 않는 컨테이너는 관리하지 않는다.</p><h4 id="kube-proxy"><a href="#kube-proxy" class="headerlink" title="kube-proxy"></a>kube-proxy</h4><p>클러스터의 각 노드에서 실행되는 네트워크 프록시로, 쿠버네티스 서비스 개념의 구현부이다. <code>kube-proxy</code>는 노드의 네트워크 규칙을 유지, 관리한다. 이 네트워크 규칙이 내부 네트워크 세션에서 바깥으로 네트워크 통신을 할 수 있도록 해준다.</p><h2 id="쿠버네티스-설치하기"><a href="#쿠버네티스-설치하기" class="headerlink" title="쿠버네티스 설치하기"></a>쿠버네티스 설치하기</h2><p>이제 쿠버네티스를 설치하고 클러스터를 구성해보자. 필자의 환경은 <code>Ubuntu 18.04</code>이다. os에 따라 설치법이 다를 수 있으나 쿠버네티스 설치 후의 <code>kubectl</code> 명령은 동일하니 <code>centOS</code> 등의 운영체제를 사용한다면 구글링을 통해 충분히 해결할 수 있을 것이다.</p><h3 id="docker-설치"><a href="#docker-설치" class="headerlink" title="docker 설치"></a>docker 설치</h3><p>컨테이너 기반의 툴이기 때문에 <code>도커</code> 설치가 필요하다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo wget -qO- https://get.docker.com/ | sh</span><br></pre></td></tr></table></figure><p>이 명령어는 리눅스 배포판을 알아서 인식해서 도커를 설치한다. <code>wget</code> 명령어가 사용되지 않는다면 <code>sudo apt-get install wget</code> 명령을 사용해서 <code>wget</code> 패키지를 설치한 후 진행하자.</p><h3 id="Port-설정"><a href="#Port-설정" class="headerlink" title="Port 설정"></a>Port 설정</h3><p>아래 표의 포트들은 쿠버네티스가 사용하는 포트임으로 비워두자. 클라우드를 사용한다면 포트 보안 정책의 수정이 필요하다. 필자는 <code>NHN Toast Cloud</code>을 사용중이므로 보안 정책을 <code>Master</code>, <code>Worker</code> 포트에 맞게 각각 설정해놓았다.</p><p><img src="https://1.bp.blogspot.com/-WueaUJ8CZT8/XjvaEcCIvoI/AAAAAAAAASI/UEynHwVm7lI-BDKwiGri-5GmjgHRhHoOwCLcBGAsYHQ/s640/%25ED%258F%25AC%25ED%258A%25B8%25EC%2584%25A4%25EC%25A0%2595.JPG" alt="k21"></p><h3 id="쿠버네티스-설치"><a href="#쿠버네티스-설치" class="headerlink" title="쿠버네티스 설치"></a>쿠버네티스 설치</h3><p>클러스터 구성을 위해 필요한 kubeadm, kubelet, kubectl을 설치한다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">apt-get update &amp;&amp; apt-get install -y apt-transport-https curl</span><br><span class="line">curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key add -</span><br><span class="line">cat &lt;&lt;EOF &gt;/etc/apt/sources.list.d/kubernetes.list</span><br><span class="line">deb https://apt.kubernetes.io/ kubernetes-xenial main</span><br><span class="line">EOF</span><br><span class="line">apt-get update</span><br><span class="line">apt-get install -y kubelet kubeadm kubectl</span><br><span class="line">apt-mark hold kubelet kubeadm kubectl</span><br></pre></td></tr></table></figure><p>쿠버네티스 구동 시 <code>swap</code>을 사용할 수 없다. 따라서 <code>swap</code>을 꺼준다.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">swapoff -a</span><br></pre></td></tr></table></figure><h2 id="클러스터-구성하기"><a href="#클러스터-구성하기" class="headerlink" title="클러스터 구성하기"></a>클러스터 구성하기</h2><h3 id="클러스터-구성-Master"><a href="#클러스터-구성-Master" class="headerlink" title="클러스터 구성 - Master"></a>클러스터 구성 - Master</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubeadm init --pod-network-cidr=10.244.0.0/16</span><br></pre></td></tr></table></figure><p>네트워크 옵션은 <code>pod network</code> 구성을 위한 옵션이다. 어떤 구성을 할지에 따라 옵션이 달라지는데 <a href="https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/#pod-network">공식 홈페이지</a>를 확인하자. 이번에는 <code>Flannel</code>을 사용할 것이다.</p><p>다시 <code>init</code>하고 싶다면 <code>kubeadm reset</code> 을 통해 리셋할 수 있다.</p><p>성공적으로 <code>init</code>이 되었다면 출력 결과의 마지막 줄에 <code>kubeadm join ~</code> 부분을 <strong>어딘가에 잘 복사해놓자</strong>. 워커 노드를 마스터 노드에 연결하기 위한 명령이고, <code>24시간</code>동안 유효하다.</p><p>그 윗줄을 잘 보면 <code>CONFIG</code> 파일을 특정 경로에 복사해두라는 말과 세줄의 명령어를 출력하는데 이는 앞으로 <code>kubectl</code>을 통해 명령을 내릴 때 어느 클러스터에 명령을 내릴 지 등이 설정이 저장된 파일이다. 세 줄의 명령을 실행한다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p <span class="variable">$HOME</span>/.kube</span><br><span class="line">sudo cp -i /etc/kubernetes/admin.conf <span class="variable">$HOME</span>/.kube/config</span><br><span class="line">sudo chown $(id -u):$(id -g) <span class="variable">$HOME</span>/.kube/config</span><br></pre></td></tr></table></figure><p>이제 <code>pod network</code> 설정이다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/62e44c867a2846fefb68bd5f178daf4da3095ccb/Documentation/kube-flannel.yml</span><br></pre></td></tr></table></figure><p><code>Master 노드</code>의 구성은 완료되었다. 진행 사항이 궁금하다면 <code>kubectl get pods --all-namespaces</code> 명령어를 입력하면 생성중인 컨테이너들을 볼 수 있다.</p><h3 id="클러스터-구성-Worker"><a href="#클러스터-구성-Worker" class="headerlink" title="클러스터 구성 - Worker"></a>클러스터 구성 - Worker</h3><p>워커 노드에서도 위에서의 <code>docker</code>, <code>kubeadm</code>, <code>kubelet</code>, <code>kubectl</code>을 설치한다. 위에 서술한 포트 정책 변경도 잊지 말자. 나는 2개의 워커 노드를 구성했다. (1 마스터노드 - 2 워커노드) 복수의 워커노드를 사용하더라도 똑같이 <code>docker</code>, <code>kubeadm</code>, <code>kubelet</code>, <code>kubectl</code>을 설치하면 된다.</p><p>이제 워커노드에서 <code>master</code>를 <code>init</code>하고 나서 잘 복사해뒀던 명령어 (<code>kubeadm join ~</code> 부분)를 입력한다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubeadm join &lt;master-ip&gt;:&lt;master-port&gt; --token &lt;token&gt; --discovery-token-ca-cert-hash sha256:&lt;<span class="built_in">hash</span>&gt;</span><br><span class="line"><span class="comment">#예시 코드이므로 마스터에서 복사해두었던 코드 사용하기!</span></span><br></pre></td></tr></table></figure><p>token의 유효기간은 24시간이고 혹시 위 명령어를 잃어버렸거나 유효기간이 지난 것 같으면 <code>kubeadm token create --print-join-command</code> 명령어를 master 노드에서 입력하면 된다.</p><p>마스터 노드에서 <code>get</code> 명령을 입력하여 <code>join</code>이 잘 되었는지 확인해보자.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubectl get no</span><br><span class="line"><span class="comment">#kubectl get nodes와 같다</span></span><br></pre></td></tr></table></figure><h2 id="마치며"><a href="#마치며" class="headerlink" title="마치며"></a>마치며</h2><p>쿠버네티스의 기본적인 개념에서 클러스터 구성 방법까지 알아보았다.<br>쿠버네티스 생태계는 현재도 빠르게 변하고 발전하고 있다. 사용법이 바뀌고 계속해서 새로운 기능들이 추가되고 있지만 기본적인 구성과 아키텍쳐는 거의 동일하다. 기본적인 동작 원리를 이해한다면 새로운 버전이 나와도 쉽게 이해하고 확장하여 사용할 수 있다. 도커와 쿠버네티스의 조합은 <code>devOps</code> 개발에서 거의 필수가 되어가는 만큼 경험해보면 좋은 플랫폼인 것은 확실하다.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Kubernetes&quot;&gt;&lt;a href=&quot;#Kubernetes&quot; class=&quot;headerlink&quot; title=&quot;Kubernetes??&quot;&gt;&lt;/a&gt;Kubernetes??&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;https://1.bp.blogspot.co</summary>
      
    
    
    
    <category term="cloud" scheme="https://zinirun.github.io/categories/cloud/"/>
    
    <category term="kubernetes" scheme="https://zinirun.github.io/categories/cloud/kubernetes/"/>
    
    
    <category term="docker" scheme="https://zinirun.github.io/tags/docker/"/>
    
    <category term="kubernetes" scheme="https://zinirun.github.io/tags/kubernetes/"/>
    
  </entry>
  
  <entry>
    <title>Flask 웹 서비스 만들기</title>
    <link href="https://zinirun.github.io/2020/08/16/how-to-use-flask/"/>
    <id>https://zinirun.github.io/2020/08/16/how-to-use-flask/</id>
    <published>2020-08-15T15:35:39.000Z</published>
    <updated>2020-08-15T15:45:19.658Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Flask-시작하기"><a href="#Flask-시작하기" class="headerlink" title="Flask 시작하기"></a>Flask 시작하기</h2><p><code>Flask</code>는 파이썬으로 구동되는 웹 어플리케이션 프레임워크이다. <code>Django</code> 프레임워크보다 가벼워서 스케일이 작은 서버부터 큰 서버까지 만들 수 있다. 내가 필요한 건 파이썬 함수에서 계산된 값이 <code>HTML</code>로 리턴되는 것이었는데, <code>Flask</code>에서는 쉽게 할 수 있었다.</p><p>개발 환경은 <code>PyCharm IDE</code>를 사용했다. 파이썬 개발뿐만 아니라 HTML, CSS, JS 편집까지 할 수 있고 패키지 설치, 디버깅이 간편했기 때문이다.</p><p>우선 파이참에서 프로젝트를 만든다.</p><p><code>main.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, render_template</span><br><span class="line">app = Flask(__name__)</span><br><span class="line"><span class="meta">@app.route(&#x27;/&#x27;)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main_page</span>():</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;index.html&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># 서버 실행</span></span><br><span class="line">    app.run(host=<span class="string">&#x27;0.0.0.0&#x27;</span>, debug=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><p><code>main.py</code> 파일을 프로젝트 폴더에 넣고 <code>index.html</code>을 만들어 <code>[프로젝트 폴더/templates]</code> 폴더 내에 위치시킨다.</p><p><img src="https://1.bp.blogspot.com/-C3o0yj7Y9VE/XleaChcOXhI/AAAAAAAAAT0/Hb0vYZ5aPH4yccC2zm-IHHXj9QAAPklcACLcBGAsYHQ/s1600/%25ED%258C%258C%25EC%259D%25B4%25EC%25B0%25B8%25ED%258F%25B4%25EB%258D%2594.JPG" alt="f11"></p><p>파일 배치가 완료된 모습이다.</p><p>이제 <code>main.py</code>을 파이참에서 실행하면 <code>0.0.0.0:5000</code> 또는 <code>localhost:5000</code>로 브라우저에서 접속할 수 있다. Flask에서 <code>html</code>을 <code>jinja</code>로 파이썬과 연동시켜 주었기때문에 실행 시 자동으로 <code>index.html</code>로 연결된다.</p><p>파이썬에서 HTML 파일로 값을 넘기는 법을 알아보자.</p><h2 id="Flask와-웹-연동하기"><a href="#Flask와-웹-연동하기" class="headerlink" title="Flask와 웹 연동하기"></a>Flask와 웹 연동하기</h2><h3 id="Python-값을-웹-HTML-에서-받기"><a href="#Python-값을-웹-HTML-에서-받기" class="headerlink" title="Python 값을 웹(HTML)에서 받기"></a>Python 값을 웹(HTML)에서 받기</h3><p>파이썬에서 작성된 함수에서 발생된 리턴 값을 웹(HTML)에서 받아보자.<br><code>main.py</code>에서 적당한 함수를 작성한다.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route(&#x27;/&#x27;)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main_page</span>():</span></span><br><span class="line">    result = <span class="number">1</span> + <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;index.html&#x27;</span>, calc_result = result)</span><br></pre></td></tr></table></figure><p><code>render_template</code>을 통해 <code>index.html</code>에 <code>result</code> 값을 넘겨줄 수 있다. html에서는? <code>calc_result</code>로 받는다. html에서 작성된 <code>calc_result</code> 값에 <code>result</code> 값이 들어가면서 <code>index.html</code>로 리다이렉트 되는것이다.</p><p><code>index.html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span> 1+1 페이지 <span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">1+1은 &#123;&#123; calc_result &#125;&#125;입니다!</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span>    </span><br></pre></td></tr></table></figure><p><code>&#123;&#123; 변수 이름 &#125;&#125;</code> 으로 작성하면 플라스크에서 값을 넘겨줄 수 있다. 이제 <code>main.py</code>을 실행하면 <code>&#123;&#123; calc_result &#125;&#125;</code>는 <code>2</code>로 렌더링되어 브라우저에 표시될 것이다.</p><p>이제 HTML에서 값을 넘기는 법을 알았으니 <code>JavaScript</code>에서 받아보자.</p><p><code>index.html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span> 1+1 페이지 <span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">onload</span> = <span class="string">&quot;view_result();&quot;</span>&gt;</span></span><br><span class="line">1+1은 <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;res&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>입니다!</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="handlebars"><span class="xml">var res = </span><span class="template-variable">&#123;&#123; <span class="name">calc_result</span>|tojson &#125;&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="function"><span class="keyword">function</span> <span class="title">view_result</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.getElementById(<span class="string">&#x27;res&#x27;</span>).innerHTML = res;    </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>자바스크립트를 <code>index.html</code>의 <code>body</code> 태그 내에 선언하고 <code>var</code>로 출력할 값을 선언 후 <code>&#123;&#123; 변수이름|tojson &#125;&#125;</code> 으로 작성하면 플라스크에서 자바스크립트로 값을 넘겨줄 수 있다.</p><p>위 코드는 <code>span</code> 태그 내의 내용을 자바스크립트에서 <code>innerHTML</code>을 사용하여 <code>res</code>값으로 바꿔준다. 위 html에서 값을 받은 페이지와 실행 결과는 같지만 활용은 무궁무진할 것이다.</p><h2 id="Flask-파일-업로드-구현"><a href="#Flask-파일-업로드-구현" class="headerlink" title="Flask 파일 업로드 구현"></a>Flask 파일 업로드 구현</h2><p>플라스크 내에서 웹을 이용한 기능들은 정말 많다. 이 중에서 내가 개발 중인 프로젝트에 필요한 주요 기능은 파일 업로드 기능이다.</p><p><code>main.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> werkzeug <span class="keyword">import</span> secure_filename</span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, render_template, request, redirect</span><br><span class="line">ALLOWED_EXTENSIONS = set([<span class="string">&#x27;jpg&#x27;</span>, <span class="string">&#x27;jpeg&#x27;</span>, <span class="string">&#x27;png&#x27;</span>, <span class="string">&#x27;gif&#x27;</span>, <span class="string">&#x27;bmp&#x27;</span>, <span class="string">&#x27;JPG&#x27;</span>, <span class="string">&#x27;JPEG&#x27;</span>, <span class="string">&#x27;PNG&#x27;</span>, <span class="string">&#x27;GIF&#x27;</span>, <span class="string">&#x27;BMP&#x27;</span>])</span><br><span class="line">app = Flask(__name__)</span><br><span class="line"><span class="meta">@app.route(&#x27;/fileUpload&#x27;, methods=[&#x27;GET&#x27;, &#x27;POST&#x27;])</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">upload_file</span>():</span></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&#x27;POST&#x27;</span>:</span><br><span class="line">        file = request.files[<span class="string">&#x27;file&#x27;</span>]</span><br><span class="line">        <span class="comment">#확장자 이미지파일인 경우</span></span><br><span class="line">        <span class="keyword">if</span> file <span class="keyword">and</span> allowed_file(file.filename):</span><br><span class="line">            file.save(<span class="string">&#x27;uploads/&#x27;</span> + secure_filename(file.filename)</span><br><span class="line">            <span class="keyword">return</span> redirect(url_for(<span class="string">&#x27;main_page&#x27;</span>))</span><br><span class="line">        <span class="comment">#확장자 이미지파일 아닐 경우</span></span><br><span class="line">        <span class="keyword">return</span> render_template(<span class="string">&#x27;index.html&#x27;</span>, data=<span class="string">&quot;이미지 파일만 업로드하세요.&quot;</span>)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">allowed_file</span>(<span class="params">filename</span>):</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;.&#x27;</span> <span class="keyword">in</span> filename <span class="keyword">and</span> \</span><br><span class="line">           filename.rsplit(<span class="string">&#x27;.&#x27;</span>, <span class="number">1</span>)[<span class="number">1</span>] <span class="keyword">in</span> ALLOWED_EXTENSIONS</span><br></pre></td></tr></table></figure><p>이 코드는 단순히 파일 업로드뿐만 아니라 확장자를 검사할 수 있다. <code>ALLOWED_EXTENSIONS</code>에 허용할 확장자명을 선언하고 이미지 파일일 경우 <code>uploads</code> 폴더에 파일을 저장하고, 아닐 경우 <code>html</code>에서 선언한 <code>&#123;&#123; data &#125;&#125;</code>에 경고 메시지를 리턴하며 <code>index.html</code>로 리다이렉트한다.</p><h2 id="마치며"><a href="#마치며" class="headerlink" title="마치며"></a>마치며</h2><p><code>Flask</code>에 대해서 어느정도 알아보았다.<br><code>Flask</code>는 가볍지만 필요로 하는 기능들을 <code>import</code>해서 얼마든지 사용할 수 있다. Python과 웹을 어느정도 다룰 줄 안다면 Flask는 접하기 쉬울 것이라 생각한다. 나는 파이썬 <code>opencv</code> 라이브러리를 통해 이미지 분석 기능을 제공하는 웹 서비스를 만들어 도커로 서버에서 서비스했는데, 파이썬을 웹에서 서비스하니 이미지 분석 등의 파이썬 고유의 라이브러리를 사용할 수 있는 등의 이점이 정말 많았다.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Flask-시작하기&quot;&gt;&lt;a href=&quot;#Flask-시작하기&quot; class=&quot;headerlink&quot; title=&quot;Flask 시작하기&quot;&gt;&lt;/a&gt;Flask 시작하기&lt;/h2&gt;&lt;p&gt;&lt;code&gt;Flask&lt;/code&gt;는 파이썬으로 구동되는 웹 어플리케이</summary>
      
    
    
    
    <category term="flask" scheme="https://zinirun.github.io/categories/flask/"/>
    
    
    <category term="flask" scheme="https://zinirun.github.io/tags/flask/"/>
    
  </entry>
  
  <entry>
    <title>Docker(도커) 시작하기, 설치부터 배포까지</title>
    <link href="https://zinirun.github.io/2020/08/15/how-to-use-docker/"/>
    <id>https://zinirun.github.io/2020/08/15/how-to-use-docker/</id>
    <published>2020-08-15T13:42:12.000Z</published>
    <updated>2020-08-15T14:38:27.111Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Docker-Guide"><a href="#Docker-Guide" class="headerlink" title="Docker Guide"></a>Docker Guide</h1><img src="https://subicura.com/assets/article_images/2017-01-19-docker-guide-for-beginners-1/docker-logo.png" width=300 title='Docker' alt='Docker logo'><p>우측의 목차 <code>tocbot</code>을 이용하면 편리합니다!</p><h2 id="1-도커를-왜-쓸까-뭐길래"><a href="#1-도커를-왜-쓸까-뭐길래" class="headerlink" title="1. 도커를 왜 쓸까? 뭐길래?"></a>1. 도커를 왜 쓸까? 뭐길래?</h2><h3 id="들어가며"><a href="#들어가며" class="headerlink" title="들어가며"></a>들어가며</h3><p>서버 스터디를 하면서 ‘클라우드에 도커를 올려라’라는 말을 듣고, 듣긴 들은 것 같은데 대체 도커가 뭔지를 몰랐다. 단어 하나만 듣고 서버 <code>NHN TOAST 클라우드</code>에 여자저차 올리긴 했지만 완벽한 개념을 숙지하지 못하고 마구잡이로 올린 탓에 의미가 없었다.</p><p>다들 도커를 접하는 많은 이유가 있겠지만, 도커, 이미지, 컨테이너 등 기본적인 개념을 알고 ‘왜’ 쓰는지 알아야 할 것 같아서 정리해보았다.</p><h3 id="도커의-등장-전"><a href="#도커의-등장-전" class="headerlink" title="도커의 등장 전,"></a>도커의 등장 전,</h3><p>기존에 서버를 관리하는 것은 매우 어려웠고 복잡한 영역이어서, 새 서버를 세팅하려면 그때마다 config등의 구축환경을 다시 세팅하고, 그 후에도 리눅스 버전이나 환경의 변화가 생기면 충돌이 일어나기 쉽상이었다.</p><p>한 서버에 다수의 프로그램을 설치하면 라이브러리, 포트 충돌을 고려한 설치가 굉장히 어려웠고, 마이크로서비스 아키텍쳐, DevOps 등의 등장으로 서버 관리는 더 어려워졌다.</p><h3 id="도커의-등장"><a href="#도커의-등장" class="headerlink" title="도커의 등장,"></a>도커의 등장,</h3><p>이후 도커의 등장으로 서버 관리의 방식은 완전히 바뀌었다.</p><p>도커는 컨테이너 기반의 오픈소스 가상화 플랫폼이다. 컨테이너 안에는 다양한 프로그램, 실행 환경을 ‘컨테이너’라는 개념으로 추상화하고 클라우드, PC 등 어디서든 실행할 수 있다. 구글에서는 모든 서비스들이 20억개의 컨테이너로 동작한다고 한다.</p><h3 id="VM-vs-Docker"><a href="#VM-vs-Docker" class="headerlink" title="VM vs Docker"></a>VM vs Docker</h3><p>컨테이너는 격리된 공간에서 프로세스가 동작하는 기술이다. 기존의 가상화 방식은 OS를 가상화하는 것이었다. VMware 등의 가상머신은 Host OS 위에 Guest OS 전체를 가상화한다. 이 방식은 사용법도 간단하고 여러가지 운영체제를 가상화할 수 있지만 무겁고 느리기 때문에 운영환경의 사용에는 적합하지 않았다.</p><p><img src="https://miro.medium.com/max/862/1*wOBkzBpi1Hl9Nr__Jszplg.png" alt="d11"></p><p>이후 CPU의 가상화 기술을 이용한 반가상화 방식이 등장한다. Guest OS가 필요하지만 전체 OS를 가상화하는 방식이 아니어서 성능은 향상되었다. 이 기술은 OpenStack, AWS 등의 클라우드 서비스의 가상 컴퓨터 기술의 기반이 되었다.</p><p>전가상화, 반가상화 모두 성능 문제가 있었다. 이를 개선한 프로세스 격리 방식이 등장한다. 리눅스에서 리눅스 컨테이너라고 하며 단순하게 프로세스를 격리시키는 방식이기 때문에 가볍고 빠르게 동작한다. CPU나 메모리 등의 자원을 프로세스가 필요한 만큼만 할당하고 더 필요하면 그때마다 추가적으로 할당하기 때문에 성능적인 손실이 거의 없었다.</p><p>하나의 서버에 다수의 컨테이너를 실행하면 서로 영향을 주지 않고 독립적으로 실행된다. 실행 중인 컨테이너에 접속하며 명령어 입력, 패키지 설치, 사용자 추가 등 모든 작업을 할 수 있다. 컨테이너를 만드는 시간은 길어야 2초로 가상머신보다 훨씬 빠르다.</p><p>이 전에도 프로세스 격리 방식의 가상화 기술(LXC, Jail 등)이 있었지만 성공하지는 못했다. 도커는 LXC를 기반으로 시작해서 이 후 자체적인 libcontainer 기술을 사용했고 runC 기술에 합쳐졌다. 도커가 성공한 이유는 존재하는 좋은 기술들을 잘 포장해서 오픈 소스로 배포했기 때문이 아닐까.</p><h3 id="Image-Container-…"><a href="#Image-Container-…" class="headerlink" title="Image, Container, …"></a>Image, Container, …</h3><p>도커에서 가장 중요한 개념은 컨테이너, 이미지이다. 이미지는 컨테이너 실행에 필요한 파일, 설정값을 모두 포함하고 있는 것이고 변하지 않는다. 이미지를 실행한 것이 컨테이너이고 여기서 추가, 변화되는 값은 컨테이너에 저장된다. 같은 이미지로 다수의 컨테이너를 생성할 수 있고 컨테이너의 변화가 생겨도 이미지에는 영향을 주지 않는다.</p><p>예를 들어 CentOS 이미지는 CentOS를 실행하기 위한 모든 파일, 설정값을 가지고 있고, Tensorflow 이미지 안에는 Tensorflow, Python, Jupyter 등 딥 러닝에 필요한 환경이 모두 들어가 있다. 이미지는 컨테이너를 실행하기 위한 모든 정보를 가지고 있기 때문에 개발 환경 등의 구축을 위해서 이것저것 설치하고 설정할 필요가 없다. 새로운 서버가 추가되면 만들어 놓은 이미지를 다운받고 컨테이너만 생성하면 된다.</p><p>도커 이미지는 Dockerhub에서 업로드, 다운로드 할 수도 있다. 현재 공개된 이미지는 50만개가 넘고 누구나 쉽게 명령어를 이용하여 이미지를 만들고 배포하고(push) 다운로드(pull)받을 수 있다.</p><h3 id="Layer"><a href="#Layer" class="headerlink" title="Layer"></a>Layer</h3><p>도커 이미지는 컨테이너 실행에 대한 모든 정보를 담고 있기 때문에 용량이 매우 크다. 따라서 기존의 이미지에 파일 하나를 추가했다고 수백메가가 넘어가는 이미지를 다시 다운로드한다면 매우 비효율적일 수 밖에 없다.</p><p>도커는 레이어; Layer라는 개념을 사용한다. 유니온 파일 시스템을 이용하여 다수의 레이어를 하나의 파일시스템으로 사용할 수 있게 해준다. 이미지는 여러 개의 읽기 전용 레이어(Read-only Layer)로 구성되고 파일에 변화(추가, 수정)가 생기면 새로운 레이어가 생성된다.</p><p>예를 들어 CentOS 이미지가 C1 + C2 레이어의 집합이라면 이 이미지에서 nginx가 구동되는 환경의 이미지 레이어는 C1 + C2 + nginx 가 된다. 이런 식으로 기존의 이미지 레이어 위에 레이어가 추가되는 방식으로 최소한의 용량을 사용할 수 있게 된다. 여러대의 서버에 배포하는 것을 감안하면 엄청나게 영리한 설계이다.</p><h3 id="도입을-마치며"><a href="#도입을-마치며" class="headerlink" title="도입을 마치며"></a>도입을 마치며</h3><p>도커를 기반으로 한 오픈소스 프로젝트는 수십만개가 넘어가고 굉장히 활발히 진행되고 있다. 훌륭한 생테계를 기반으로 클라우드 컨테이너 세계에서 de facto(사실상 표준)가 되었다. 이번에는 도커에 대한 전반적인 역사와 개념을 매우 얕게 정리해보았는데 다음부터는 본격적으로 도커의 설치, 컨테이너 관리와 활용 등을 정리해보도록 하겠다.</p><h2 id="2-도커-설치하기"><a href="#2-도커-설치하기" class="headerlink" title="2. 도커 설치하기"></a>2. 도커 설치하기</h2><p>도커는 소스를 컴파일해서 설치하는 방법, 자동 설치 스크립트를 사용하는 방법, 리눅스 배포판의 패키지로 설치하는 방법이 있다. 소스를 컴파일해서 설치하는 방법은 복잡하니 직접 찾아보자.</p><h3 id="1-자동-설치-스크립트"><a href="#1-자동-설치-스크립트" class="headerlink" title="1. 자동 설치 스크립트"></a>1. 자동 설치 스크립트</h3><p>리눅스 버전을 자동으로 인식하여 도커 패키지를 설치해주는 스크립트이다.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo wget -qO- https:&#x2F;&#x2F;get.docker.com&#x2F; | sh</span><br></pre></td></tr></table></figure><p>이 스크립트로 도커를 설치하면 hello-world 이미지도 같이 설치되는데, 사용하지 않으므로 삭제하도록 하자.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo docker rm &#39;sudo docker ps -aq&#39;</span><br><span class="line">sudo docker rmi hello-world</span><br></pre></td></tr></table></figure><h3 id="2-패키지-직접-설치"><a href="#2-패키지-직접-설치" class="headerlink" title="2. 패키지 직접 설치"></a>2. 패키지 직접 설치</h3><ul><li>Ubuntu<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get nistall docker.io</span><br><span class="line">sudo ln -sf &#x2F;usr&#x2F;bin&#x2F;docker.io &#x2F;usr&#x2F;local&#x2F;bin&#x2F;docker</span><br></pre></td></tr></table></figure></li></ul><p><code>/usr/bin/docker.io</code> 실행파일을 <code>/usr/local/bin/docker</code> 로 링크해서 사용</p><ul><li>CentOS7<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install docker</span><br><span class="line">sudo service docker start #Docker 서비스 실행</span><br><span class="line">sudo chkconfig docker on #부팅시 자동 실행</span><br></pre></td></tr></table></figure></li></ul><ul><li>Mac, Windows의 경우는 <a href="https://docker.com/">도커 공식홈</a>에서 받고 설치하면 되므로 다른 글을 참조하자.</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker version</span><br></pre></td></tr></table></figure><p>도커 버전 명령어를 통해 설치가 잘 되었는지 확인해보자.</p><p>이로써 Docker 설치가 끝났다!</p><h2 id="3-이미지-받아서-실행하기-ft-컨테이너-명령어-sudo-입력-안하기"><a href="#3-이미지-받아서-실행하기-ft-컨테이너-명령어-sudo-입력-안하기" class="headerlink" title="3. 이미지 받아서 실행하기 (ft. 컨테이너 명령어, sudo 입력 안하기)"></a>3. 이미지 받아서 실행하기 (ft. 컨테이너 명령어, sudo 입력 안하기)</h2><h3 id="tip-sudo-입력하지-않기"><a href="#tip-sudo-입력하지-않기" class="headerlink" title="tip. sudo 입력하지 않기"></a>tip. sudo 입력하지 않기</h3><p>docker를 쓰다보면 <code>sudo</code>를 항상 붙여줘야 하는데 이는 docker 명령을 root 권한으로 실행해야 하기 때문에 일반 계정에서는 <code>sudo</code>가 항상 붙는 것이다. 매번 입력하기 귀찮고 빠뜨릴 때도 많다. <code>sudo</code>를 입력하지 않는 방법은 2가지이다.</p><ol><li>처음부터 root 계정으로 로그인하거나 root 계정으로 전환</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo su #root 계정으로 전환</span><br></pre></td></tr></table></figure><ol start="2"><li>현재 계정을 docker 그룹에 포함</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo usermod -aG docker $&#123;USER&#125;</span><br><span class="line">sudo service docker restart</span><br></pre></td></tr></table></figure><h3 id="도커-이미지-다운로드-받아서-실행하기"><a href="#도커-이미지-다운로드-받아서-실행하기" class="headerlink" title="도커 이미지 다운로드 받아서 실행하기"></a>도커 이미지 다운로드 받아서 실행하기</h3><p>도커는 이미지를 만들거나 받아서 호스트에 저장한 후 컨테이너로 run해서 프로세스로 만든다. 무언가 실행하려면 이미지가 필요한 셈이다.</p><p>이미지를 직접 만드는 방법도 있고, docker hub를 이용해서 공식 이미지나 다른 사용자들이 만들어놓은 이미지를 다운로드받는 방법도 있다.</p><p>우선 Docker Hub에서 이미지를 받는 방법이다. 우분투 리눅스 이미지를 받아보겠다.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull ubuntu:latest</span><br></pre></td></tr></table></figure><p><code>docker pull &lt;이미지 이름&gt;:&lt;태그&gt;</code> 형식이다. <code>latest</code>를 설정하면 최신 버전을 받는다. <code>latest</code> 대신 <code>16.04</code>, <code>18.04</code>를 입력해서 태그를 지정해 줄 수도 있다.<br>이미지 이름에서 <code>username/imagename:tagname</code> 형식을 사용하면 공식 이미지가 아닌 사용자 이미지를 받는다.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br><span class="line">docker run -it --name hello ubuntu &#x2F;bin&#x2F;bash</span><br></pre></td></tr></table></figure><p>이제 docker images 명령어를 통해 이미지를 출력하여 도커 이미지가 잘 받아졌는지 확인하고 ubuntu 이미지를 컨테이너로 실행해보자.</p><p><code>docker run &lt;옵션&gt; &lt;이미지 이름&gt; &lt;실행할 파일&gt;</code> 형식이다.<br>위의 코드는 ubuntu 이미지를 컨테이너로 생성 후 이미지 안의 <code>/bin/bash</code>를 실행한다. 이미지 이름 대신 이미지 ID를 사용해도 좋다.</p><p><code>-it</code> 옵션을 사용하면 실행된 Bash 쉘에 입출력을 할 수 있다.<br><code>--name</code> 옵션을 사용하면 컨테이너 이름을 지정해줄 수 있고, 지정하지 않으면 자동으로 이름을 부여한다.</p><p>이제 <code>Host OS</code>와 완전 격리된 공간이 생성되었다. <code>cd</code>,<code>ls</code> 명령으로 확인해보면 완전 분리된 공간임을 알 수 있다. <code>exit</code>를 입력하면 Bash 쉘에서 빠져나온다. (도커 -&gt; HostOS)</p><p>저기서 만든 컨테이너에서 <code>exit</code>를 입력하면 <code>/bin/bash</code>파일을 직접 실행했기 때문에 컨테이너가 정지상태로 바뀐다.</p><p>여기서 컨테이너의 상태가 나왔는데, <strong>컨테이너의 상태나 시작, 종료</strong> 등은 어떻게 해야할까?</p><h3 id="컨테이너-관련-명령어"><a href="#컨테이너-관련-명령어" class="headerlink" title="컨테이너 관련 명령어"></a>컨테이너 관련 명령어</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker ps -a #모든 컨테이너 출력(정지 컨테이너 포함)</span><br><span class="line">docker ps #실행 중인 컨테이너만 출력</span><br><span class="line">docker start hello #hello 이름의 컨테이너 시작</span><br><span class="line">docker restart hello #hello 이름의 컨테이너 재시작(재부팅)</span><br><span class="line">docker attach hello #컨테이너에 접속(bash 쉘 접속)</span><br><span class="line">docker stop hello #hello 이름의 컨테이너 종료</span><br><span class="line">docker rm hello #hello 이름의 컨테이너 삭제</span><br><span class="line">docker rm -f hello #hello 이름의 컨테이너 강제삭제</span><br></pre></td></tr></table></figure><p>여기서 컨테이너를 삭제하는 명령어는 <code>rm</code>이고, 이미지를 삭제하는 명령어는 <code>rmi</code>를 쓰면 된다.</p><p>우분투 공식 이미지를 받아서 컨테이너화 시키고 그 컨테이너를 시작, 종료하는 명령어도 알게 되었다. 다음에는 나만의 Docker 이미지를 생성해보도록 하겠다.</p><h2 id="4-나만의-이미지-생성하기-ft-Dockerfile"><a href="#4-나만의-이미지-생성하기-ft-Dockerfile" class="headerlink" title="4. 나만의 이미지 생성하기(ft. Dockerfile)"></a>4. 나만의 이미지 생성하기(ft. Dockerfile)</h2><p>이전에 <code>Docker Hub</code>에서 만들어놓은 이미지를 다운로드 받아서 구동하는 것을 다뤘는데, 이번에는 <code>Dockerfile</code>을 직접 짜서 나만의 이미지를 만들어보려고 한다.</p><h3 id="들어가기-전에"><a href="#들어가기-전에" class="headerlink" title="들어가기 전에,"></a>들어가기 전에,</h3><p>사실 이 부분에 대해서 이해가 많이 어려웠다. <code>Container</code>에서 필요한 프로그램들을 다운로드 받고 <code>commit</code> 명령어를 사용해서 이미지를 만들어도 될텐데, 왜 굳이 <code>Dockerfile</code>을 bash 명령어를 써가며 이미지를 빌드해야 되는지 몰랐다.</p><p>그렇게 찾아본 결과 <code>commit</code> 명령어를 사용해서 이미지를 생성하는 방법은 실무에서 거의 쓰이지 않는다고 한다. 패키지 업데이트도 힘들고, 버전 관리도 까다로워서 <code>Dockerfile</code>을 파일화해서 관리하는 것이 <strong>버전 관리나 패키지 업데이트</strong> 등의 면에서도 우월하다는 것이다.</p><h3 id="이제-Dockerfile을-만들어보자"><a href="#이제-Dockerfile을-만들어보자" class="headerlink" title="이제 Dockerfile을 만들어보자."></a>이제 <code>Dockerfile</code>을 만들어보자.</h3><p>Dockerfile은 Docker 이미지 설정 파일이다. 이 파일에 설정된 내용대로 이미지를 생성한다. 먼저 example 디렉토리를 생성한 뒤 해당 디렉토리로 이동한다. 모든 빌드와 관련된 파일들이 한 폴더(example)에서 이루어진다.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir example</span><br><span class="line">cd example</span><br></pre></td></tr></table></figure><p>이번에 다루는 이미지 빌드는 모든 과정을 Dockerfile과 쉘 스크립트 파일로 통합하는 방법이다.<br>그러면 <code>build-run.sh</code> 파일을 만들고 인자를 전달해서 실행하면 이미지를 만들고 컨테이너로 run까지 <em>one-click</em>으로 할 수 있게 된다.</p><h3 id="Dockerfile-관련-명령어"><a href="#Dockerfile-관련-명령어" class="headerlink" title="Dockerfile 관련 명령어"></a>Dockerfile 관련 명령어</h3><p><code>Dockerfile</code>을 만들기 전에 필요한 명령어들을 몇 개 알아보자.</p><h4 id="FROM"><a href="#FROM" class="headerlink" title="FROM"></a>FROM</h4><p>어떤 이미지를 기반으로 할지 설정한다. Docker 이미지는 기존에 만들어진 이미지를 기반으로 생성한다. 만약 완전히 새로운 이미지를 생성하고 싶으면(“맨 땅에서 시작한다”) <code>FROM scratch</code>를 쓰면 된다.</p><h4 id="MAINTAINER"><a href="#MAINTAINER" class="headerlink" title="MAINTAINER"></a>MAINTAINER</h4><p>메인테이너(제작자) 정보이다. Author(저자)라고 생각하면 된다.</p><h4 id="RUN"><a href="#RUN" class="headerlink" title="RUN"></a>RUN</h4><p>쉘 스크립트/명령을 실행한다.<br>이미지 생성 중에는 사용자 입력을 받을 수 없다. 그래서 <code>apt-get install</code> 명령어를 사용할 경우 <code>-y</code> 옵션을 붙여야 한다.</p><h4 id="VOLUME"><a href="#VOLUME" class="headerlink" title="VOLUME"></a>VOLUME</h4><p>호스트와 공유할 디렉터리 목록이다. <code>docker run</code> 명령어에서 <code>-v</code> 옵션으로 설정할 수도 있다.</p><h4 id="ADD"><a href="#ADD" class="headerlink" title="ADD"></a>ADD</h4><p>빌드시에 주어진 컨텍스트에서 첫번째 인자로 주어진 파일, 폴더를 두번째 인자로 주어진 컨테이너 경로에 추가한다.</p><h4 id="CMD"><a href="#CMD" class="headerlink" title="CMD"></a>CMD</h4><p>컨테이너가 시작되었을 때 실행할 실행 파일/쉘 스크립트이다.</p><h4 id="EXPOSE"><a href="#EXPOSE" class="headerlink" title="EXPOSE"></a>EXPOSE</h4><p>호스트와 연결할 포트 번호이다. 외부와 통신을 가능하게 노출시켜 준다. 기본적으로 컨테이너 실행시 <code>docker run -p</code> 옵션을 주게 되면 암묵적으로 <code>EXPOSE</code>가 된다.</p><p>이 명령어들을 바탕으로 <code>ubuntu 18.04</code> 기반의 <code>xrdp</code>, <code>vim</code> 등의 필수 패키지들이 설치된 나만의 우분투 이미지 <code>Dockerfile</code>을 만들어 보았다.</p><p><code>Dockerfile</code></p><figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> ubuntu:<span class="number">18.04</span></span><br><span class="line"><span class="comment">#set root password</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> <span class="built_in">echo</span> <span class="string">&quot;root:ubuntu&quot;</span> | chpasswd</span></span><br><span class="line"><span class="comment"># install packages</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apt-get update \</span></span><br><span class="line"><span class="bash">    &amp;&amp; apt-get install --yes --force-yes --no-install-recommends \</span></span><br><span class="line"><span class="bash">        sudo \</span></span><br><span class="line"><span class="bash">        software-properties-common \</span></span><br><span class="line"><span class="bash">        xorg \</span></span><br><span class="line"><span class="bash">        xserver-xorg \</span></span><br><span class="line"><span class="bash">        xfce4 \</span></span><br><span class="line"><span class="bash">        gnome-themes-standard \</span></span><br><span class="line"><span class="bash">        gtk2-engines-pixbuf \</span></span><br><span class="line"><span class="bash">        file-roller \</span></span><br><span class="line"><span class="bash">        evince \</span></span><br><span class="line"><span class="bash">        gpicview \</span></span><br><span class="line"><span class="bash">        leafpad \</span></span><br><span class="line"><span class="bash">        xfce4-whiskermenu-plugin \</span></span><br><span class="line"><span class="bash">        ttf-ubuntu-font-family \</span></span><br><span class="line"><span class="bash">        dbus-x11 \</span></span><br><span class="line"><span class="bash">        vnc4server \</span></span><br><span class="line"><span class="bash">        vim \</span></span><br><span class="line"><span class="bash">        xfce4-terminal \</span></span><br><span class="line"><span class="bash">        xrdp \</span></span><br><span class="line"><span class="bash">        xorgxrdp</span></span><br><span class="line"><span class="comment"># add the user and designate sudo authority</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> adduser ubuntu</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> <span class="built_in">echo</span> <span class="string">&quot;ubuntu:ubuntu&quot;</span> | chpasswd</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> <span class="built_in">echo</span> <span class="string">&quot;ubuntu ALL=(ALL:ALL) ALL&quot;</span> &gt;&gt; /etc/sudoers</span></span><br><span class="line"><span class="comment">#set the port number of xrdp</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> sed -i <span class="string">&#x27;s/3389/port_number/&#x27;</span> /etc/xrdp/xrdp.ini</span></span><br><span class="line"><span class="comment">#install xubuntu-desktop</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apt-get install --yes --force-yes --no-install-recommends \</span></span><br><span class="line"><span class="bash">        xubuntu-desktop \</span></span><br><span class="line"><span class="bash">    &amp;&amp; apt-get clean \</span></span><br><span class="line"><span class="bash">    &amp;&amp; rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*</span></span><br><span class="line"><span class="comment"># insert entrypoint.sh and set ENTRYPOINT</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> entrypoint.sh /entrypoint.sh</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="bash"> /entrypoint.sh</span></span><br></pre></td></tr></table></figure><p>여기서</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">RUN sed -i &#39;s&#x2F;3389&#x2F;port_number&#x2F;&#39; &#x2F;etc&#x2F;xrdp&#x2F;xrdp.ini</span><br><span class="line">cs</span><br></pre></td></tr></table></figure><p><code>sed</code> 명령어는 파일에 있는 특정 단어를 찾아서 다른 단어로 바꾸는 역할을 한다.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ENTRYPOINT &#x2F;entrypoint.sh</span><br></pre></td></tr></table></figure><p><code>ENTRYPOINT</code> 명령어는 컨테이너가 처음 실행될 때(run/start 시) 한번 수행되는 스크립트를 지정한다. 따라서 이미지를 빌드하고 컨테이너로 run하면 <code>entrypoint.sh</code> 쉘 스크립트가 실행된다.</p><p><code>entrypoint.sh</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line"># create a dbus system daemon</span><br><span class="line">service dbus start</span><br><span class="line"># create the sock dir properly</span><br><span class="line">&#x2F;bin&#x2F;sh &#x2F;usr&#x2F;share&#x2F;xrdp&#x2F;socksetup</span><br><span class="line"># run xrdp and xrdp-sesman in the foreground so the logs show in docker</span><br><span class="line">xrdp-sesman -ns &amp;</span><br><span class="line">xrdp -ns &amp;</span><br><span class="line"># run shell for interface</span><br><span class="line">&#x2F;bin&#x2F;bash</span><br></pre></td></tr></table></figure><p><code>dbus</code>, <code>xrdp</code> 서비스를 위한 <code>entrypoint</code> 설정이다.</p><p>이제 이미지 빌드에 필요한 Dockerfile, entrypoint.sh를 만들었으니 docker run에 필요한 최종 파일인 <code>build-run.sh</code> 파일을 만들어보자.</p><p><code>build-run.sh</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line">#edit the port number in Dockerfile</span><br><span class="line">sed -i &#39;s&#x2F;port_number&#x2F;&#39;$1&#39;&#x2F;&#39; .&#x2F;Dockerfile</span><br><span class="line">#start building image from Dockerfile</span><br><span class="line">docker build -t $2 .</span><br><span class="line">#run container from built image</span><br><span class="line">docker container run -d -it --name $3 -p $1:$1 $2</span><br><span class="line">docker container start $3</span><br><span class="line">#return Dockerfile into first state</span><br><span class="line">sed -i &#39;s&#x2F;&#39;$1&#39;&#x2F;port_number&#x2F;&#39; .&#x2F;Dockerfile</span><br></pre></td></tr></table></figure><p><code>$1, $2, $3</code>은 <code>build-run.sh</code>의 인자 번호이다.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;build-run.sh [포트번호] [이미지 이름] [컨테이너 이름]</span><br></pre></td></tr></table></figure><p>위 명령어를 실행하게 되면 해당 포트 번호, 이미지 이름, 컨테이너 이름으로 이미지 빌드, 실행(run)까지 완료하게 된다.</p><p>이미지 빌드에는 시간이 다소 걸린다. 잘 참고 기다리면 나만의 이미지가 생성된다. 이 이미지를 도커 허브에 올려보고 다른 os 기반에서 다운로드 받아서 컨테이너에 올려보자.</p><h2 id="5-도커-살펴보기-이미지-컨테이너-관련-명령어"><a href="#5-도커-살펴보기-이미지-컨테이너-관련-명령어" class="headerlink" title="5. 도커 살펴보기 (이미지, 컨테이너 관련 명령어)"></a>5. 도커 살펴보기 (이미지, 컨테이너 관련 명령어)</h2><p>지금까지 기본적인 명령어와 이미지 생성 방법을 알아보았다. 이제 이미지, 컨테이너 정보를 조회하는 방법, 컨테이너에서 파일 꺼내기, 변경된 파일을 확인하기, 변경 사항을 이미지로 저장하는 방법을 알아보자.</p><h4 id="history"><a href="#history" class="headerlink" title="history"></a>history</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker history hello:0.1</span><br></pre></td></tr></table></figure><p><code>docker history &lt;이미지 이름&gt;:&lt;태그&gt;</code> 형식이다. 이미지 이름 대신 ID를 사용할 수도 있다.</p><h4 id="cp"><a href="#cp" class="headerlink" title="cp"></a>cp</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker cp hello:&#x2F;etc&#x2F;nginx&#x2F;nginx.conf .&#x2F;</span><br></pre></td></tr></table></figure><p><code>docker cp &lt;컨테이너 이름&gt;:&lt;경로&gt; &lt;호스트 경로&gt;</code> 형식이다. 호스트 경로에 컨테이너 내부 파일 <code>nginx.conf</code> 파일이 복사된다.</p><h4 id="commit"><a href="#commit" class="headerlink" title="commit"></a>commit</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker commit -a &quot;zini &lt;zinirun.blogspot.com&gt;&quot; -m &quot;add hello.txt&quot; hello hello:0.2</span><br></pre></td></tr></table></figure><p><code>docker commit &lt;옵션&gt; &lt;컨테이너 이름&gt; &lt;이미지 이름&gt;:&lt;태그&gt;</code> 형식이다. 컨테이너의 변경 사항을 이미지 파일로 생성한다. -a 옵션은 커밋한 사용자 정보, -m 옵션은 로그 메시지를 설정한다. 그렇게 hello 컨테이너를 <code>hello:0.2</code> 이미지로 생성하게 된다.</p><h4 id="diff"><a href="#diff" class="headerlink" title="diff"></a>diff</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker diff hello</span><br></pre></td></tr></table></figure><p><code>docker diff &lt;컨테이너 이름&gt;</code> 형식이다. <code>컨테이너 ID</code>를 사용해도 된다. 출력하게 되면</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ubuntu@zini-01:&#x2F;home&#x2F;zini&#x2F;doc_ex$ docker diff hello</span><br><span class="line">C &#x2F;run</span><br><span class="line">A &#x2F;run&#x2F;xrdp</span><br><span class="line">A &#x2F;run&#x2F;xrdp&#x2F;sockdir</span><br><span class="line">A &#x2F;run&#x2F;dbus</span><br><span class="line">A &#x2F;run&#x2F;dbus&#x2F;pid</span><br><span class="line">A &#x2F;run&#x2F;dbus&#x2F;system_bus_socket</span><br><span class="line">C &#x2F;tmp</span><br><span class="line">A &#x2F;tmp&#x2F;.X11-unix</span><br><span class="line">C &#x2F;var</span><br><span class="line">C &#x2F;var&#x2F;log</span><br><span class="line">C &#x2F;var&#x2F;log&#x2F;xrdp.log</span><br><span class="line">C &#x2F;var&#x2F;log&#x2F;xrdp-sesman.log</span><br></pre></td></tr></table></figure><p>변경된 파일 목록을 출력하는데 <code>A</code>는 추가된 파일, <code>C</code>는 변경된 파일, <code>D</code>는 삭제된 파일이다.</p><h4 id="inspect"><a href="#inspect" class="headerlink" title="inspect"></a>inspect</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect hello</span><br></pre></td></tr></table></figure><p><code>docker inspect &lt;이미지 or 컨테이너 이름&gt;</code> 형식이다. ID를 사용해도 된다. 이미지나 컨테이너의 세부 정보를 출력한다.</p><h2 id="6-DockerHub-사용하기"><a href="#6-DockerHub-사용하기" class="headerlink" title="6. DockerHub 사용하기"></a>6. DockerHub 사용하기</h2><p>이번에는 Docker를 좀 더 다양하게 활용하는 방법, <code>Docker Hub</code> 사용법을 알아보겠다.</p><h3 id="Docker-Login"><a href="#Docker-Login" class="headerlink" title="Docker Login"></a>Docker Login</h3><p>우선 <a href="https://dockerhub.com/">Docker Hub</a>에 로그인 후 회원가입하자.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker login</span><br></pre></td></tr></table></figure><p>명령어를 입력하여 docker 계정으로 로그인하자.</p><h3 id="로컬에-이미지-저장하기"><a href="#로컬에-이미지-저장하기" class="headerlink" title="로컬에 이미지 저장하기"></a>로컬에 이미지 저장하기</h3><p>Docker 레지스트리 서버도 Docker Hub에 이미지로 제공된다. 먼저 레지스트리 이미지를 받는다.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull registry:latest</span><br></pre></td></tr></table></figure><p><code>registry:latest</code> 이미지를 컨테이너로 실행한다.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 5000:5000 hello-registry \</span><br><span class="line">    -v &#x2F;tmp&#x2F;registry:&#x2F;tmp&#x2F;registry \</span><br><span class="line">    registry:latest</span><br></pre></td></tr></table></figure><p>이 명령어를 실행하면 이미지 파일이 호스트의 <code>/tmp/registry</code> 디렉터리에 저장된다.</p><h3 id="push-명령으로-이미지-올리기"><a href="#push-명령으로-이미지-올리기" class="headerlink" title="push 명령으로 이미지 올리기"></a>push 명령으로 이미지 올리기</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker tag hello:0.1 zini&#x2F;hello:0.1</span><br><span class="line">docker push zini&#x2F;hello:0.1</span><br></pre></td></tr></table></figure><p><code>docker tag &lt;이미지 이름&gt;:&lt;태그&gt; &lt;Docker 사용자명/레지스트리 URL&gt;/&lt;이미지 이름&gt;:&lt;태그&gt;</code> 형식이다.</p><p><code>docker hub</code>에 업로드할 때는 이미지 이름의 형식을 맞춰줘야 한다. 도커허브의 아이디가 <code>zini</code>라면 <code>zini/이미지이름:태그</code> 형식으로 <code>tag</code> 명령어를 이용하여 이미지 이름을 바꿔주고 <code>push</code>하면 업로드 된다.</p><h3 id="pull-명령으로-이미지-받기"><a href="#pull-명령으로-이미지-받기" class="headerlink" title="pull 명령으로 이미지 받기"></a>pull 명령으로 이미지 받기</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull zini&#x2F;hello:0.1</span><br></pre></td></tr></table></figure><p>이전에서도 우분투 공식 이미지를 받을 때</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull ubuntu:latest</span><br></pre></td></tr></table></figure><p>명령어를 사용했을 것이다. 우분투는 공식 이미지이기 때문에 URL/ID 필요없이 <code>&lt;이미지이름&gt;:&lt;태그&gt;</code> 형식을 사용하면 된다. 방금 <code>push</code>로 올린 이미지를 <code>pull</code>로 받아보자.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ubuntu@zini-01:&#x2F;home&#x2F;zini&#x2F;doc_ex$ docker images</span><br><span class="line">REPOSITORY              TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">zini&#x2F;hello           0.1                 e100ad1021f7        22 hours ago        1.17GB</span><br></pre></td></tr></table></figure><p><code>docker images</code> 명령어로 확인하면 이미지가 받아진 것을 확인할 수 있다.</p><p>이제 이 이미지를 <strong>삭제</strong>해보자.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi zini&#x2F;hello:0.1</span><br></pre></td></tr></table></figure><p><code>rmi</code> 명령어를 사용하면 이미지를 삭제할 수 있다. 강제로 삭제할 경우 <code>-f</code> 옵션을 추가하면 된다.</p><h2 id="7-도커-컨테이너-연결하기-nginX-mongoDB"><a href="#7-도커-컨테이너-연결하기-nginX-mongoDB" class="headerlink" title="7. 도커 컨테이너 연결하기 (nginX, mongoDB)"></a>7. 도커 컨테이너 연결하기 (nginX, mongoDB)</h2><p>도커로 이미지를 생성할 때 필요한 프로그램, 예를 들면 웹 서버, DB 등의 프로그램들을 모두 설치할 수도 있지만 보통은 프로그램별로 이미지를 생성 후 컨테이너화해서 연결한다.</p><p>이번에는 nginx 웹 서버와 <code>MongoDB</code>의 이미지를 생성 후 연결해보도록 하겠다.</p><p>우선 <code>MongoDB</code> 이미지를 생성한다.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name db -d mongo</span><br></pre></td></tr></table></figure><p>필자의 경우 80 포트는 이미 우분투 host os에서 nginx 서버로 돌아가고 있기 때문에 8888 포트를 열어주어서 도커의 80 포트와 연결하였다.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name web -d -p 8888:80 --link db:db nginx</span><br></pre></td></tr></table></figure><p><code>-p 8888:80</code> 에 주목하자. <code>-p</code> 옵션은 호스트의 포트와 도커의 가상 포트를 연결한다. 형식은 <code>-p &lt;Host Port&gt;:&lt;Docker Port&gt;</code>이다. 필자는 이 부분을 모르고 <code>8888:8888</code>로 연결했다가 같이 스터디하는 친구에게 혼났다. 도커에 대한 개념을 확실하게 알고 했어야 했는데..</p><p>이 명령어를 실행하면 <code>nginx</code> 최신 이미지를 받고 앞서 실행한 db 컨테이너 <code>mongoDB</code>와 연결하여 <code>web</code> 이라는 이름의 <code>nginx</code> 서버를 컨테이너로 실행한다.</p><p>일반적으로 IP를 통해서 브라우저로 접속할 경우 포트를 입력하지 않으면 80 포트로 자동 접속한다. nginx 서버를 그렇게 연결하고 싶다면 <code>-p 80:80</code> 옵션으로 실행하면 된다.</p><p><img src="https://1.bp.blogspot.com/-pK1I_-ZRbvA/XiWMMlctOCI/AAAAAAAAAQo/7LMipZuSFp8KAuAnnGazBvdzBFedfQ8UwCLcBGAsYHQ/s640/%25EA%25B5%25AC%25EB%258F%2599%25ED%2599%2595%25EC%259D%25B8.png" alt="d71"></p><p>브라우저로 <code>&lt;IP&gt;:&lt;호스트 연결 포트&gt;</code>로 접속하면 nginx 기본 페이지가 출력됨을 확인할 수 있다!</p><p>이 <code>nginx</code> 컨테이너는 <code>mongoDB</code> 컨테이너와 연결되어 있어서 <code>web</code> 컨테이너 안에서 <code>db:27017</code> 주소로 <code>db</code> 컨테이너의 <code>mongoDB</code>에 접속할 수 있다.</p><h2 id="8-Git-Docker로-앱-배포하기"><a href="#8-Git-Docker로-앱-배포하기" class="headerlink" title="8. Git, Docker로 앱 배포하기"></a>8. Git, Docker로 앱 배포하기</h2><p>서버를 운영하고 애플리케이션을 배포하는 방법은 서비스 환경, 구축하는 사람에 따라 다양한 방법이 나올 수 있다. 이번에는 분산형 버전 관리 시스템 Git과 Docker를 이용한 애플리케이션 배포 방법을 알아보겠다.</p><p><em>참고 도서: 가장 빨리 만나는 Docker (이재홍)</em></p><h3 id="서버-한-대에-애플리케이션-배포하기"><a href="#서버-한-대에-애플리케이션-배포하기" class="headerlink" title="서버 한 대에 애플리케이션 배포하기"></a>서버 한 대에 애플리케이션 배포하기</h3><p>대략적인 순서는 다음과 같다.</p><ol><li>개발자 PC에서 애플리케이션 개발</li><li>git push 명령으로 소스를 서버에 업로드</li><li>서버에서 저장소에 git push 명령이 발생하며 git hook을 실행</li><li>git hook에서 도커 이미지를 생성, 이미지를 컨테이너로 실행</li></ol><p>이제 본격적으로 배포하는 과정을 알아보자.</p><ol><li>개발자 PC에서 <a href="http://git-scm.com/">Git 설치</a>, 저장소 생성<br>개발자 PC에 <code>Git</code>을 설치한다.</li></ol><p><em>우분투, CentOS에서 install git 명령어를 사용해도 상관없다. 필자는 윈도우의 Git Bash로 실습하겠다.</em></p><p><code>Git Bash</code>를 실행하고 명령어로 Git 저장소를 생성하고, 저장소 디렉토리로 이동한다.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git init exampleapp</span><br><span class="line">cd exampleapp</span><br></pre></td></tr></table></figure><p><code>git config</code> 명령으로 이메일, 이름을 설정한다.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.email zini@example.com</span><br><span class="line">git config --global user.name &quot;zini&quot;</span><br></pre></td></tr></table></figure><ol start="2"><li>개발자 PC에서 <code>Node.js</code>로 웹 서버 작성 및 도커파일(Dockerfile) 작성<br>개발자 PC에서 간단히 <code>Node.js</code>로 웹서버를 작성한다. 그 내용을 <code>app.js</code>로 저장한다.</li></ol><p><code>app.js</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var express &#x3D; require(&#39;express&#39;);</span><br><span class="line">var app &#x3D; express();</span><br><span class="line"> </span><br><span class="line">app.get([&#39;&#x2F;&#39;, &#39;&#x2F;index.html&#39;], function (req, res) &#123;</span><br><span class="line">  res.send(&#39;Hello Docker&#39;);</span><br><span class="line">&#125;);</span><br><span class="line"> </span><br><span class="line">app.listen(80);</span><br></pre></td></tr></table></figure><p><code>npm</code> 패키지 사용을 위해 다음과 같이 작성하고 <code>package.json</code>로 저장한다.</p><p><code>package.json</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;exampleapp&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;description&quot;</span>: <span class="string">&quot;Hello Docker&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;version&quot;</span>: <span class="string">&quot;0.0.1&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;dependencies&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;express&quot;</span>: <span class="string">&quot;4.4.x&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>이제 <code>Dockerfile</code>을 작성하자. 서버에서 도커 이미지를 생성할 수 있도록 개발자 PC에서 <code>Dockerfile</code>을 작성한다. 다음 내용을 <code>Dockerfile</code>로 저장한다.</p><p><code>Dockerfile</code></p><figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> ubuntu:<span class="number">14.04</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apt-get update</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apt-get install -y nodejs npm</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> app.js /var/www/app.js</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> package.json /var/www/package.json</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /var/www</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> npm install</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> nodejs app.js</span></span><br></pre></td></tr></table></figure><p>모든 파일(js, json, Dockefile)은 git 디렉토리의 <code>exampleapp</code>에 위치시킨다.</p><p><code>git add</code>, <code>git commit</code> 명령으로 개발자 PC의 <code>exampleapp</code> 저장소에 파일을 커밋한다.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git add app.js package.json</span><br><span class="line">git commit -m &quot;add source&quot;</span><br><span class="line">git add Dockerfile</span><br><span class="line">git commit -m &quot;add Dockerfile&quot;</span><br></pre></td></tr></table></figure><ol start="3"><li>개발자 PC에서 SSH 키 생성<br>개발자 PC에서 <code>ssh-keygen</code> 명령을 실행하여 SSH키를 생성한다.</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen</span><br></pre></td></tr></table></figure><p>명령어 실행시 나오는 문장에서는 모두 Enter로 넘어간다.<br>이제 <code>/home/(사용자 계정)/.ssh</code> 디렉토리에 <code>id_rsa.pub</code>, <code>id_rsa.pub</code> 파일이 생성되었다.</p><ol start="4"><li>서버에 Git 설치 및 저장소 생성<br>이제 서버를 설정하자. Docker가 리눅스 전용이므로 리눅스 서버에서 작업하자.<br>필자는 우분투를 사용하겠다. 서버에 <code>Git</code>을 설치하는 것부터 시작하자.</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install git</span><br></pre></td></tr></table></figure><p>현재 리눅스 계정의 홈 디렉토리(<code>/home/&lt;사용자 계정&gt;</code>)에 <code>exampleapp</code> 저장소를 생성한다. 그리고 개발자 PC에서 push한 소스를 받을 수 있도록 <code>receive.denycurrentbranch</code>를 <code>ignore</code>로 설정한다.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git init exampleapp</span><br><span class="line">git config receive.denycurrentbranch ignore</span><br></pre></td></tr></table></figure><ol start="5"><li>서버에 Docker 설치 및 SSH 키 설정<br>이제 서버에 Docker를 설치한다. 설치되어 있다면 넘어가자.</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install docker.io</span><br><span class="line">sudo ln -sf &#x2F;usr&#x2F;bin&#x2F;docker.io &#x2F;usr&#x2F;local&#x2F;bin&#x2F;docker</span><br></pre></td></tr></table></figure><p>서버의 <code>/home/&lt;서버 사용자 계정&gt;</code> 디렉토리에 <code>.ssh</code> 디렉토리를 생성 후 권한을 설정한다.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir .ssh</span><br><span class="line">chmod 700 .ssh</span><br></pre></td></tr></table></figure><p><em>필자는 .ssh 폴더가 왜인지 모르게 이미 존재해서 따로 설정하지 않았다.</em></p><p><code>.ssh</code> 디렉토리에 <code>authorized_keys</code> 파일을 생성한다(vi 명령어로). 개발자 PC에서 생성한 <code>id_rsa.pub</code> 파일의 내용을 (메모장으로 열어) 복사해서 <code>authorized_keys</code> 파일에 붙여넣는다.</p><p><code>ssh-rsa ~</code> 형식의 내용일 것이다. <code>authorized_keys</code> 파일도 권한을 설정한다.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 600 authorized_keys</span><br></pre></td></tr></table></figure><p>이제 개발자 PC에서 비밀번호 없이 <code>git push</code> 명령을 사용할 수 있다.</p><ol start="6"><li>서버에 Git Hook 설정<br>개발자 PC에서 git push 명령으로 소스를 올리면 Docker 이미지, 컨테이너를 생성하도록 <code>Git Hook</code>을 설정한다.</li></ol><p>다음 내용을 <code>/home/&lt;서버 사용자 계정&gt;/exampleapp/.git/hooks</code> 디렉토리에 <code>post-receive</code>로 저장한다.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line"> </span><br><span class="line">APP_NAME&#x3D;exampleapp</span><br><span class="line">APP_DIR&#x3D;$HOME&#x2F;$APP_NAME</span><br><span class="line">REVISION&#x3D;$(expr substr $(git rev-parse --verify HEAD) 1 7)</span><br><span class="line"> </span><br><span class="line">GIT_WORK_TREE&#x3D;$APP_DIR git checkout -f</span><br><span class="line"> </span><br><span class="line">cd $APP_DIR</span><br><span class="line">docker build --tag $APP_NAME:$REVISION .</span><br><span class="line">docker stop $APP_NAME</span><br><span class="line">docker rm $APP_NAME</span><br><span class="line">docker run -d --name $APP_NAME -p 80:80 $APP_NAME:$REVISION</span><br></pre></td></tr></table></figure><p>이제 <code>post-receive</code> 파일에 실행권한을 부여한다.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x post-receive</span><br></pre></td></tr></table></figure><p><code>Git Hook</code> 설정이 끝났다.</p><ol start="7"><li>개발자 PC에서 소스 Push<br>이제 개발자 PC로 돌아와서 <code>exampleapp</code> 저장소 디렉토리로 이동한 뒤 <code>git remote add</code> 명령어로 <code>origin</code> 주소를 설정한다.</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin 서버사용자계정@IP주소&#x2F;도메인:exampleapp</span><br></pre></td></tr></table></figure><p><code>git push</code> 명령으로 소스를 서버에 업로드한다.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin master</span><br></pre></td></tr></table></figure><p>명령 출력 결과에서 Docker 이미지와 컨테이너가 생성되는 모습을 볼 수 있다. <code>git push</code> 명령어가 완전히 끝나면 웹 브라우저를 실행하여 IP 주소를 입력해보자. <code>Hello Docker</code>가 표시된다. 소스를 수정한 뒤 서버에 <code>Push</code> 하면 새 Docker 컨테이너가 생성된다.</p><h2 id="마치며"><a href="#마치며" class="headerlink" title="마치며"></a>마치며</h2><p>기본적인 도커의 설치, 사용부터 배포까지 알아보았다. 반년 전에 공부했던 포스팅 내용을 한번에 정리했는데 이게 나은 것 같다. 도커는 정말 무궁무진하다. 여러가지 토이 플젝이던, 큰 플젝이던 거의 90%의 웹 서비스에는 도커를 사용했다. 한번 쓸 줄 알면 다음 쓰는 건 쉽다. 한번씩 자동화 스크립트를 만들어서 배포해보면 (물론 기업에서 사용하는 스크립트와는 비교불가겠지만) 경이로움을 금치 못한다. 도커는 충분히 공부할 가치가 있는 플랫폼이라고 생각한다.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Docker-Guide&quot;&gt;&lt;a href=&quot;#Docker-Guide&quot; class=&quot;headerlink&quot; title=&quot;Docker Guide&quot;&gt;&lt;/a&gt;Docker Guide&lt;/h1&gt;&lt;img src=&quot;https://subicura.com/as</summary>
      
    
    
    
    <category term="cloud" scheme="https://zinirun.github.io/categories/cloud/"/>
    
    <category term="docker" scheme="https://zinirun.github.io/categories/cloud/docker/"/>
    
    
    <category term="docker" scheme="https://zinirun.github.io/tags/docker/"/>
    
    <category term="cloud" scheme="https://zinirun.github.io/tags/cloud/"/>
    
    <category term="linux" scheme="https://zinirun.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>NHN Toast Cloud 설명서 (구축에서 활용까지)</title>
    <link href="https://zinirun.github.io/2020/08/15/toast-a-to-z/"/>
    <id>https://zinirun.github.io/2020/08/15/toast-a-to-z/</id>
    <published>2020-08-15T12:34:53.000Z</published>
    <updated>2020-08-15T13:22:59.131Z</updated>
    
    <content type="html"><![CDATA[<h1 id="NHN-Toast-Cloud-가이드"><a href="#NHN-Toast-Cloud-가이드" class="headerlink" title="NHN Toast Cloud 가이드"></a>NHN Toast Cloud 가이드</h1><p><img src="https://www.bloter.net/wp-content/uploads/2020/07/NHN-TOAST_CI-765x353.png" alt="toast-logo"></p><p>본 글은 단국대학교의 2020년 서버 스터디에서 Toast 서버를 지원받아서 구축부터 개발, 배포환경을 구축해본 경험을 토대로 작성하였다. 원래는 <a href="http://zinirun.blogspot.com/2020/01/nhn-toast-1-instance.html">이전 블로그</a>에 시리즈(?)처럼 연재를 했었는데, 이번에 블로그 이사하는 김에 한 포스트에 기본적인 설명서의 느낌으로 다시 게시한다.</p><p>클라우드 서비스 시장의 생태계는 압도적으로 <a href="https://aws.amazon.com/">Amazon AWS</a>가 점유하고 있다. EC2, Lambda 등의 정말 세부적이고 <code>devOps</code>에 최적화된 선두주자이기에 대부분의 서버 인프라를 <code>aws</code>로 구축하는 경우가 많다. <code>Toast Cloud</code>는 내 클라우드 공부의 첫 번째 재료(?)였는데, 생각보다 편하고 꽤 많은 서비스 <strong>(KB금융그룹, EBS, CJ ENM, GS SHOP, 요기요 등 국내 위주)</strong> 에서 사용중인 클라우드였다.</p><p>이제 본격적인 NHN Toast Cloud 가이드를 시작한다.<br><strong>기본적으로 <code>Instance</code>에는 <code>Ubuntu</code>를 사용하였다.</strong></p><h2 id="1-Instance-생성"><a href="#1-Instance-생성" class="headerlink" title="1. Instance 생성"></a>1. Instance 생성</h2><p><img src="https://1.bp.blogspot.com/-PodZj7F8YdI/XhG56u3rfzI/AAAAAAAAALo/Hldjc9B6quMYCayXFWwi4qx8FfljtEkJACLcBGAsYHQ/s320/1%25EC%2584%259C%25EB%25B9%2584%25EC%258A%25A4%25EC%2583%259D%25EC%2584%25B1.JPG" alt="t11"></p><p>토스트 프로젝트를 생성한다.<br>필자의 경우는 학교측에서 1인당 프로젝트 1개를 지원해주었다.</p><p><img src="https://1.bp.blogspot.com/-dcePQqooGVk/XhG56iqAaxI/AAAAAAAAALk/PRkEpKG_qosBiBxQJIk0uM1hosEAEo56wCLcBGAsYHQ/s640/2%25EC%259D%25B8%25EC%258A%25A4%25ED%2584%25B4%25EC%258A%25A4%25ED%2581%25B4%25EB%25A6%25AD.JPG" alt="t12"></p><p>메뉴에서 우측의 Compute - Instance를 선택한다.</p><p><img src="https://1.bp.blogspot.com/-8HYUI-fSVjE/XhG57eSiUpI/AAAAAAAAALs/1ut2dRuCyXAeNyNifmpcwywwgbTCvlDIgCLcBGAsYHQ/s320/3%25EC%2584%259C%25EB%25B9%2584%25EC%258A%25A4%25ED%2599%259C%25EC%2584%25B1%25ED%2599%2594.JPG" alt="t13"></p><p>서비스 활성화 확인.</p><p><img src="https://1.bp.blogspot.com/-1TbVJNr-h0M/XhG57S71JLI/AAAAAAAAALw/hT8V7V0JJnUYp4WJHL_DH6E8SwEHyTl7QCLcBGAsYHQ/s1600/4%25EC%259D%25B8%25EC%258A%25A4%25ED%2584%25B4%25EC%258A%25A4%25EC%2583%259D%25EC%2584%25B1.JPG" alt="t14"></p><p>Instance - 관리에 들어가서 인스턴스를 생성한다.</p><p><img src="https://1.bp.blogspot.com/-iZjCENyJZQA/XhG57qM6iOI/AAAAAAAAAL0/hQb4zpF4O10GYIWz34HlOHSgA9sRQJgZgCLcBGAsYHQ/s640/5%25EC%259D%25B4%25EB%25AF%25B8%25EC%25A7%2580%25EC%2584%25A0%25ED%2583%259D.JPG" alt="t15"></p><p> 원하는 운영체제가 설치된 이미지를 선택한다.<br>사용할 이미지에 따라 인스턴스 타입(flavor)이 달라지므로 가장 먼저 이미지를 선택한다.<br>필자의 경우 교수님이 정해준 Ubuntu 선택.</p><p><img src="https://1.bp.blogspot.com/-xngTO7YFjEM/XhG58AfweHI/AAAAAAAAAL4/lmxhjYguIQ4tAVNkeJUMPTZGU6lTXPg-wCLcBGAsYHQ/s640/6%25EC%259D%25B8%25EC%258A%25A4%25ED%2584%25B4%25EC%258A%25A4%25EC%25A0%2595%25EB%25B3%25B4.JPG" alt="t16"></p><p>인스턴스 정보를 입력한다.<br>인스턴스 타입은 과금이 결정되니 사용 목적과 OS를 잘 고려해서 선택한다.<br>필자의 경우 Standard 1를 선택했으나 CPU, 메모리가 턱없이 부족해서 m2.c2m4로 변경..<br>(메모리가 2GB 이하인 경우 가상머신 사용을 포기해야할 정도로 느리다..)</p><p><img src="https://1.bp.blogspot.com/-fFj4_tRAvnE/XhG58XQyEZI/AAAAAAAAAL8/ca0BSs3k1vo42z7fVysPhBdTtz35X_3TACLcBGAsYHQ/s400/7%25EB%25B3%25B4%25EC%2595%2588%25EA%25B7%25B8%25EB%25A3%25B9%25EC%2583%259D%25EC%2584%25B1.JPG" alt="t17"></p><p>인스턴스가 속할 보안 그룹을 지정한다.<br>인스턴스 1개는 여러 보안 그룹에 속할 수 있다.</p><p><img src="https://1.bp.blogspot.com/-7VD5EK1gXZw/XhG58iVEITI/AAAAAAAAAMA/st_OI9-_bhACiusKeYi1B0vuxbIXEtOFQCLcBGAsYHQ/s640/8%25EB%25B3%25B4%25EC%2595%2588%25EC%25A0%2595%25EC%25B1%2585%25EC%25B6%2594%25EA%25B0%2580.JPG" alt="t18"></p><p>SSH(포트 22)는 Putty의 접속을 위해,<br>RDP(포트 3389)는 Windows 원격 접속(가상머신) 사용을 위해서 입력했다.</p><p><img src="https://1.bp.blogspot.com/-4aHE0tuNWE4/XhG58x-rNTI/AAAAAAAAAME/hpIAie8NaxoW6nLq9bGDXMmEHRJzeOiGgCLcBGAsYHQ/s400/9%25EC%259D%25B8%25EC%258A%25A4%25ED%2584%25B4%25EC%258A%25A4%25EC%2583%259D%25EC%2584%25B1.JPG" alt="t19"></p><p>예약 스크립트는 인스턴스의 첫번째 부팅이 완료된 후 네트워크 설정 등 초기화 과정이 끝나면 실행된다. 예약 스크립트는 root 권한으로 실행된다.</p><p><img src="https://1.bp.blogspot.com/-rPN9K-i5YlY/XhG56pZAeQI/AAAAAAAAALg/cd1byF-djlExyL_IQkGGmdqqSn4PTH5NACLcBGAsYHQ/s640/10%25EC%25B5%259C%25EC%25A2%2585%25EC%2583%259D%25EC%2584%25B1.JPG" alt="t110"></p><p>인스턴스 생성을 누르는 순간 입력한 정보에 따라서 과금이 시작되니 최종 확인 후 생성하도록 한다.</p><h2 id="2-Floating-IP-생성-및-인스턴스-연결"><a href="#2-Floating-IP-생성-및-인스턴스-연결" class="headerlink" title="2. Floating IP 생성 및 인스턴스 연결"></a>2. Floating IP 생성 및 인스턴스 연결</h2><p><code>Floating IP</code>는 클라우드 플랫폼의 등장으로 생긴 개념이다.<br>클라우드 내에서 가상머신이 인터넷, 외부망에 접근하기 위해 배정받는 IP이다.</p><p><code>Floating IP</code>를 통해 사용자가 외부망에서 클라우드 플랫폼의 가상머신에 접근할 수도 있고,<br>반대로 가상머신에서 외부망으로 접근할 수 있다.<br><code>Fixed IP</code>(가상머신 생성될 때 자동 배정)와 달리 자유롭게 재할당도 가능하다.</p><p><img src="https://1.bp.blogspot.com/-2vlCz_ULjsU/XhHAADqn9RI/AAAAAAAAAMo/VZohELIgD4AsEMr_t0-sR7GNNipnQOCCQCLcBGAsYHQ/s320/1.%25EC%2583%259D%25EC%2584%25B1.JPG" alt="t21"></p><p>Instance - 플로팅 IP에서 플로팅 IP를 생성한다.</p><p><img src="https://1.bp.blogspot.com/-h2Ii90Rm7HE/XhHAAIVRHcI/AAAAAAAAAMg/toAdaCRZ2G8d0T0LEsS_a-G2PgDPmRG-ACLcBGAsYHQ/s400/2.%25EC%2583%259D%25EC%2584%25B1%25EB%25B2%2584%25ED%258A%25BC.JPG" alt="t22"></p><p>인스턴스와 같이 플로팅 IP를 생성하면 과금된다. (인스턴스 연결하지 않아도 과금)</p><p><img src="https://1.bp.blogspot.com/-4bXQTeB7llA/XhHAACWURsI/AAAAAAAAAMk/XGaXCfvwV04CTyiYqW494dUO07m6VgX9wCLcBGAsYHQ/s400/3.%25EC%2597%25B0%25EA%25B2%25B0.JPG" alt="t23"><br>인스턴스와 플로팅 IP를 연결한다.</p><p><img src="https://1.bp.blogspot.com/-h3CN9-bKyWE/XhHCv4y7yHI/AAAAAAAAANA/D_m4F6ChDmkuQODsdtmJS2pzaeE2QSmmACLcBGAsYHQ/s640/4.%25EC%259D%25B8%25EC%258A%25A4%25ED%2584%25B4%25EC%258A%25A4%25EC%2597%25B0%25EA%25B2%25B0.JPG" alt="t24"></p><p>연결할 인스턴스를 선택하고 플로팅 IP와 인스턴스를 연결한다.</p><p>이제 해당 Floating IP로 Putty, VM 등에서 플랫폼에 접근할 수 있다.</p><h2 id="3-Putty-연결"><a href="#3-Putty-연결" class="headerlink" title="3. Putty 연결"></a>3. Putty 연결</h2><p><img src="https://1.bp.blogspot.com/-PRpxL_IhrF8/XhHN-e87nSI/AAAAAAAAANQ/Ce0NTkcutEgzE91MZYlApluHY2RcQdy9gCLcBGAsYHQ/s400/1.%25EC%25A0%25A0-%25EB%25A1%259C%25EB%2593%259C.JPG" alt="t31"><br>PuTTY Key Generator (Putty 설치 시 같이 설치됨)를 실행한다.<br>연결할 인스턴스의 키페어(.PEM File)을 Load한다.<br>파일 선택 시 파일 타입을 모든 파일로 선택해야 .PEM 파일이 보인다.<br><img src="https://1.bp.blogspot.com/-K7yKYFR8hZc/XhHN-agtpYI/AAAAAAAAANU/JZOwSb0X8TwkMhGYGeKHkTT1yDPCbu7jwCLcBGAsYHQ/s400/2.%25EC%25A0%25A0-%25EC%25A0%2580%25EC%259E%25A5.JPG" alt="t32"><br>Save private key로 .ppk 파일 변환<br><img src="https://1.bp.blogspot.com/-AqnhiA-tdYk/XhHN-WMWMyI/AAAAAAAAANY/NRoUHUEClLo5LogvxpXt08-aVxsPwhhkgCLcBGAsYHQ/s400/3.%25ED%2591%25B8%25ED%258B%25B0-%25EC%2584%25B8%25EC%2585%2598.JPG" alt="t33"><br>Session에 Host name을 입력한다.<br><strong>여기서 Error가 발생했다.</strong><br>Host Name에 IP 주소만 입력하면 오류가 발생한다.<br>에러 내용과 해결은 마지막에 언급하겠다!<br><img src="https://1.bp.blogspot.com/-54daPDqy-2w/XhHN_Db_6NI/AAAAAAAAANc/q-W1S3YzY9seHfCGyYvfyI0VZbwukjXjwCLcBGAsYHQ/s400/4.%25ED%2591%25B8%25ED%258B%25B0-%25EC%25BB%25A4%25EB%2584%25A5%25EC%2585%2598-%25EB%258D%25B0%25EC%259D%25B4%25ED%2584%25B0.JPG" alt="t34"><br>Connection - Data 에서 Auto-login username을 root/ubuntu/main 으로 설정<br><img src="https://1.bp.blogspot.com/-d79Cmsl7mL0/XhHN_asqn0I/AAAAAAAAANg/eB1zsSsNg6suQLdpnBnKzYG5R-IyTndIgCLcBGAsYHQ/s400/5.%25ED%2591%25B8%25ED%258B%25B0-SSH-Auth.JPG" alt="t35"><br>Connection - SSH - Auth 에서 변환한 .ppk 파일을 로드</p><p>PuTTY 연결 정보는 Session에서 Saved Sessions에 저장해놓으면 다음부터 쉽게 연결할 수 있다. (더블클릭하면 연결)</p><p><strong>—– Error —–</strong></p><p><img src="https://1.bp.blogspot.com/-ehPvicrQiig/XhHOADpM7OI/AAAAAAAAANo/I3TEFdZEU2gwhFUFo-i0Mmj4WuOmqfhsgCLcBGAsYHQ/s400/A%25EC%2597%2590%25EB%259F%25AC.JPG" alt="t36"><br>Host Name을 IP로만 설정하고 접속 시<br>PuTTY Fatal Error : No supported authentication methods available (server sent: publickey)<br>오류가 발생한다.<br><img src="https://1.bp.blogspot.com/-EUBTon9gcoc/XhHN_Q_s-II/AAAAAAAAANk/fCiQiitb-OsofJ4rAmqkVlH_xIVut8_SwCLcBGAsYHQ/s400/A1%25EC%2597%2590%25EB%259F%25AC%25ED%2595%25B4%25EA%25B2%25B0.JPG" alt="t37"><br>이는 ubuntu의 host로 접속한다는 정보를 명시하지 않았기 때문인데<br>Host Name을 ubuntu@serverIP 형식으로 입력 후 접속하면 문제가 해결된다.</p><p>이를 해결하기 위해서 keygen의 문제인지, PuTTY가 문제인지, 키페어가 문제인지 아무리 구글링하고 찾아도 답이 나오지 않았는데 TOAST Handbook 내용을 보니 Host Name에 저런 형식으로 입력하라는 내용이 뻔히 적혀있어서 어이없는 내 실수임을 자책했다 :(</p><h2 id="4-Ubuntu-Desktop-설치-Windows에서-연결"><a href="#4-Ubuntu-Desktop-설치-Windows에서-연결" class="headerlink" title="4. Ubuntu Desktop 설치, Windows에서 연결"></a>4. Ubuntu Desktop 설치, Windows에서 연결</h2><h3 id="Ubuntu-Desktop-설치"><a href="#Ubuntu-Desktop-설치" class="headerlink" title="Ubuntu Desktop 설치"></a>Ubuntu Desktop 설치</h3><p>Ubuntu Desktop 설치 방법이다.</p><p>PuTTY의 Terminal로 인스턴스에 접속한다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 아래 명령어를 이용해서 apt-get업데이트</span></span><br><span class="line">sudo apt-getupdate</span><br><span class="line"></span><br><span class="line"><span class="comment"># 아래 명령어를 이용해서 xubuntu-desktop설치</span></span><br><span class="line">sudo apt-getinstallxubuntu-desktop</span><br><span class="line"></span><br><span class="line"><span class="comment"># 아래 명령어를 이용해서 xrdp 설치</span></span><br><span class="line">sudo apt-getinstallxrdp</span><br><span class="line"></span><br><span class="line"><span class="comment"># 아래 명령어를 이용해서 xorgxrdp 설치</span></span><br><span class="line">sudo apt-getinstallxorgxrdp</span><br><span class="line"></span><br><span class="line"><span class="comment"># MaxSessions 값 변경 및 항목 주석 처리</span></span><br><span class="line">sudo vi/etc/xrdp/sesman.ini</span><br><span class="line"><span class="comment">#[Security]항목의 TerminalServerUsers=tsusers, TerminalServerAdmins=tsadmins 주석 처리 MaxSessions 값을 50에서 100으로 변경</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># xrdp 서비스가 자동으로 실행되도록 설정</span></span><br><span class="line">sudo systemctl enablexrdp</span><br></pre></td></tr></table></figure><p>이제 <code>sudoer</code> 등록(사용자 등록)만 남았다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 아래 명령어를 이용해서 사용자 추가</span></span><br><span class="line">sudo adduser“사용자ID”</span><br><span class="line"></span><br><span class="line"><span class="comment"># 아래 명령어를 이용해서 sudoers 등록</span></span><br><span class="line">sudo visudo</span><br><span class="line"></span><br><span class="line"><span class="comment"># 파일이 열리면 rootALL=(ALL:ALL)ALL부분 다음 라인에 위에서 추가한 사용자를 동일하게 추가</span></span><br><span class="line">“사용자ID”ALL=(ALL:ALL)ALL</span><br><span class="line"></span><br><span class="line"><span class="comment"># Ctrl+O 후 파일명을 sudoers로 변경 후 저장</span></span><br><span class="line">(overwrite하겠냐고 물어보면 Y입력)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 저장 후 Ctrl+X로 빠져나옴</span></span><br></pre></td></tr></table></figure><p>이로서 <code>Ubuntu Desktop</code> 설치와 사용자 등록이 끝난다.</p><h3 id="Windows-원격-데스크톱에서-Ubuntu-Server-연결"><a href="#Windows-원격-데스크톱에서-Ubuntu-Server-연결" class="headerlink" title="Windows 원격 데스크톱에서 Ubuntu Server 연결"></a>Windows 원격 데스크톱에서 Ubuntu Server 연결</h3><p><img src="https://1.bp.blogspot.com/-wejJJKHWCgo/XhHbkP-mZAI/AAAAAAAAAOA/pDrhbh_3YyQySrEcsB8TR7LOJEapkIKMACLcBGAsYHQ/s400/1.png" alt="41"><br>원격 데스크톱 연결 프로그램을 실행한다.<br><img src="https://1.bp.blogspot.com/-CYrGhJ4GIwM/XhHbkZm2ZfI/AAAAAAAAAOE/VqAiX0F-pUkfZNL8nfi7knxyDAjbhl-FACLcBGAsYHQ/s400/2.JPG" alt="42"><br>컴퓨터 항목에 인스턴스에 연결된 Floating IP를 입력하고 연결한다.<br><img src="https://1.bp.blogspot.com/-XIAlnLLN4zE/XhHbkRMvTUI/AAAAAAAAAOI/AG9dKa92GHAopv6V32If4Y_DoWk38yQCwCLcBGAsYHQ/s400/3.JPG" alt="43"><br>추가한 사용자 ID와 password를 입력 후 연결하면 Ubuntu로 접속된다.</p><p>macOS 사용자의 경우 <code>CoRD</code>와 같은 클라이언트를 사용해 접속한다.</p><h2 id="5-GCC-설치"><a href="#5-GCC-설치" class="headerlink" title="5. GCC 설치"></a>5. GCC 설치</h2><p><code>Ubuntu desktop</code> 또는 <code>Putty</code>에서 터미널을 열어 <code>GCC</code> 최신 버전을 설치한다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">gcc --version</span><br><span class="line"><span class="comment"># 현재 gcc 버전을 확인한다.</span></span><br><span class="line"></span><br><span class="line">sudo add-apt-repository ppa:ubuntu-toolchain-r/<span class="built_in">test</span></span><br><span class="line">sudo apt-get update</span><br><span class="line"><span class="comment"># GCC 상위 버전이 저장되어 있는 저장소를 추가하고 업데이트한다.</span></span><br><span class="line"></span><br><span class="line">sudo apt-get install gcc-9</span><br><span class="line"><span class="comment"># GCC 9를 설치한다.</span></span><br><span class="line"></span><br><span class="line">sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-9 20</span><br><span class="line">sudo update-alternatives --config gcc</span><br><span class="line"><span class="comment"># GCC 9 기본 컴파일러 설정</span></span><br><span class="line"></span><br><span class="line">gcc --version</span><br><span class="line"><span class="comment"># 최종 GCC 버전 확인</span></span><br></pre></td></tr></table></figure><p>이렇게 <code>gcc</code> 설치 후 vi 에디터로 간단한 코드를 구현하였는데 <strong>컴파일 과정에서 에러가 발생했다.</strong><br><img src="https://1.bp.blogspot.com/-4MwAe-1jU_k/XhMNYV3s9FI/AAAAAAAAAOg/OfoTp5oOr1cOJVHbveaqSGS0trlw4vB0ACLcBGAsYHQ/s640/A.%25EC%25BB%25B4%25ED%258C%258C%25EC%259D%25BC%25EC%2597%2590%25EB%259F%25AC-%25EB%259D%25BC%25EC%259D%25B4%25EB%25B8%258C%25EB%259F%25AC%25EB%25A6%25ACx.JPG" alt="51"><br><strong>fatal error : stdio.h: No such file or directory</strong><br><code>stdio.h</code>에 대한 라이브러리가 설치되지 않아서 인식하지 못한다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update &amp;&amp; sudo apt-get install build-essential</span><br></pre></td></tr></table></figure><p><code>gcc build</code> 관련 필수 라이브러리를 설치하면 해결된다.</p><h2 id="6-개발환경-OpenJDK-Eclipse-VS-Code-구축"><a href="#6-개발환경-OpenJDK-Eclipse-VS-Code-구축" class="headerlink" title="6. 개발환경(OpenJDK, Eclipse, VS Code) 구축"></a>6. 개발환경(OpenJDK, Eclipse, VS Code) 구축</h2><h3 id="OpenJDK-설치-Oracle-라이선스-변경으로-OpenJDK-대체"><a href="#OpenJDK-설치-Oracle-라이선스-변경으로-OpenJDK-대체" class="headerlink" title="OpenJDK 설치 (Oracle 라이선스 변경으로 OpenJDK 대체)"></a>OpenJDK 설치 (Oracle 라이선스 변경으로 OpenJDK 대체)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 아래 명령어로 JDK8 인스톨</span></span><br><span class="line">sudo apt-get install openjdk-8-jdk</span><br><span class="line"></span><br><span class="line"><span class="comment"># 인스톨 완료 후 아래 명령어로 Java version확인</span></span><br><span class="line">java-version</span><br><span class="line"></span><br><span class="line"><span class="comment"># Java버전이 여러 개 설치된 경우 아래 명령어를 통해 default버전 선택</span></span><br><span class="line">sudo update-alternatives --config java</span><br><span class="line"></span><br><span class="line"><span class="comment"># Java환경 변수 설정 / .profile파일을 vi로 열어 다음 내용 추가</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=“/usr”</span><br><span class="line"><span class="built_in">export</span> PATH=“<span class="variable">$JAVA_HOME</span>/bin:<span class="variable">$PATH</span>”</span><br><span class="line"></span><br><span class="line"><span class="comment"># 저장 후 아래 명령어 수행하여 .profile파일 갱신</span></span><br><span class="line">source.profile</span><br></pre></td></tr></table></figure><h3 id="Eclipse-설치"><a href="#Eclipse-설치" class="headerlink" title="Eclipse 설치"></a>Eclipse 설치</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 터미널에서 아래 명령어로 firefox 인스톨</span></span><br><span class="line">sudo apt-get install firefox</span><br><span class="line"></span><br><span class="line"><span class="comment"># 브라우저에서 http://www.eclipse.org/ 로 접속한 후 [다운로드] 메뉴 클릭</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 최신 버전인 Eclipse IDE YYYY-MM항목에서 Download Packages 링크 클릭</span></span><br><span class="line">Java EE또는 Java Developers중 선택하여 64 bit 링크 클릭하여 다운로드</span><br><span class="line"></span><br><span class="line"><span class="comment"># 터미널에서 Downloads 폴더 이동 후 다음 명령어를 이용하여 압축 해제</span></span><br><span class="line">(폴더 이동 명령어: <span class="built_in">cd</span>)</span><br><span class="line">tar xvfz ”다운받은 이클립스 파일명”</span><br><span class="line"></span><br><span class="line"><span class="comment"># 다음 명령어를 이용하여 /opt(추가 패키지를 설치할 때 사용하는 공간) 디렉토리로 이동 sudo mv eclipse /opt</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 다음 명령어를 이용하여 X윈도우를 위한 바로가기 생성</span></span><br><span class="line">sudo vi /usr/share/applications/eclipse.desktop 후 다음 내용 추가 후 저장</span><br><span class="line"></span><br><span class="line">[Desktop Entry]</span><br><span class="line">Encoding=UTF-8</span><br><span class="line">Name=Eclipse</span><br><span class="line">Comment=Eclipse IDE</span><br><span class="line">Exec=/opt/eclipse/eclipse</span><br><span class="line">Icon=/opt/eclipse/icon.xpm</span><br><span class="line">Terminal=<span class="literal">false</span></span><br><span class="line">Type=Application</span><br><span class="line">Categories=Development</span><br><span class="line">StartupNotif=<span class="literal">true</span></span><br></pre></td></tr></table></figure><p>이렇게 하면 <code>Eclipse</code> 설치 및 바로가기 생성까지 완료된다.</p><p>이후 샘플 코드를 작성하고 실행한다.</p><p>X윈도우에서 <code>Applications &gt; Development &gt; Eclipse</code> 실행 후<br>프로젝트를 추가해서 java 파일을 작성한다.<br><img src="https://1.bp.blogspot.com/-vWvSEf-ohQs/XhMP1z4xYoI/AAAAAAAAAPA/8-r8QPu7KnQ5s7EBwqBLW38uuNQFoG6EwCLcBGAsYHQ/s640/HelloZini%25EC%25B6%259C%25EB%25A0%25A5.JPG" alt="61"><br>정상적으로 작동된다.</p><h3 id="VS-Code-Visual-Studio-Code-설치"><a href="#VS-Code-Visual-Studio-Code-설치" class="headerlink" title="VS Code (Visual Studio Code) 설치"></a>VS Code (Visual Studio Code) 설치</h3><ul><li><p>브라우저에서 <a href="https://code.visualstudio.com/Download">https://code.visualstudio.com/Download</a> 로 접속한 후 <code>Debian, Ubuntu</code><br>항목 클릭</p></li><li><p>최신 버전의 deb파일 다운로드<br>code*.deb파일을 다운로드 하여 저장</p></li><li><p>터미널에서 Downloads 폴더 이동 후 다음 명령어를 이용하여 설치<br><code>sudo dpkg -i ”다운받은 Visual Studio Code 설치파일”</code></p></li><li><p>만약 missing dependencies 문제가 발생하면 다음 명령어 실행<br><code>sudo apt-finstall</code></p></li><li><p>/usr/lib/x86_64-linux-gnu 폴더로 이동하여 다음 명령어 실행하여 2개의 파일 백업</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo cp libxcb.so.1 libxcb.so.1.bak</span><br><span class="line">sudo cp libxcb.so.1.1.0 libxcb.so.1.1.0.bak</span><br></pre></td></tr></table></figure></li><li><p>파일 백업 후 다음 명령어 실행</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo sed -i &#39;s&#x2F;BIG-REQUESTS&#x2F;_IG-REQUESTS&#x2F;&#39;&#x2F;usr&#x2F;lib&#x2F;x86_64-linux-gnu&#x2F;libxcb.so.1</span><br><span class="line">sudo sed -i &#39;s&#x2F;BIG-REQUESTS&#x2F;_IG-REQUESTS&#x2F;&#39;&#x2F;usr&#x2F;lib&#x2F;x86_64-linux-gnu&#x2F;libxcb.so.1.1.0</span><br></pre></td></tr></table></figure></li><li><p>두 파일을 /usr/share/code 폴더에 복사</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo cp libxcb.so.1 libxcb.so.1.1.0 &#x2F;usr&#x2F;share&#x2F;code</span><br></pre></td></tr></table></figure></li><li><p><code>Applications Menu &gt; Development &gt; Visual Studio Code</code> 실행</p></li></ul><p>이로써 개발환경 구축을 위한 <strong>OpenJDK, Eclipse, VS Code</strong> 설치가 끝났다.</p><h2 id="7-이미지-생성"><a href="#7-이미지-생성" class="headerlink" title="7. 이미지 생성"></a>7. 이미지 생성</h2><p>이미지를 생성하면 새 인스턴스를 기존 인스턴스로 복제할 수 있다.<br>지금까지 인스턴스에 개발 환경 구축까지 완료했으니, 저장해놓은 이미지를 새 인스턴스 생성시의 세팅에서 적용하면 된다.</p><p>고스트로 윈도우 이미지를 만들어서 윈도우 복원에 사용하는 것과 비슷하다.</p><p>이제 이미지 생성 방법이다.</p><p>이미지를 생성하기 위해서는 대상 인스턴스가 Shutdown 상태여야 한다.</p><p><img src="https://1.bp.blogspot.com/-uLMEEswHXGo/XhQnoOy-piI/AAAAAAAAAPc/seM5i48ktX84CgJHeHlCmjRfB0q8BjE1gCLcBGAsYHQ/s640/1.%25EC%259D%25B8%25EC%258A%25A4%25ED%2584%25B4%25EC%258A%25A4%25EC%25A2%2585%25EB%25A3%258C.JPG" alt="t71"><br>인스턴스 관리에서 대상 인스턴스를 선택한 후 종료시킨다.</p><p><img src="https://1.bp.blogspot.com/-NqbUKzEL7R4/XhQnoNs9_YI/AAAAAAAAAPY/5uXGZ0nfX_A7_-gdv8CZYNI50wkFFJeBACLcBGAsYHQ/s400/2.%25EC%25A2%2585%25EB%25A3%258C.JPG" alt="t72"><br>종료 재질문에 확인해준다.</p><p><img src="https://1.bp.blogspot.com/-sVmZkgwMcpM/XhQnoKzCHaI/AAAAAAAAAPg/kgZesajgmuEpD-vAwXWtP5_XBMloQLbKACLcBGAsYHQ/s400/3.%25EC%259D%25B4%25EB%25AF%25B8%25EC%25A7%2580%25EC%2583%259D%25EC%2584%25B1%25EB%25B2%2584%25ED%258A%25BC.JPG" alt="t73"><br>셧다운이 확인되었다면 이미지 생성 버튼을 누른다.</p><p><img src="https://1.bp.blogspot.com/-98Km_EK6cxY/XhQnpMv72eI/AAAAAAAAAPk/aEQCNtEkkLIjviKTccWKItztkT0TsPRSQCLcBGAsYHQ/s400/4.%25EC%259D%25B4%25EB%25AF%25B8%25EC%25A7%2580%25EC%2583%259D%25EC%2584%25B1.JPG" alt="t74"><br>인스턴스를 확인하고 이미지 이름을 설정한 후 확인해준다.</p><p><img src="https://1.bp.blogspot.com/-03D8WqPhtTI/XhQnpCmd67I/AAAAAAAAAPo/OnhUpQTXw9wGVonYrOyZCglUogh4BhuxgCLcBGAsYHQ/s640/5%252C%25ED%2599%2595%25EC%259D%25B8.JPG" alt="t75"><br>인스턴스 &gt; 이미지에 들어가서 이미지가 생성되고 있는지 확인할 수 있다.<br>생성에는 다소 시간이 걸린다.</p><p>이로써 이미지 생성이 끝났다!</p><h2 id="8-Ubuntu-웹서버-nginX-구축"><a href="#8-Ubuntu-웹서버-nginX-구축" class="headerlink" title="8. Ubuntu 웹서버(nginX) 구축"></a>8. Ubuntu 웹서버(nginX) 구축</h2><p>웹 서버 종류에는 Apache, Nginx 등등이 있지만<br>아파치 점유율을 무섭게 따라잡고 있다는 엔진엑스를 설치해보기로 했다.</p><h3 id="보안정책-수정"><a href="#보안정책-수정" class="headerlink" title="보안정책 수정"></a>보안정책 수정</h3><p><img src="https://1.bp.blogspot.com/-xnUBn6cJlI0/XhWuuuvB-eI/AAAAAAAAAQQ/b2EI6aDWd-ghyQLi9TOBVM9PcdgYexQ8QCLcBGAsYHQ/s640/1.%25EB%25B3%25B4%25EC%2595%2588%25EC%25A0%2595%25EC%25B1%2585%25EB%25B3%2580%25EA%25B2%25BD.JPG" alt="t81"></p><p>우선 토스트에서 보안정책 수정이 필요하다.</p><p>클라이언트가 HTTP(인터넷 브라우저)로 서버에 접속하면 80포트로 접속하게 되는데,<br>수신에서 80포트 보안을 열어놓지 않으면 접속되지 않기 때문에 웹 서버가 무의미해진다.</p><h3 id="nginX-설치"><a href="#nginX-설치" class="headerlink" title="nginX 설치"></a>nginX 설치</h3><p>이제 <code>Ubuntu</code>에 <code>nginx</code>를 설치한다.<br><code>apt-get</code> 방식과 소스코드를 내려받아서 컴파일하는 2가지 방식이 있지만 편의를 위해 <code>apt-get</code> 설치를 이용하겠다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install nginx</span><br></pre></td></tr></table></figure><p>위 명령어로 nginx를 설치 후</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -v</span><br></pre></td></tr></table></figure><p>nginx 버전을 확인한다.<br>이로서 nginx 설치는 끝났다.</p><p>우선 nginx 사용 시의 알아둬야할 명령어이다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 시작</span></span><br><span class="line">$ sudo service nginx start</span><br><span class="line"><span class="comment"># 재시작</span></span><br><span class="line">$ sudo service nginx restart</span><br><span class="line"><span class="comment"># 중지</span></span><br><span class="line">$ sudo service nginx stop</span><br><span class="line"><span class="comment"># 상태</span></span><br><span class="line">$ sudo service nginx status</span><br><span class="line"><span class="comment"># 설정 reload</span></span><br><span class="line">$ sudo service nginx reload</span><br></pre></td></tr></table></figure><p>nginX 서비스를 시작하고 플로팅IP를 통해 브라우저로 서버를 접속해보면<br><strong>Welcome to nginx!</strong> 페이지가 나올 것이다.</p><p>Nginx 기본 설정은 <a href="https://extrememanual.net/9976">익스트림 매뉴얼의 포스트</a>의 도움을 많이 받았는데, 정말 잘 설명되어 있어서 참고하면 좋겠다.</p><h2 id="9-Ubuntu-FTP-서버-설치와-사용"><a href="#9-Ubuntu-FTP-서버-설치와-사용" class="headerlink" title="9. Ubuntu FTP 서버 설치와 사용"></a>9. Ubuntu FTP 서버 설치와 사용</h2><p>우분투의 기본 FTP 서버인 <code>vsftpd</code>를 설치하고 이용해보자. vsftpd에서 <code>vs</code>는 <code>Very Secure</code>을 의미한다. 기존 FTP 서버의 보안 취약점을 보완했기 때문에 붙여졌다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install vsftpd</span><br></pre></td></tr></table></figure><p>설치는 끝났다. 이제 vsftpd의 기본 설정값 중 몇 가지를 변경해야 한다. 설정파일 vsftpd.conf 을 편집하자.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/vsftpd.conf</span><br></pre></td></tr></table></figure><p>보안을 위해 익명 사용자는 사용할 수 없도록 해야한다.</p><p><code>anonymous_enable</code> 파라미터 값이 NO 인지 확인한다. 익명 사용자 접속을 허용하려면 YES로 바꿔주면 된다.</p><p>파일 읽기 뿐만 아니라 파일 쓰기도 가능하게 해야한다.</p><p><code>write_enable=YES</code> 라인을 찾아서 주석 표시 <code>#</code>을 제거하자.</p><p>기본 설정을 마쳤다. 변경사항을 적용하기 위해서 vsftpd 서비스를 재시작하자.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service vsftpd restart</span><br></pre></td></tr></table></figure><p>이제 <code>vsftpd</code>를 사용할 수 있는 사용자를 추가할 차례이다. <code>testuser</code> 사용자를 추가해보자.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo adduser testuser</span><br></pre></td></tr></table></figure><p>비밀번호 입력을 하고, <code>Full Name[]</code> 부터는 그냥 엔터 키를 치고 넘어가고 Y를 입력하면 된다.</p><p>FTP 서버 쪽에서 준비할 작업은 모두 끝났다. 이제 파일질라를 사용하거나 윈도우 탐색기의 ftp를 이용해서 접속할 수 있다. 이때 FTP의 사용자 ID와 패스워드는 <code>adduser</code>에서 추가한 사용자의 정보로 로그인하면 된다.</p><h2 id="가이드를-마치며"><a href="#가이드를-마치며" class="headerlink" title="가이드를 마치며"></a>가이드를 마치며</h2><p>Toast Handbook Guide를 베이스로 Ubuntu 관련 구글링을 참고하여 서버 스터디에서 선두주자를 맡았다. 현재도 학교에서 대여중인 토스트 서버를 사용하고 있는데, 아직까지 불편한 점을 느낀 적은 딱히 없고, 사용할 때마다 NHN의 기술력에 놀라곤 한다. NHN Toast 클라우드 센터가 국내에는 판교에 있다고 한다. <strong>가고싶다</strong></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;NHN-Toast-Cloud-가이드&quot;&gt;&lt;a href=&quot;#NHN-Toast-Cloud-가이드&quot; class=&quot;headerlink&quot; title=&quot;NHN Toast Cloud 가이드&quot;&gt;&lt;/a&gt;NHN Toast Cloud 가이드&lt;/h1&gt;&lt;p&gt;&lt;i</summary>
      
    
    
    
    <category term="cloud" scheme="https://zinirun.github.io/categories/cloud/"/>
    
    <category term="toast" scheme="https://zinirun.github.io/categories/cloud/toast/"/>
    
    
    <category term="cloud" scheme="https://zinirun.github.io/tags/cloud/"/>
    
    <category term="linux" scheme="https://zinirun.github.io/tags/linux/"/>
    
    <category term="toast" scheme="https://zinirun.github.io/tags/toast/"/>
    
    <category term="ubuntu" scheme="https://zinirun.github.io/tags/ubuntu/"/>
    
  </entry>
  
  <entry>
    <title>Javascript 30 - Day 2 JS and CSS clock</title>
    <link href="https://zinirun.github.io/2020/08/15/js-course30-2/"/>
    <id>https://zinirun.github.io/2020/08/15/js-course30-2/</id>
    <published>2020-08-15T11:59:22.000Z</published>
    <updated>2020-08-15T12:33:31.835Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Day-2-JS-and-CSS-clock"><a href="#Day-2-JS-and-CSS-clock" class="headerlink" title="Day 2 - JS and CSS clock"></a>Day 2 - JS and CSS clock</h2><div class="video-container"><iframe src="https://www.youtube.com/embed/xu87YWbr4X0" frameborder="0" loading="lazy" allowfullscreen></iframe></div><h3 id="START"><a href="#START" class="headerlink" title="START"></a>START</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>JS + CSS Clock<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;clock&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;clock-face&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;hand hour-hand&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;hand min-hand&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;hand second-hand&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">      html &#123;</span><br><span class="line">        background: #018ded url(https://unsplash.it/1500/1000?image=881&amp;blur=5);</span><br><span class="line">        background-size: cover;</span><br><span class="line">        font-family: &quot;helvetica neue&quot;;</span><br><span class="line">        text-align: center;</span><br><span class="line">        font-size: 10px;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      body &#123;</span><br><span class="line">        margin: 0;</span><br><span class="line">        font-size: 2rem;</span><br><span class="line">        display: flex;</span><br><span class="line">        flex: 1;</span><br><span class="line">        min-height: 100vh;</span><br><span class="line">        align-items: center;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">      <span class="selector-class">.clock</span> &#123;</span></span><br><span class="line">        width: 30rem;</span><br><span class="line">        height: 30rem;</span><br><span class="line">        border: 20px solid white;</span><br><span class="line">        border-radius: 50%;</span><br><span class="line">        margin: 50px auto;</span><br><span class="line">        position: relative;</span><br><span class="line">        padding: 2rem;</span><br><span class="line"><span class="css">        <span class="selector-tag">box-shadow</span>: 0 0 0 4<span class="selector-tag">px</span> <span class="selector-tag">rgba</span>(0, 0, 0, 0<span class="selector-class">.1</span>), <span class="selector-tag">inset</span> 0 0 0 3<span class="selector-tag">px</span> <span class="selector-id">#efefef</span>,</span></span><br><span class="line"><span class="css">          <span class="selector-tag">inset</span> 0 0 10<span class="selector-tag">px</span> <span class="selector-tag">black</span>, 0 0 10<span class="selector-tag">px</span> <span class="selector-tag">rgba</span>(0, 0, 0, 0<span class="selector-class">.2</span>);</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">      <span class="selector-class">.clock-face</span> &#123;</span></span><br><span class="line">        position: relative;</span><br><span class="line">        width: 100%;</span><br><span class="line">        height: 100%;</span><br><span class="line">        transform: translateY(</span><br><span class="line">          -3px</span><br><span class="line"><span class="css">        ); <span class="comment">/* account for the height of the clock hands */</span></span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">      <span class="selector-class">.hand</span> &#123;</span></span><br><span class="line">        width: 50%;</span><br><span class="line">        height: 6px;</span><br><span class="line">        background: black;</span><br><span class="line">        position: absolute;</span><br><span class="line">        top: 50%;</span><br><span class="line">      &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="FINISHED"><a href="#FINISHED" class="headerlink" title="FINISHED"></a>FINISHED</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>JS + CSS Clock<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;clock&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;clock-face&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;hand hour-hand&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;hand min-hand&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;hand second-hand&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">      html &#123;</span><br><span class="line">        background: #018ded url(https://unsplash.it/1500/1000?image=881&amp;blur=5);</span><br><span class="line">        background-size: cover;</span><br><span class="line">        font-family: &quot;helvetica neue&quot;;</span><br><span class="line">        text-align: center;</span><br><span class="line">        font-size: 10px;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      body &#123;</span><br><span class="line">        margin: 0;</span><br><span class="line">        font-size: 2rem;</span><br><span class="line">        display: flex;</span><br><span class="line">        flex: 1;</span><br><span class="line">        min-height: 100vh;</span><br><span class="line">        align-items: center;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">      <span class="selector-class">.clock</span> &#123;</span></span><br><span class="line">        width: 30rem;</span><br><span class="line">        height: 30rem;</span><br><span class="line">        border: 20px solid white;</span><br><span class="line">        border-radius: 50%;</span><br><span class="line">        margin: 50px auto;</span><br><span class="line">        position: relative;</span><br><span class="line">        padding: 2rem;</span><br><span class="line"><span class="css">        <span class="selector-tag">box-shadow</span>: 0 0 0 4<span class="selector-tag">px</span> <span class="selector-tag">rgba</span>(0, 0, 0, 0<span class="selector-class">.1</span>), <span class="selector-tag">inset</span> 0 0 0 3<span class="selector-tag">px</span> <span class="selector-id">#efefef</span>,</span></span><br><span class="line"><span class="css">          <span class="selector-tag">inset</span> 0 0 10<span class="selector-tag">px</span> <span class="selector-tag">black</span>, 0 0 10<span class="selector-tag">px</span> <span class="selector-tag">rgba</span>(0, 0, 0, 0<span class="selector-class">.2</span>);</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">      <span class="selector-class">.clock-face</span> &#123;</span></span><br><span class="line">        position: relative;</span><br><span class="line">        width: 100%;</span><br><span class="line">        height: 100%;</span><br><span class="line">        transform: translateY(</span><br><span class="line">          -3px</span><br><span class="line"><span class="css">        ); <span class="comment">/* account for the height of the clock hands */</span></span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">      <span class="selector-class">.hand</span> &#123;</span></span><br><span class="line">        width: 50%;</span><br><span class="line">        height: 6px;</span><br><span class="line">        background: black;</span><br><span class="line">        position: absolute;</span><br><span class="line">        top: 50%;</span><br><span class="line">        transform-origin: 100%;</span><br><span class="line">        transform: rotate(90deg);</span><br><span class="line"><span class="css">        <span class="selector-tag">transition</span>: <span class="selector-tag">all</span> 0<span class="selector-class">.05s</span>;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">transition-timing-function</span>: <span class="selector-tag">cubic-bezier</span>(0<span class="selector-class">.1</span>, 2<span class="selector-class">.7</span>, 0<span class="selector-class">.58</span>, 1);</span></span><br><span class="line">      &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> secHand = <span class="built_in">document</span>.querySelector(<span class="string">&quot;.second-hand&quot;</span>);</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> minHand = <span class="built_in">document</span>.querySelector(<span class="string">&quot;.min-hand&quot;</span>);</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> hourHand = <span class="built_in">document</span>.querySelector(<span class="string">&quot;.hour-hand&quot;</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">      <span class="function"><span class="keyword">function</span> <span class="title">setClock</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>();</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> sec = now.getSeconds();</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> secDeg = (sec / <span class="number">60</span>) * <span class="number">360</span> + <span class="number">90</span>;</span></span><br><span class="line"><span class="javascript">        secHand.style.transform = <span class="string">`rotate(<span class="subst">$&#123;secDeg&#125;</span>deg)`</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> min = now.getMinutes();</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> minDeg = (min / <span class="number">60</span>) * <span class="number">360</span> + (sec / <span class="number">60</span>) * <span class="number">6</span> + <span class="number">90</span>;</span></span><br><span class="line"><span class="javascript">        minHand.style.transform = <span class="string">`rotate(<span class="subst">$&#123;minDeg&#125;</span>deg)`</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> hour = now.getHours();</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> hourDeg = (hour / <span class="number">12</span>) * <span class="number">360</span> + (min / <span class="number">60</span>) * <span class="number">30</span> + <span class="number">90</span>;</span></span><br><span class="line"><span class="javascript">        hourHand.style.transform = <span class="string">`rotate(<span class="subst">$&#123;hourDeg&#125;</span>deg)`</span>;</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">      <span class="built_in">setInterval</span>(setClock, <span class="number">1000</span>);</span></span><br><span class="line">      setClock();</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>rotate</code> css 속성을 자주 접하지 않아 난해했다. 아무리 돌려도 중간을 중심으로 침이 돌아가지 않아서 솔루션을 봤는데, css를 수정했어야 했다.</p><p><code>.hand</code> css 속성에</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">transform-origin</span>: 100%;</span><br><span class="line"><span class="selector-tag">transform</span>: <span class="selector-tag">rotate</span>(90<span class="selector-tag">deg</span>);</span><br><span class="line"><span class="selector-tag">transition</span>: <span class="selector-tag">all</span> 0<span class="selector-class">.05s</span>;</span><br><span class="line"><span class="selector-tag">transition-timing-function</span>: <span class="selector-tag">cubic-bezier</span>(0<span class="selector-class">.1</span>, 2<span class="selector-class">.7</span>, 0<span class="selector-class">.58</span>, 1);</span><br></pre></td></tr></table></figure><p>위의 항목을 추가한다. 이 작업만 하면 초마다, 분마다, 시간마다 침이 몇 도(<code>degree</code>) 움직여야 하는지만 알면 <code>Date()</code>를 사용하여 현재 초, 분, 시간을 받아올 수 있다. 시계는 1초마다 움직이므로 <code>setInterval(function, 1000)</code>으로 시계를 움직이는 함수를 작성해서 실행한다.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Day-2-JS-and-CSS-clock&quot;&gt;&lt;a href=&quot;#Day-2-JS-and-CSS-clock&quot; class=&quot;headerlink&quot; title=&quot;Day 2 - JS and CSS clock&quot;&gt;&lt;/a&gt;Day 2 - JS and CSS</summary>
      
    
    
    
    <category term="javascript" scheme="https://zinirun.github.io/categories/javascript/"/>
    
    
    <category term="javascript" scheme="https://zinirun.github.io/tags/javascript/"/>
    
    <category term="javascript30" scheme="https://zinirun.github.io/tags/javascript30/"/>
    
    <category term="VanillaJS" scheme="https://zinirun.github.io/tags/VanillaJS/"/>
    
  </entry>
  
  <entry>
    <title>Javascript 30 시작 - Day 1 Drum Kit</title>
    <link href="https://zinirun.github.io/2020/08/15/js-course30-1/"/>
    <id>https://zinirun.github.io/2020/08/15/js-course30-1/</id>
    <published>2020-08-15T11:23:36.000Z</published>
    <updated>2020-08-16T13:12:53.182Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Javascript30과-VanillaJS"><a href="#Javascript30과-VanillaJS" class="headerlink" title="Javascript30과 VanillaJS"></a>Javascript30과 VanillaJS</h2><p><a href="https://javascript30.com/">Javascript 30</a>은 Wes Bos가 강의하는 Vanilla JS만을 이용하여 30개의 프로젝트를 만드는 프로그램이다. 프레임워크, 컴파일러, 라이브러리 등이 없는 순수한 자바스크립트인 Vanilla JS로 완벽한 결과물을 만들 수 있다. 그래도 JS를 접한지 1년이 넘어가고, 나름 만들어본 프로젝트도 많았지만 Day 1을 시작하며 한참을 반성했다.</p><h2 id="Javscript30-시작하기"><a href="#Javscript30-시작하기" class="headerlink" title="Javscript30 시작하기"></a>Javscript30 시작하기</h2><p><a href="https://javascript30.com/">Javascript 30</a> 사이트에서 강의를 제공하고, 유튜브에서도 똑같은 강의가 올라와 있어서, 굳이 가입할 필요가 없다.</p><p>제작자가 올린 Github의 <a href="https://github.com/wesbos/JavaScript30">JavaScript30 프로젝트</a>를 fork하여 시작해도 되고, 코드만 다운받아도 된다.</p><p>Course를 공부하는 방법은 간단하다. 각 프로젝트마다 <code>index-START.html</code> 파일과 <code>index-FINISHED.html</code> 파일이 있는데, START로 문제를 해결하고, FINISHED로 모범답안을 참고하면 된다.</p><h2 id="Day-1-Javascript-Drum-Kit"><a href="#Day-1-Javascript-Drum-Kit" class="headerlink" title="Day 1 - Javascript Drum Kit"></a>Day 1 - Javascript Drum Kit</h2><div class="video-container"><iframe src="https://www.youtube.com/embed/VuN8qwZoego" frameborder="0" loading="lazy" allowfullscreen></iframe></div><h3 id="START"><a href="#START" class="headerlink" title="START"></a>START</h3><p>이제 <code>index-START.html</code>를 드럼 킷으로 만들어보자.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>JS Drum Kit<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;style.css&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;keys&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">data-key</span>=<span class="string">&quot;65&quot;</span> <span class="attr">class</span>=<span class="string">&quot;key&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">kbd</span>&gt;</span>A<span class="tag">&lt;/<span class="name">kbd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sound&quot;</span>&gt;</span>clap<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">data-key</span>=<span class="string">&quot;83&quot;</span> <span class="attr">class</span>=<span class="string">&quot;key&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">kbd</span>&gt;</span>S<span class="tag">&lt;/<span class="name">kbd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sound&quot;</span>&gt;</span>hihat<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">data-key</span>=<span class="string">&quot;68&quot;</span> <span class="attr">class</span>=<span class="string">&quot;key&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">kbd</span>&gt;</span>D<span class="tag">&lt;/<span class="name">kbd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sound&quot;</span>&gt;</span>kick<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">data-key</span>=<span class="string">&quot;70&quot;</span> <span class="attr">class</span>=<span class="string">&quot;key&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">kbd</span>&gt;</span>F<span class="tag">&lt;/<span class="name">kbd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sound&quot;</span>&gt;</span>openhat<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">data-key</span>=<span class="string">&quot;71&quot;</span> <span class="attr">class</span>=<span class="string">&quot;key&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">kbd</span>&gt;</span>G<span class="tag">&lt;/<span class="name">kbd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sound&quot;</span>&gt;</span>boom<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">data-key</span>=<span class="string">&quot;72&quot;</span> <span class="attr">class</span>=<span class="string">&quot;key&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">kbd</span>&gt;</span>H<span class="tag">&lt;/<span class="name">kbd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sound&quot;</span>&gt;</span>ride<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">data-key</span>=<span class="string">&quot;74&quot;</span> <span class="attr">class</span>=<span class="string">&quot;key&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">kbd</span>&gt;</span>J<span class="tag">&lt;/<span class="name">kbd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sound&quot;</span>&gt;</span>snare<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">data-key</span>=<span class="string">&quot;75&quot;</span> <span class="attr">class</span>=<span class="string">&quot;key&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">kbd</span>&gt;</span>K<span class="tag">&lt;/<span class="name">kbd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sound&quot;</span>&gt;</span>tom<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">data-key</span>=<span class="string">&quot;76&quot;</span> <span class="attr">class</span>=<span class="string">&quot;key&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">kbd</span>&gt;</span>L<span class="tag">&lt;/<span class="name">kbd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sound&quot;</span>&gt;</span>tink<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">audio</span> <span class="attr">data-key</span>=<span class="string">&quot;65&quot;</span> <span class="attr">src</span>=<span class="string">&quot;sounds/clap.wav&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">audio</span> <span class="attr">data-key</span>=<span class="string">&quot;83&quot;</span> <span class="attr">src</span>=<span class="string">&quot;sounds/hihat.wav&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">audio</span> <span class="attr">data-key</span>=<span class="string">&quot;68&quot;</span> <span class="attr">src</span>=<span class="string">&quot;sounds/kick.wav&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">audio</span> <span class="attr">data-key</span>=<span class="string">&quot;70&quot;</span> <span class="attr">src</span>=<span class="string">&quot;sounds/openhat.wav&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">audio</span> <span class="attr">data-key</span>=<span class="string">&quot;71&quot;</span> <span class="attr">src</span>=<span class="string">&quot;sounds/boom.wav&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">audio</span> <span class="attr">data-key</span>=<span class="string">&quot;72&quot;</span> <span class="attr">src</span>=<span class="string">&quot;sounds/ride.wav&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">audio</span> <span class="attr">data-key</span>=<span class="string">&quot;74&quot;</span> <span class="attr">src</span>=<span class="string">&quot;sounds/snare.wav&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">audio</span> <span class="attr">data-key</span>=<span class="string">&quot;75&quot;</span> <span class="attr">src</span>=<span class="string">&quot;sounds/tom.wav&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">audio</span> <span class="attr">data-key</span>=<span class="string">&quot;76&quot;</span> <span class="attr">src</span>=<span class="string">&quot;sounds/tink.wav&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="FINISHED"><a href="#FINISHED" class="headerlink" title="FINISHED"></a>FINISHED</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>JS Drum Kit<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;style.css&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;keys&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">data-key</span>=<span class="string">&quot;65&quot;</span> <span class="attr">class</span>=<span class="string">&quot;key&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">kbd</span>&gt;</span>A<span class="tag">&lt;/<span class="name">kbd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sound&quot;</span>&gt;</span>clap<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">data-key</span>=<span class="string">&quot;83&quot;</span> <span class="attr">class</span>=<span class="string">&quot;key&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">kbd</span>&gt;</span>S<span class="tag">&lt;/<span class="name">kbd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sound&quot;</span>&gt;</span>hihat<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">data-key</span>=<span class="string">&quot;68&quot;</span> <span class="attr">class</span>=<span class="string">&quot;key&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">kbd</span>&gt;</span>D<span class="tag">&lt;/<span class="name">kbd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sound&quot;</span>&gt;</span>kick<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">data-key</span>=<span class="string">&quot;70&quot;</span> <span class="attr">class</span>=<span class="string">&quot;key&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">kbd</span>&gt;</span>F<span class="tag">&lt;/<span class="name">kbd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sound&quot;</span>&gt;</span>openhat<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">data-key</span>=<span class="string">&quot;71&quot;</span> <span class="attr">class</span>=<span class="string">&quot;key&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">kbd</span>&gt;</span>G<span class="tag">&lt;/<span class="name">kbd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sound&quot;</span>&gt;</span>boom<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">data-key</span>=<span class="string">&quot;72&quot;</span> <span class="attr">class</span>=<span class="string">&quot;key&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">kbd</span>&gt;</span>H<span class="tag">&lt;/<span class="name">kbd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sound&quot;</span>&gt;</span>ride<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">data-key</span>=<span class="string">&quot;74&quot;</span> <span class="attr">class</span>=<span class="string">&quot;key&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">kbd</span>&gt;</span>J<span class="tag">&lt;/<span class="name">kbd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sound&quot;</span>&gt;</span>snare<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">data-key</span>=<span class="string">&quot;75&quot;</span> <span class="attr">class</span>=<span class="string">&quot;key&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">kbd</span>&gt;</span>K<span class="tag">&lt;/<span class="name">kbd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sound&quot;</span>&gt;</span>tom<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">data-key</span>=<span class="string">&quot;76&quot;</span> <span class="attr">class</span>=<span class="string">&quot;key&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">kbd</span>&gt;</span>L<span class="tag">&lt;/<span class="name">kbd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sound&quot;</span>&gt;</span>tink<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">audio</span> <span class="attr">data-key</span>=<span class="string">&quot;65&quot;</span> <span class="attr">src</span>=<span class="string">&quot;sounds/clap.wav&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">audio</span> <span class="attr">data-key</span>=<span class="string">&quot;83&quot;</span> <span class="attr">src</span>=<span class="string">&quot;sounds/hihat.wav&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">audio</span> <span class="attr">data-key</span>=<span class="string">&quot;68&quot;</span> <span class="attr">src</span>=<span class="string">&quot;sounds/kick.wav&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">audio</span> <span class="attr">data-key</span>=<span class="string">&quot;70&quot;</span> <span class="attr">src</span>=<span class="string">&quot;sounds/openhat.wav&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">audio</span> <span class="attr">data-key</span>=<span class="string">&quot;71&quot;</span> <span class="attr">src</span>=<span class="string">&quot;sounds/boom.wav&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">audio</span> <span class="attr">data-key</span>=<span class="string">&quot;72&quot;</span> <span class="attr">src</span>=<span class="string">&quot;sounds/ride.wav&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">audio</span> <span class="attr">data-key</span>=<span class="string">&quot;74&quot;</span> <span class="attr">src</span>=<span class="string">&quot;sounds/snare.wav&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">audio</span> <span class="attr">data-key</span>=<span class="string">&quot;75&quot;</span> <span class="attr">src</span>=<span class="string">&quot;sounds/tom.wav&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">audio</span> <span class="attr">data-key</span>=<span class="string">&quot;76&quot;</span> <span class="attr">src</span>=<span class="string">&quot;sounds/tink.wav&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">      <span class="function"><span class="keyword">function</span> <span class="title">removeTransition</span>(<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (e.propertyName !== <span class="string">&quot;transform&quot;</span>) <span class="keyword">return</span>;</span></span><br><span class="line"><span class="javascript">        e.target.classList.remove(<span class="string">&quot;playing&quot;</span>);</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">      <span class="function"><span class="keyword">function</span> <span class="title">playSound</span>(<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> audio = <span class="built_in">document</span>.querySelector(<span class="string">`audio[data-key=&quot;<span class="subst">$&#123;e.keyCode&#125;</span>&quot;]`</span>);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> key = <span class="built_in">document</span>.querySelector(<span class="string">`div[data-key=&quot;<span class="subst">$&#123;e.keyCode&#125;</span>&quot;]`</span>);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (!audio) <span class="keyword">return</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">        key.classList.add(<span class="string">&quot;playing&quot;</span>);</span></span><br><span class="line">        audio.currentTime = 0;</span><br><span class="line">        audio.play();</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> keys = <span class="built_in">Array</span>.from(<span class="built_in">document</span>.querySelectorAll(<span class="string">&quot;.key&quot;</span>));</span></span><br><span class="line"><span class="javascript">      keys.forEach(<span class="function">(<span class="params">key</span>) =&gt;</span></span></span><br><span class="line"><span class="javascript">        key.addEventListener(<span class="string">&quot;transitionend&quot;</span>, removeTransition)</span></span><br><span class="line">      );</span><br><span class="line"><span class="javascript">      <span class="built_in">window</span>.addEventListener(<span class="string">&quot;keydown&quot;</span>, playSound);</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Day 1이라서 무심코 봤다가 큰 코 다쳤다. 우선 audio 태그를 다뤄본 적이 거의 없어 js에서 플레이시키는 방법도 몰랐다.</p><p>또한 <code>getElementsbyClassName</code>, <code>getElementById</code>에 익숙해져서 <code>querySelector</code>에서 <code>data-key</code> 속성으로 <code>DOM</code> 객체를 다루는 것도 쉽지 않았다.</p><p>이번에 완전히 새로 배운 것은 <code>classList</code>이다. <code>DOM</code> 객체에 <code>class</code>를 부여하고(<code>add</code>), 삭제(<code>remove</code>)할 수도 있다. 예를 들어 <code>key</code>에 <code>playing</code>이라는 <code>class</code>를 부여하면, <code>css</code>에 작성된 <code>.playing</code> 효과가 나타나고, 원할 때 <code>remove</code>로 삭제할 수 있다.</p><p>그리고 <code>transitionend</code>라는 <code>event</code>가 있는 것도 처음 알았다. 변형이 끝났을 때의 이벤트를 어떻게 처리할까 하다가 저런 사소한 이벤트의 제어도 순수하게 가능한게 신기했다.</p><p><strong>그렇게 Day 1이 끝났다.</strong></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Javascript30과-VanillaJS&quot;&gt;&lt;a href=&quot;#Javascript30과-VanillaJS&quot; class=&quot;headerlink&quot; title=&quot;Javascript30과 VanillaJS&quot;&gt;&lt;/a&gt;Javascript30과 Van</summary>
      
    
    
    
    <category term="javascript" scheme="https://zinirun.github.io/categories/javascript/"/>
    
    
    <category term="javascript" scheme="https://zinirun.github.io/tags/javascript/"/>
    
    <category term="javascript30" scheme="https://zinirun.github.io/tags/javascript30/"/>
    
    <category term="VanillaJS" scheme="https://zinirun.github.io/tags/VanillaJS/"/>
    
  </entry>
  
  <entry>
    <title>Hexo에 Disqus 설치하기</title>
    <link href="https://zinirun.github.io/2020/08/14/how-to-install-disqus-to-hexo/"/>
    <id>https://zinirun.github.io/2020/08/14/how-to-install-disqus-to-hexo/</id>
    <published>2020-08-14T14:40:48.000Z</published>
    <updated>2020-08-14T14:57:11.197Z</updated>
    
    <content type="html"><![CDATA[<p>기본적으로 Hexo에는 댓글 기능이 없다. 개발자가 만들어서 쓰던지, 설치형 댓글 서비스를 이용하던지 해야한다. 이미 유명한 <strong>Disqus</strong>라는 댓글 서비스가 있기 때문에 이를 이용하면 효율적인 댓글 시스템을 구축할 수 있다.</p><p>사용하는 블로그 테마에 따라 comment를 지원하는 경우가 있을 수 있으니 해당 테마의 설명에서 확인해보자.</p><p>내가 사용하는 <a href="https://github.com/Siricee/hexo-theme-Chic">Chic 테마</a>는 disqus comment 기능이 내장되어 있지 않기 때문에 직접 코드를 넣어주어야 했다.</p><h2 id="Disqus-가입-설정하기"><a href="#Disqus-가입-설정하기" class="headerlink" title="Disqus 가입, 설정하기"></a>Disqus 가입, 설정하기</h2><ul><li><a href="https://disqus.com/">Disqus</a>에 회원가입 후 프로필, 계정을 설정하고 <strong>GET STARTED</strong> 버튼을 클릭한다.</li><li><strong>I want to install Disqus on my site</strong>를 클릭한다.</li><li>사이트명, 카테고리를 선택하고 <strong>Create Site</strong>를 클릭한다.</li><li>plan을 선택해야 하는데 무료 사용으로도 댓글 기능을 사용할 수 있기에 <code>Basic</code>을 선택한다.</li></ul><p>이제 <strong>Platform</strong>을 선택하는데, Jekyll, WordPress 등의 블로그 플랫폼은 지원하지만 Hexo는 목록에 없다. 밑에 **I don’t see my platform~**을 선택한다.</p><h2 id="테마에-Disqus-위젯-넣기"><a href="#테마에-Disqus-위젯-넣기" class="headerlink" title="테마에 Disqus 위젯 넣기"></a>테마에 Disqus 위젯 넣기</h2><p>테마에서 post와 관련된 ejs 파일을 찾아 밑의 코드 <strong>또는 Disqus 사이트에서 넣으라고 준 코드</strong> 를 원하는 부분에 끼워넣으면 된다.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;disqus_thread&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line">    /**</span><br><span class="line">    *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.</span><br><span class="line"><span class="javascript">    *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https:<span class="comment">//disqus.com/admin/universalcode/#configuration-variables*/</span></span></span><br><span class="line">    /*</span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> disqus_config = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">this</span>.page.url = PAGE_URL;  <span class="comment">// Replace PAGE_URL with your page&#x27;s canonical URL variable</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">this</span>.page.identifier = PAGE_IDENTIFIER; <span class="comment">// Replace PAGE_IDENTIFIER with your page&#x27;s unique identifier variable</span></span></span><br><span class="line">    &#125;;</span><br><span class="line">    */</span><br><span class="line"><span class="javascript">    (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// DON&#x27;T EDIT BELOW THIS LINE</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> d = <span class="built_in">document</span>, s = d.createElement(<span class="string">&#x27;script&#x27;</span>);</span></span><br><span class="line"><span class="javascript">    s.src = <span class="string">&#x27;https://사용자이름.disqus.com/embed.js&#x27;</span>;</span></span><br><span class="line"><span class="javascript">    s.setAttribute(<span class="string">&#x27;data-timestamp&#x27;</span>, +<span class="keyword">new</span> <span class="built_in">Date</span>());</span></span><br><span class="line">    (d.head || d.body).appendChild(s);</span><br><span class="line">    &#125;)();</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">noscript</span>&gt;</span>Please enable JavaScript to view the <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://disqus.com/?ref_noscript&quot;</span>&gt;</span>comments powered by Disqus.<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">noscript</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="Hexo-서버-재실행하기"><a href="#Hexo-서버-재실행하기" class="headerlink" title="Hexo 서버 재실행하기"></a>Hexo 서버 재실행하기</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo d -g</span><br></pre></td></tr></table></figure><p>모든 설정이 끝났으니 Hexo 서버를 deploy한다.</p><p>이제 블로그를 가보면, 게시물마다 Disqus 댓글 시스템이 구축된 것을 볼 수 있다!<br>무슨 블로그 플랫폼에 댓글이 셀프냐고 할 수도 있겠지만, 익숙한 것에 대한 고마움을 느낀다.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;기본적으로 Hexo에는 댓글 기능이 없다. 개발자가 만들어서 쓰던지, 설치형 댓글 서비스를 이용하던지 해야한다. 이미 유명한 &lt;strong&gt;Disqus&lt;/strong&gt;라는 댓글 서비스가 있기 때문에 이를 이용하면 효율적인 댓글 시스템을 구축할 수</summary>
      
    
    
    
    <category term="blog" scheme="https://zinirun.github.io/categories/blog/"/>
    
    
    <category term="hexo" scheme="https://zinirun.github.io/tags/hexo/"/>
    
    <category term="disqus" scheme="https://zinirun.github.io/tags/disqus/"/>
    
  </entry>
  
  <entry>
    <title>Hexo 기술블로그 시작하기, 내가 Hexo를 선택한 이유</title>
    <link href="https://zinirun.github.io/2020/08/14/how-to-install-hexo/"/>
    <id>https://zinirun.github.io/2020/08/14/how-to-install-hexo/</id>
    <published>2020-08-14T12:53:29.000Z</published>
    <updated>2020-08-14T13:56:13.128Z</updated>
    
    <content type="html"><![CDATA[<h2 id="멀쩡한-블로그를-이사한-이유"><a href="#멀쩡한-블로그를-이사한-이유" class="headerlink" title="멀쩡한 블로그를 이사한 이유"></a>멀쩡한 블로그를 이사한 이유</h2><p>기존에 나는 <a href="https://zinirun.blogspot.com/">blogspot 블로그</a>을 사용했다. 처음엔 명색이 개발자의 기술 블로그인데 <code>github pages</code>나 <code>netlify</code>에 <code>jekyll</code>을 사용한 블로그를 만들어보고 싶었지만, 굳이 블로그 플랫폼에 큰 신경을 쓸 필요가 있을까 싶어 <code>blogspot</code>을 계속 사용했다. 사용할 수록 불편함이 드러났다. 우선 코드 삽입을 지원하지 않아서 따로 Colorscripter를 사용하는 것, 테마 자체가 불안정하고 커스텀도 완벽하지 않아서 “내가 쓰고 싶은 블로그”를 완성하지 못했다. 이사를 결심했다.</p><h3 id="Jekyll이냐-Hexo냐"><a href="#Jekyll이냐-Hexo냐" class="headerlink" title="Jekyll이냐 Hexo냐"></a>Jekyll이냐 Hexo냐</h3><p>가장 많이 사용하는 <code>Jekyll</code>, 열심히 따라오고 있는 <code>Hexo</code>중 고민을 많이 했다. Jekyll이 <code>Ruby</code> 기반, Hexo가 <code>Node.js</code> 기반이라고 한다. 그래서 Hexo보다 Jekyll이 속도면에서 뒤쳐진다. 그리고 일단 나는 <code>Ruby</code>를 몰라서 문제 해결이나 번들 충돌을 해결할 자신이 없었다. <code>Node</code>는 플젝도 몇번 해보고 어느정도 안다고 생각해서 보다 <em>나에게 친숙한</em> Hexo를 선택하게 되었다.</p><h2 id="Hexo-설치하기"><a href="#Hexo-설치하기" class="headerlink" title="Hexo 설치하기"></a>Hexo 설치하기</h2><p><a href="https://nodejs.org/ko/">Node.js</a>와 <a href="https://git-scm.com/">Git</a>을 먼저 설치하자.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g hexo-cli</span><br></pre></td></tr></table></figure><p>-g 옵션은 global로, 특정 폴더(프로젝트)가 아닌 글로벌 폴더에 저장하여 어디서든 사용할 수 있게 해준다.</p><h2 id="Hexo-시작하기"><a href="#Hexo-시작하기" class="headerlink" title="Hexo 시작하기"></a>Hexo 시작하기</h2><p>블로그 폴더를 하나 만들 것이다. 이름은 blog가 아니라도 상관없다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init blog</span><br><span class="line">$ <span class="built_in">cd</span> blog</span><br><span class="line">$ npm i</span><br></pre></td></tr></table></figure><p>이 상태에서 로컬 서버로 블로그를 확인할 수 있다!</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo s</span><br></pre></td></tr></table></figure><p><code>localhost:4000</code>에 접속하여 확인해보자.</p><h2 id="Github-Pages로-배포하기"><a href="#Github-Pages로-배포하기" class="headerlink" title="Github Pages로 배포하기"></a>Github Pages로 배포하기</h2><p><code>Github Pages</code>, <code>Netlify</code>, <code>Heroku</code> 등의 많은 서비스가 있지만 대부분의 개발자가 사용하는 깃헙으로 블로그를 배포하기로 했다.</p><h3 id="Github-Repository-만들기"><a href="#Github-Repository-만들기" class="headerlink" title="Github Repository 만들기"></a>Github Repository 만들기</h3><p><code>사용자이름.github.io</code>라는 이름으로 프로젝트를 생성한다. 이렇게 짓는 이유는 블로그를 프로젝트 페이지가 아닌 사용자 페이지로 만들 것이기 때문이다. <code>.gitignore</code>, <code>licence</code>등 기타 설정을 안 건드려도 된다.</p><p>Github에 Deploy하기 위해서는 플러그인 설치가 필요하다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm i hexo-deployer-git --save</span><br></pre></td></tr></table></figure><p>이제 거의 끝났다. 블로그의 전반적인 설정만 하면 된다.<br>블로그의 소스 폴더에서 <code>_config.yml</code> 파일을 열어보자.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># Site</span><br><span class="line">title: 지니의 기술 블로그</span><br><span class="line">subtitle: Hexo 기반의 기술 블로그</span><br><span class="line">description: 기술 블로그입니다.</span><br><span class="line">author: zini # 저자 이름</span><br><span class="line">timezone: Asia&#x2F;Seoul</span><br><span class="line"></span><br><span class="line"># URL</span><br><span class="line">url: https:&#x2F;&#x2F;사용자이름.github.io&#x2F;</span><br><span class="line">permalink: :year&#x2F;:month&#x2F;:day&#x2F;:title&#x2F; # 새로운 글에 붙을 고정 URL 포맷</span><br><span class="line">permalink_defaults:</span><br><span class="line"></span><br><span class="line"># Deployment</span><br><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: https:&#x2F;&#x2F;github.com&#x2F;사용자이름&#x2F;사용자이름.github.io.git</span><br></pre></td></tr></table></figure><h3 id="배포해보자"><a href="#배포해보자" class="headerlink" title="배포해보자"></a>배포해보자</h3><p>Github, 블로그 설정이 모두 끝났다. 이제 정말 간단하게 배포하면 된다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo g -d</span><br></pre></td></tr></table></figure><p>g: generate, d: deploy - 빌드/배포를 한번에 할 수 있다. (물론 따로도 할 수 있다)</p><p>이제 <code>사용자이름.gitgub.io</code>에 접속해서 확인해보자!</p><h2 id="Theme-설치-설정까지"><a href="#Theme-설치-설정까지" class="headerlink" title="Theme 설치, 설정까지"></a>Theme 설치, 설정까지</h2><p>기본 테마도 괜찮지만 이걸 그대로 사용할 것이라면 Hexo를 사용하지도 않았다. <a href="https://hexo.io/themes/">Hexo Themes</a>에서 300개가 넘는 테마를 고를 수 있다. 고심끝에 고른 테마는 <a href="https://github.com/Siricee/hexo-theme-Chic">Siricee의 Chic</a> 테마이다. 테마 설정도 어렵지 않다.</p><p><strong>테마마다 설치, 설정 과정이 다를 수도 있다, 꼭 확인해보자</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> blog/themes</span><br><span class="line">$ git <span class="built_in">clone</span> https://github.com/Siricee/hexo-theme-Chic.git Chic</span><br></pre></td></tr></table></figure><p>처음 init시 정한 폴더명이 blog가 아니라면 이름을 바꿔서 들어가자.</p><p>이제 themes에 테마 구조가 설치되었을 것이고, 이전에 수정했던 <code>_config.yml</code>를 다시 열어 Theme 설정을 바꿔준다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Extensions</span></span><br><span class="line"><span class="comment">## Plugins: https://hexo.io/plugins/</span></span><br><span class="line"><span class="comment">## Themes: https://hexo.io/themes/</span></span><br><span class="line">theme: Chic <span class="comment"># 설치한 테마 이름으로 설정</span></span><br></pre></td></tr></table></figure><p>테마 설치, 설정까지 끝났다. 이제 설치한 테마의 종류에 따라 themes 폴더의 <code>_config.yml</code>을 입맛에 맡게 수정해주면 된다.<br>(대부분의 테마마다 github의 readme에 상세히 설명되어 있다)</p><h2 id="진작에-쓸-걸"><a href="#진작에-쓸-걸" class="headerlink" title="진작에 쓸 걸"></a>진작에 쓸 걸</h2><p>Colorscripter의 복사 늪에서 벗어나고, css 꼬임과 기타 문제에서도 벗어났다. Jekyll이나 Hexo나 웹 코드를 해석할 줄 아는 개발자라면 크게 어렵지 않게 사용할 수 있고, 고생한 만큼 자유도는 커진다.</p><p><em>블로그 이사를 결심한 지 한달이 넘어, 마침내 이루었다.</em></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;멀쩡한-블로그를-이사한-이유&quot;&gt;&lt;a href=&quot;#멀쩡한-블로그를-이사한-이유&quot; class=&quot;headerlink&quot; title=&quot;멀쩡한 블로그를 이사한 이유&quot;&gt;&lt;/a&gt;멀쩡한 블로그를 이사한 이유&lt;/h2&gt;&lt;p&gt;기존에 나는 &lt;a href=&quot;ht</summary>
      
    
    
    
    <category term="blog" scheme="https://zinirun.github.io/categories/blog/"/>
    
    
    <category term="hexo" scheme="https://zinirun.github.io/tags/hexo/"/>
    
    <category term="gh-pages" scheme="https://zinirun.github.io/tags/gh-pages/"/>
    
  </entry>
  
</feed>
